.\" Automatically generated by Pod::Man 2.27 (Pod::Simple 3.28)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{
.    if \nF \{
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "GDBINT 7"
.TH GDBINT 7 "2015-04-03" "perl v5.18.4" "DragonFly Miscellaneous Information Manual"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
GNU Debugger Internals \- Conversion of gdbint.info
.SH "Scope of this Document"
.IX Header "Scope of this Document"
This document documents the internals of the \s-1GNU\s0 debugger, \s-1GDB. \s0 It
includes description of \s-1GDB\s0's key algorithms and operations, as well as
the mechanisms that adapt \s-1GDB\s0 to specific hosts and targets.
.PP
* Menu:
.PP
See also \*(L"Summary\*(R"
.PP
See also \*(L"Overall Structure\*(R"
.PP
See also \*(L"Algorithms\*(R"
.PP
See also \*(L"User Interface\*(R"
.PP
See also \*(L"libgdb\*(R"
.PP
See also \*(L"Values\*(R"
.PP
See also \*(L"Stack Frames\*(R"
.PP
See also \*(L"Symbol Handling\*(R"
.PP
See also \*(L"Language Support\*(R"
.PP
See also \*(L"Host Definition\*(R"
.PP
See also \*(L"Target Architecture Definition\*(R"
.PP
See also \*(L"Target Descriptions\*(R"
.PP
See also \*(L"Target Vector Definition\*(R"
.PP
See also \*(L"Native Debugging\*(R"
.PP
See also \*(L"Support Libraries\*(R"
.PP
See also \*(L"Coding Standards\*(R"
.PP
See also \*(L"Misc Guidelines\*(R"
.PP
See also \*(L"Porting \s-1GDB\*(R"\s0
.PP
See also \*(L"Versions and Branches\*(R"
.PP
See also \*(L"Start of New Year Procedure\*(R"
.PP
See also \*(L"Releasing \s-1GDB\*(R"\s0
.PP
See also \*(L"Testsuite\*(R"
.PP
See also \*(L"Hints\*(R"
.PP
\&\s-1GDB\s0 Currently available observers: see \*(L"\s-1GDB\s0 Observers\*(R"
.PP
The license for this documentation: see \*(L"\s-1GNU\s0 Free Documentation License\*(R"
.PP
See also \*(L"Concept Index\*(R"
.PP
See also \*(L"Function and Variable Index\*(R"
.SS "1 Summary"
.IX Subsection "1 Summary"
* Menu:
.PP
See also \*(L"Requirements\*(R"
.PP
See also \*(L"Contributors\*(R"
.PP
\&\fB1.1 Requirements\fR
.PP
Before diving into the internals, you should understand the formal
requirements and other expectations for \s-1GDB. \s0 Although some of these
may seem obvious, there have been proposals for \s-1GDB\s0 that have run
counter to these requirements.
.PP
First of all, \s-1GDB\s0 is a debugger.  It's not designed to be a front
panel for embedded systems.  It's not a text editor.  It's not a shell.
It's not a programming environment.
.PP
\&\s-1GDB\s0 is an interactive tool.  Although a batch mode is available,
\&\s-1GDB\s0's primary role is to interact with a human programmer.
.PP
\&\s-1GDB\s0 should be responsive to the user.  A programmer hot on the trail
of a nasty bug, and operating under a looming deadline, is going to be
very impatient of everything, including the response time to debugger
commands.
.PP
\&\s-1GDB\s0 should be relatively permissive, such as for expressions.  While
the compiler should be picky (or have the option to be made picky),
since source code lives for a long time usually, the programmer doing
debugging shouldn't be spending time figuring out to mollify the
debugger.
.PP
\&\s-1GDB\s0 will be called upon to deal with really large programs.
Executable sizes of 50 to 100 megabytes occur regularly, and we've
heard reports of programs approaching 1 gigabyte in size.
.PP
\&\s-1GDB\s0 should be able to run everywhere.  No other debugger is
available for even half as many configurations as \s-1GDB\s0 supports.
.PP
\&\fB1.2 Contributors\fR
.PP
The first edition of this document was written by John Gilmore of
Cygnus Solutions. The current second edition was written by Stan Shebs
of Cygnus Solutions, who continues to update the manual.
.PP
Over the years, many others have made additions and changes to this
document. This section attempts to record the significant contributors
to that effort. One of the virtues of free software is that everyone is
free to contribute to it; with regret, we cannot actually acknowledge
everyone here.
.PP
_Plea:_ This section has only been added relatively recently (four
years after publication of the second edition). Additions to this
section are particularly welcome.  If you or your friends (or
enemies, to be evenhanded) have been unfairly omitted from this
list, we would like to add your names!
.PP
A document such as this relies on being kept up to date by numerous
small updates by contributing engineers as they make changes to the
code base. The file `\fBChangeLog\fR' in the \s-1GDB\s0 distribution approximates a
blow-by-blow account. The most prolific contributors to this important,
but low profile task are Andrew Cagney (responsible for over half the
entries), Daniel Jacobowitz, Mark Kettenis, Jim Blandy and Eli
Zaretskii.
.PP
Eli Zaretskii and Daniel Jacobowitz wrote the sections documenting
watchpoints.
.PP
Jeremy Bennett updated the sections on initializing a new
architecture and register representation, and added the section on
Frame Interpretation.
.SS "2 Overall Structure"
.IX Subsection "2 Overall Structure"
\&\s-1GDB\s0 consists of three major subsystems: user interface, symbol handling
(the \*(L"symbol side\*(R"), and target system handling (the \*(L"target side\*(R").
.PP
The user interface consists of several actual interfaces, plus
supporting code.
.PP
The symbol side consists of object file readers, debugging info
interpreters, symbol table management, source language expression
parsing, type and value printing.
.PP
The target side consists of execution control, stack frame analysis,
and physical target manipulation.
.PP
The target side/symbol side division is not formal, and there are a
number of exceptions.  For instance, core file support involves symbolic
elements (the basic core file reader is in \s-1BFD\s0) and target elements (it
supplies the contents of memory and the values of registers).  Instead,
this division is useful for understanding how the minor subsystems
should fit together.
.PP
2.1 The Symbol Side
===================
.PP
The symbolic side of \s-1GDB\s0 can be thought of as \*(L"everything you can do in
\&\s-1GDB\s0 without having a live program running\*(R".  For instance, you can look
at the types of variables, and evaluate many kinds of expressions.
.PP
2.2 The Target Side
===================
.PP
The target side of \s-1GDB\s0 is the \*(L"bits and bytes manipulator\*(R".  Although
it may make reference to symbolic info here and there, most of the
target side will run with only a stripped executable available\*(--or even
no executable at all, in remote debugging cases.
.PP
Operations such as disassembly, stack frame crawls, and register
display, are able to work with no symbolic info at all.  In some cases,
such as disassembly, \s-1GDB\s0 will use symbolic info to present addresses
relative to symbols rather than as raw numbers, but it will work either
way.
.PP
2.3 Configurations
==================
.PP
\&\*(L"Host\*(R" refers to attributes of the system where \s-1GDB\s0 runs.  \*(L"Target\*(R"
refers to the system where the program being debugged executes.  In
most cases they are the same machine, in which case a third type of
\&\*(L"Native\*(R" attributes come into play.
.PP
Defines and include files needed to build on the host are host
support.  Examples are tty support, system defined types, host byte
order, host float format.  These are all calculated by `\fBautoconf\fR' when
the debugger is built.
.PP
Defines and information needed to handle the target format are target
dependent.  Examples are the stack frame format, instruction set,
breakpoint instruction, registers, and how to set up and tear down the
stack to call a function.
.PP
Information that is only needed when the host and target are the
same, is native dependent.  One example is Unix child process support;
if the host and target are not the same, calling `\fBfork\fR' to start the
target process is a bad idea.  The various macros needed for finding the
registers in the `\fBupage\fR', running `\fBptrace\fR', and such are all in the
native-dependent files.
.PP
Another example of native-dependent code is support for features that
are really part of the target environment, but which require `\fB#include\fR'
files that are only available on the host system.  Core file handling
and `\fBsetjmp\fR' handling are two common cases.
.PP
When you want to make \s-1GDB\s0 work as the traditional native debugger on
a system, you will need to supply both target and native information.
.PP
2.4 Source Tree Structure
=========================
.PP
The \s-1GDB\s0 source directory has a mostly flat structure\*(--there are only a
few subdirectories.  A file's name usually gives a hint as to what it
does; for example, `\fBstabsread.c\fR' reads stabs, `\fBdwarf2read.c\fR' reads
\&\s-1DWARF 2,\s0 etc.
.PP
Files that are related to some common task have names that share
common substrings.  For example, `\fB*\-thread.c\fR' files deal with debugging
threads on various platforms; `\fB*read.c\fR' files deal with reading various
kinds of symbol and object files; `\fBinf*.c\fR' files deal with direct
control of the \*(L"inferior program\*(R" (\s-1GDB\s0 parlance for the program being
debugged).
.PP
There are several dozens of files in the `\fB*\-tdep.c\fR' family.  `\fBtdep\fR'
stands for \*(L"target-dependent code\*(R"\-\-each of these files implements
debug support for a specific target architecture (sparc, mips, etc).
Usually, only one of these will be used in a specific \s-1GDB\s0 configuration
(sometimes two, closely related).
.PP
Similarly, there are many `\fB*\-nat.c\fR' files, each one for native
debugging on a specific system (e.g., `\fBsparc\-linux\-nat.c\fR' is for native
debugging of Sparc machines running the Linux kernel).
.PP
The few subdirectories of the source tree are:
.PP
`\fBcli\fR'
Code that implements \*(L"\s-1CLI\*(R",\s0 the \s-1GDB\s0 Command-Line Interpreter.
*Note Command Interpreter: User Interface.
.PP
`\fBgdbserver\fR'
Code for the \s-1GDB\s0 remote server.
.PP
`\fBgdbtk\fR'
Code for Insight, the \s-1GDB\s0 TK-based \s-1GUI\s0 front-end.
.PP
`\fBmi\fR'
The \*(L"\s-1GDB/MI\*(R",\s0 the \s-1GDB\s0 Machine Interface interpreter.
.PP
`\fBsignals\fR'
Target signal translation code.
.PP
`\fBtui\fR'
Code for \*(L"\s-1TUI\*(R",\s0 the \s-1GDB\s0 Text-mode full-screen User Interface.
*Note \s-1TUI:\s0 User Interface.
.SS "3 Algorithms"
.IX Subsection "3 Algorithms"
\&\s-1GDB\s0 uses a number of debugging-specific algorithms.  They are often not
very complicated, but get lost in the thicket of special cases and
real-world issues.  This chapter describes the basic algorithms and
mentions some of the specific target definitions that they use.
.PP
3.1 Prologue Analysis
=====================
.PP
To produce a backtrace and allow the user to manipulate older frames'
variables and arguments, \s-1GDB\s0 needs to find the base addresses of older
frames, and discover where those frames' registers have been saved.
Since a frame's \*(L"callee-saves\*(R" registers get saved by younger frames if
and when they're reused, a frame's registers may be scattered
unpredictably across younger frames.  This means that changing the
value of a register-allocated variable in an older frame may actually
entail writing to a save slot in some younger frame.
.PP
Modern versions of \s-1GCC\s0 emit Dwarf call frame information (\*(L"\s-1CFI\*(R"\s0),
which describes how to find frame base addresses and saved registers.
But \s-1CFI\s0 is not always available, so as a fallback \s-1GDB\s0 uses a technique
called \*(L"prologue analysis\*(R" to find frame sizes and saved registers.  A
prologue analyzer disassembles the function's machine code starting
from its entry point, and looks for instructions that allocate frame
space, save the stack pointer in a frame pointer register, save
registers, and so on.  Obviously, this can't be done accurately in
general, but it's tractable to do well enough to be very helpful.
Prologue analysis predates the \s-1GNU\s0 toolchain's support for \s-1CFI\s0; at one
time, prologue analysis was the only mechanism \s-1GDB\s0 used for stack
unwinding at all, when the function calling conventions didn't specify
a fixed frame layout.
.PP
In the olden days, function prologues were generated by hand-written,
target-specific code in \s-1GCC,\s0 and treated as opaque and untouchable by
optimizers.  Looking at this code, it was usually straightforward to
write a prologue analyzer for \s-1GDB\s0 that would accurately understand all
the prologues \s-1GCC\s0 would generate.  However, over time \s-1GCC\s0 became more
aggressive about instruction scheduling, and began to understand more
about the semantics of the prologue instructions themselves; in
response, \s-1GDB\s0's analyzers became more complex and fragile.  Keeping the
prologue analyzers working as \s-1GCC \s0(and the instruction sets themselves)
evolved became a substantial task.
.PP
To try to address this problem, the code in `\fBprologue\-value.h\fR' and
`\fBprologue\-value.c\fR' provides a general framework for writing prologue
analyzers that are simpler and more robust than ad-hoc analyzers.  When
we analyze a prologue using the prologue-value framework, we're really
doing \*(L"abstract interpretation\*(R" or \*(L"pseudo-evaluation\*(R": running the
function's code in simulation, but using conservative approximations of
the values registers and memory would hold when the code actually runs.
For example, if our function starts with the instruction:
.PP
addi r1, 42     # add 42 to r1
we don't know exactly what value will be in `\fBr1\fR' after executing
this instruction, but we do know it'll be 42 greater than its original
value.
.PP
If we then see an instruction like:
.PP
addi r1, 22     # add 22 to r1
we still don't know what `\fBr1\fR's' value is, but again, we can say it
is now 64 greater than its original value.
.PP
If the next instruction were:
.PP
mov r2, r1      # set r2 to r1's value
then we can say that `\fBr2\fR's' value is now the original value of `\fBr1\fR'
plus 64.
.PP
It's common for prologues to save registers on the stack, so we'll
need to track the values of stack frame slots, as well as the
registers.  So after an instruction like this:
.PP
mov (fp+4), r2
then we'd know that the stack slot four bytes above the frame pointer
holds the original value of `\fBr1\fR' plus 64.
.PP
And so on.
.PP
Of course, this can only go so far before it gets unreasonable.  If
we wanted to be able to say anything about the value of `\fBr1\fR' after the
instruction:
.PP
xor r1, r3      # exclusive-or r1 and r3, place result in r1
then things would get pretty complex.  But remember, we're just doing
a conservative approximation; if exclusive-or instructions aren't
relevant to prologues, we can just say `\fBr1\fR''s value is now \*(L"unknown\*(R".
We can ignore things that are too complex, if that loss of information
is acceptable for our application.
.PP
So when we say \*(L"conservative approximation\*(R" here, what we mean is an
approximation that is either accurate, or marked \*(L"unknown\*(R", but never
inaccurate.
.PP
Using this framework, a prologue analyzer is simply an interpreter
for machine code, but one that uses conservative approximations for the
contents of registers and memory instead of actual values.  Starting
from the function's entry point, you simulate instructions up to the
current \s-1PC,\s0 or an instruction that you don't know how to simulate.  Now
you can examine the state of the registers and stack slots you've kept
track of.
.PP
* To see how large your stack frame is, just check the value of the
stack pointer register; if it's the original value of the \s-1SP\s0 minus
a constant, then that constant is the stack frame's size.  If the
\&\s-1SP\s0's value has been marked as \*(L"unknown\*(R", then that means the
prologue has done something too complex for us to track, and we
don't know the frame size.
.PP
* To see where we've saved the previous frame's registers, we just
search the values we've tracked \*(-- stack slots, usually, but
registers, too, if you want \*(-- for something equal to the
register's original value.  If the calling conventions suggest a
standard place to save a given register, then we can check there
first, but really, anything that will get us back the original
value will probably work.
.PP
This does take some work.  But prologue analyzers aren't
quick-and-simple pattern patching to recognize a few fixed prologue
forms any more; they're big, hairy functions.  Along with inferior
function calls, prologue analysis accounts for a substantial portion of
the time needed to stabilize a \s-1GDB\s0 port.  So it's worthwhile to look
for an approach that will be easier to understand and maintain.  In the
approach described above:
.PP
It's easier to see that the analyzer is correct: see \*(L"you just see\*(R"
.PP
whether the analyzer properly (albeit conservatively) simulates
the effect of each instruction.
.PP
It's easier to extend the analyzer: see \*(L"you can add support for new\*(R"
.PP
instructions, and know that you haven't broken anything that
wasn't already broken before.
.PP
It's orthogonal: see \*(L"to gather new information, you don't need to\*(R"
.PP
complicate the code for each instruction.  As long as your domain
of conservative values is already detailed enough to tell you what
you need, then all the existing instruction simulations are
already gathering the right data for you.
.PP
The file `\fBprologue\-value.h\fR' contains detailed comments explaining
the framework and how to use it.
.PP
3.2 Breakpoint Handling
=======================
.PP
In general, a breakpoint is a user-designated location in the program
where the user wants to regain control if program execution ever reaches
that location.
.PP
There are two main ways to implement breakpoints; either as
\&\*(L"hardware\*(R" breakpoints or as \*(L"software\*(R" breakpoints.
.PP
Hardware breakpoints are sometimes available as a builtin debugging
features with some chips.  Typically these work by having dedicated
register into which the breakpoint address may be stored.  If the \s-1PC
\&\s0(shorthand for \*(L"program counter\*(R") ever matches a value in a breakpoint
registers, the \s-1CPU\s0 raises an exception and reports it to \s-1GDB.\s0
.PP
Another possibility is when an emulator is in use; many emulators
include circuitry that watches the address lines coming out from the
processor, and force it to stop if the address matches a breakpoint's
address.
.PP
A third possibility is that the target already has the ability to do
breakpoints somehow; for instance, a \s-1ROM\s0 monitor may do its own
software breakpoints.  So although these are not literally \*(L"hardware
breakpoints\*(R", from \s-1GDB\s0's point of view they work the same; \s-1GDB\s0 need not
do anything more than set the breakpoint and wait for something to
happen.
.PP
Since they depend on hardware resources, hardware breakpoints may be
limited in number; when the user asks for more, \s-1GDB\s0 will start trying
to set software breakpoints.  (On some architectures, notably the
32\-bit x86 platforms, \s-1GDB\s0 cannot always know whether there's enough
hardware resources to insert all the hardware breakpoints and
watchpoints.  On those platforms, \s-1GDB\s0 prints an error message only when
the program being debugged is continued.)
.PP
Software breakpoints require \s-1GDB\s0 to do somewhat more work.  The
basic theory is that \s-1GDB\s0 will replace a program instruction with a
trap, illegal divide, or some other instruction that will cause an
exception, and then when it's encountered, \s-1GDB\s0 will take the exception
and stop the program.  When the user says to continue, \s-1GDB\s0 will restore
the original instruction, single-step, re-insert the trap, and continue
on.
.PP
Since it literally overwrites the program being tested, the program
area must be writable, so this technique won't work on programs in \s-1ROM.\s0
It can also distort the behavior of programs that examine themselves,
although such a situation would be highly unusual.
.PP
Also, the software breakpoint instruction should be the smallest
size of instruction, so it doesn't overwrite an instruction that might
be a jump target, and cause disaster when the program jumps into the
middle of the breakpoint instruction.  (Strictly speaking, the
breakpoint must be no larger than the smallest interval between
instructions that may be jump targets; perhaps there is an architecture
where only even-numbered instructions may jumped to.)  Note that it's
possible for an instruction set not to have any instructions usable for
a software breakpoint, although in practice only the \s-1ARC\s0 has failed to
define such an instruction.
.PP
Basic breakpoint object handling is in `\fBbreakpoint.c\fR'.  However,
much of the interesting breakpoint action is in `\fBinfrun.c\fR'.
.PP
`\fBtarget_remove_breakpoint (\s-1BP_TGT\s0)\fR'
`\fBtarget_insert_breakpoint (\s-1BP_TGT\s0)\fR'
Insert or remove a software breakpoint at address
`\fB\s-1BP_TGT\-\s0>placed_address\fR'.  Returns zero for success, non-zero for
failure.  On input, \s-1BP_TGT\s0 contains the address of the breakpoint,
and is otherwise initialized to zero.  The fields of the `struct
bp_target_info' pointed to by \s-1BP_TGT\s0 are updated to contain other
information about the breakpoint on output.  The field
`\fBplaced_address\fR' may be updated if the breakpoint was placed at a
related address; the field `\fBshadow_contents\fR' contains the real
contents of the bytes where the breakpoint has been inserted, if
reading memory would return the breakpoint instead of the
underlying memory; the field `\fBshadow_len\fR' is the length of memory
cached in `\fBshadow_contents\fR', if any; and the field `\fBplaced_size\fR'
is optionally set and used by the target, if it could differ from
`\fBshadow_len\fR'.
.PP
For example, the remote target `\fBZ0\fR' packet does not require
shadowing memory, so `\fBshadow_len\fR' is left at zero.  However, the
length reported by `\fBgdbarch_breakpoint_from_pc\fR' is cached in
`\fBplaced_size\fR', so that a matching `\fBz0\fR' packet can be used to
remove the breakpoint.
.PP
`\fBtarget_remove_hw_breakpoint (\s-1BP_TGT\s0)\fR'
`\fBtarget_insert_hw_breakpoint (\s-1BP_TGT\s0)\fR'
Insert or remove a hardware-assisted breakpoint at address
`\fB\s-1BP_TGT\-\s0>placed_address\fR'.  Returns zero for success, non-zero for
failure.  See `\fBtarget_insert_breakpoint\fR' for a description of the
`\fBstruct bp_target_info\fR' pointed to by \s-1BP_TGT\s0; the
`\fBshadow_contents\fR' and `\fBshadow_len\fR' members are not used for
hardware breakpoints, but `\fBplaced_size\fR' may be.
.PP
3.3 Single Stepping
===================
.PP
3.4 Signal Handling
===================
.PP
3.5 Thread Handling
===================
.PP
3.6 Inferior Function Calls
===========================
.PP
3.7 Longjmp Support
===================
.PP
\&\s-1GDB\s0 has support for figuring out that the target is doing a `\fBlongjmp\fR'
and for stopping at the target of the jump, if we are stepping.  This
is done with a few specialized internal breakpoints, which are visible
in the output of the `\fBmaint info breakpoint\fR' command.
.PP
To make this work, you need to define a function called
`\fBgdbarch_get_longjmp_target\fR', which will examine the `\fBjmp_buf\fR'
structure and extract the `\fBlongjmp\fR' target address.  Since `\fBjmp_buf\fR' is
target specific and typically defined in a target header not available
to \s-1GDB,\s0 you will need to determine the offset of the \s-1PC\s0 manually and
return that; many targets define a `\fBjb_pc_offset\fR' field in the tdep
structure to save the value once calculated.
.PP
3.8 Watchpoints
===============
.PP
Watchpoints are a special kind of breakpoints (*note breakpoints:
Algorithms.) which break when data is accessed rather than when some
instruction is executed.  When you have data which changes without your
knowing what code does that, watchpoints are the silver bullet to hunt
down and kill such bugs.
.PP
Watchpoints can be either hardware-assisted or not; the latter type
is known as \*(L"software watchpoints.\*(R"  \s-1GDB\s0 always uses hardware-assisted
watchpoints if they are available, and falls back on software
watchpoints otherwise.  Typical situations where \s-1GDB\s0 will use software
watchpoints are:
.PP
* The watched memory region is too large for the underlying hardware
watchpoint support.  For example, each x86 debug register can
watch up to 4 bytes of memory, so trying to watch data structures
whose size is more than 16 bytes will cause \s-1GDB\s0 to use software
watchpoints.
.PP
* The value of the expression to be watched depends on data held in
registers (as opposed to memory).
.PP
* Too many different watchpoints requested.  (On some architectures,
this situation is impossible to detect until the debugged program
is resumed.)  Note that x86 debug registers are used both for
hardware breakpoints and for watchpoints, so setting too many
hardware breakpoints might cause watchpoint insertion to fail.
.PP
* No hardware-assisted watchpoints provided by the target
implementation.
.PP
Software watchpoints are very slow, since \s-1GDB\s0 needs to single-step
the program being debugged and test the value of the watched
expression(s) after each instruction.  The rest of this section is
mostly irrelevant for software watchpoints.
.PP
When the inferior stops, \s-1GDB\s0 tries to establish, among other
possible reasons, whether it stopped due to a watchpoint being hit.  It
first uses `\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR' to see if any watchpoint was hit.
If not, all watchpoint checking is skipped.
.PP
Then \s-1GDB\s0 calls `\fBtarget_stopped_data_address\fR' exactly once.  This
method returns the address of the watchpoint which triggered, if the
target can determine it.  If the triggered address is available, \s-1GDB\s0
compares the address returned by this method with each watched memory
address in each active watchpoint.  For data-read and data-access
watchpoints, \s-1GDB\s0 announces every watchpoint that watches the triggered
address as being hit.  For this reason, data-read and data-access
watchpoints _require_ that the triggered address be available; if not,
read and access watchpoints will never be considered hit.  For
data-write watchpoints, if the triggered address is available, \s-1GDB\s0
considers only those watchpoints which match that address; otherwise,
\&\s-1GDB\s0 considers all data-write watchpoints.  For each data-write
watchpoint that \s-1GDB\s0 considers, it evaluates the expression whose value
is being watched, and tests whether the watched value has changed.
Watchpoints whose watched values have changed are announced as hit.
.PP
\&\s-1GDB\s0 uses several macros and primitives to support hardware
watchpoints:
.PP
`\fB\s-1TARGET_CAN_USE_HARDWARE_WATCHPOINT \s0(\s-1TYPE, COUNT, OTHER\s0)\fR'
Return the number of hardware watchpoints of type \s-1TYPE\s0 that are
possible to be set.  The value is positive if \s-1COUNT\s0 watchpoints of
this type can be set, zero if setting watchpoints of this type is
not supported, and negative if \s-1COUNT\s0 is more than the maximum
number of watchpoints of type \s-1TYPE\s0 that can be set.  \s-1OTHER\s0 is
non-zero if other types of watchpoints are currently enabled (there
are architectures which cannot set watchpoints of different types
at the same time).
.PP
`\fB\s-1TARGET_REGION_OK_FOR_HW_WATCHPOINT \s0(\s-1ADDR, LEN\s0)\fR'
Return non-zero if hardware watchpoints can be used to watch a
region whose address is \s-1ADDR\s0 and whose length in bytes is \s-1LEN.\s0
.PP
`\fBtarget_insert_watchpoint (\s-1ADDR, LEN, TYPE\s0)\fR'
`\fBtarget_remove_watchpoint (\s-1ADDR, LEN, TYPE\s0)\fR'
Insert or remove a hardware watchpoint starting at \s-1ADDR,\s0 for \s-1LEN\s0
bytes.  \s-1TYPE\s0 is the watchpoint type, one of the possible values of
the enumerated data type `\fBtarget_hw_bp_type\fR', defined by
`\fBbreakpoint.h\fR' as follows:
.PP
enum target_hw_bp_type
{
hw_write   = 0, /* Common (write) \s-1HW\s0 watchpoint */
hw_read    = 1, /* Read    \s-1HW\s0 watchpoint */
hw_access  = 2, /* Access (read or write) \s-1HW\s0 watchpoint */
hw_execute = 3  /* Execute \s-1HW\s0 breakpoint */
};
.PP
These two macros should return 0 for success, non-zero for failure.
.PP
`\fBtarget_stopped_data_address (\s-1ADDR_P\s0)\fR'
If the inferior has some watchpoint that triggered, place the
address associated with the watchpoint at the location pointed to
by \s-1ADDR_P\s0 and return non-zero.  Otherwise, return zero.  This is
required for data-read and data-access watchpoints.  It is not
required for data-write watchpoints, but \s-1GDB\s0 uses it to improve
handling of those also.
.PP
\&\s-1GDB\s0 will only call this method once per watchpoint stop,
immediately after calling `\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR'.  If the
target's watchpoint indication is sticky, i.e., stays set after
resuming, this method should clear it.  For instance, the x86 debug
control register has sticky triggered flags.
.PP
`\fBtarget_watchpoint_addr_within_range (\s-1TARGET, ADDR, START, LENGTH\s0)\fR'
Check whether \s-1ADDR \s0(as returned by `\fBtarget_stopped_data_address\fR')
lies within the hardware-defined watchpoint region described by
\&\s-1START\s0 and \s-1LENGTH. \s0 This only needs to be provided if the
granularity of a watchpoint is greater than one byte, i.e., if the
watchpoint can also trigger on nearby addresses outside of the
watched region.
.PP
`\fB\s-1HAVE_STEPPABLE_WATCHPOINT\s0\fR'
If defined to a non-zero value, it is not necessary to disable a
watchpoint to step over it.  Like
`\fBgdbarch_have_nonsteppable_watchpoint\fR', this is usually set when
watchpoints trigger at the instruction which will perform an
interesting read or write.  It should be set if there is a
temporary disable bit which allows the processor to step over the
interesting instruction without raising the watchpoint exception
again.
.PP
`\fBint gdbarch_have_nonsteppable_watchpoint (\s-1GDBARCH\s0)\fR'
If it returns a non-zero value, \s-1GDB\s0 should disable a watchpoint to
step the inferior over it.  This is usually set when watchpoints
trigger at the instruction which will perform an interesting read
or write.
.PP
`\fB\s-1HAVE_CONTINUABLE_WATCHPOINT\s0\fR'
If defined to a non-zero value, it is possible to continue the
inferior after a watchpoint has been hit.  This is usually set
when watchpoints trigger at the instruction following an
interesting read or write.
.PP
`\fB\s-1STOPPED_BY_WATCHPOINT \s0(\s-1WAIT_STATUS\s0)\fR'
Return non-zero if stopped by a watchpoint.  \s-1WAIT_STATUS\s0 is of the
type `\fBstruct target_waitstatus\fR', defined by `\fBtarget.h\fR'.  Normally,
this macro is defined to invoke the function pointed to by the
`\fBto_stopped_by_watchpoint\fR' member of the structure (of the type
`\fBtarget_ops\fR', defined on `\fBtarget.h\fR') that describes the
target-specific operations; `\fBto_stopped_by_watchpoint\fR' ignores the
\&\s-1WAIT_STATUS\s0 argument.
.PP
\&\s-1GDB\s0 does not require the non-zero value returned by
`\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR' to be 100% correct, so if a target cannot
determine for sure whether the inferior stopped due to a
watchpoint, it could return non-zero \*(L"just in case\*(R".
.PP
3.8.1 Watchpoints and Threads
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
\&\s-1GDB\s0 only supports process-wide watchpoints, which trigger in all
threads.  \s-1GDB\s0 uses the thread \s-1ID\s0 to make watchpoints act as if they
were thread-specific, but it cannot set hardware watchpoints that only
trigger in a specific thread.  Therefore, even if the target supports
threads, per-thread debug registers, and watchpoints which only affect
a single thread, it should set the per-thread debug registers for all
threads to the same value.  On GNU/Linux native targets, this is
accomplished by using `\fB\s-1ALL_LWPS\s0\fR' in `\fBtarget_insert_watchpoint\fR' and
`\fBtarget_remove_watchpoint\fR' and by using `\fBlinux_set_new_thread\fR' to
register a handler for newly created threads.
.PP
\&\s-1GDB\s0's GNU/Linux support only reports a single event at a time,
although multiple events can trigger simultaneously for multi-threaded
programs.  When multiple events occur, `\fBlinux\-nat.c\fR' queues subsequent
events and returns them the next time the program is resumed.  This
means that `\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR' and `\fBtarget_stopped_data_address\fR'
only need to consult the current thread's state\*(--the thread indicated
by `\fBinferior_ptid\fR'.  If two threads have hit watchpoints
simultaneously, those routines will be called a second time for the
second thread.
.PP
3.8.2 x86 Watchpoints
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The 32\-bit Intel x86 (a.k.a. ia32) processors feature special debug
registers designed to facilitate debugging.  \s-1GDB\s0 provides a generic
library of functions that x86\-based ports can use to implement support
for watchpoints and hardware-assisted breakpoints.  This subsection
documents the x86 watchpoint facilities in \s-1GDB.\s0
.PP
(At present, the library functions read and write debug registers
directly, and are thus only available for native configurations.)
.PP
To use the generic x86 watchpoint support, a port should do the
following:
.PP
* Define the macro `\fBI386_USE_GENERIC_WATCHPOINTS\fR' somewhere in the
target-dependent headers.
.PP
* Include the `\fBconfig/i386/nm\-i386.h\fR' header file _after_ defining
`\fBI386_USE_GENERIC_WATCHPOINTS\fR'.
.PP
* Add `\fBi386\-nat.o\fR' to the value of the Make variable `\fB\s-1NATDEPFILES\s0\fR'
(*note \s-1NATDEPFILES:\s0 Native Debugging.).
.PP
* Provide implementations for the `\fBI386_DR_LOW_*\fR' macros described
below.  Typically, each macro should call a target-specific
function which does the real work.
.PP
The x86 watchpoint support works by maintaining mirror images of the
debug registers.  Values are copied between the mirror images and the
real debug registers via a set of macros which each target needs to
provide:
.PP
`\fBI386_DR_LOW_SET_CONTROL (\s-1VAL\s0)\fR'
Set the Debug Control (\s-1DR7\s0) register to the value \s-1VAL.\s0
.PP
`\fBI386_DR_LOW_SET_ADDR (\s-1IDX, ADDR\s0)\fR'
Put the address \s-1ADDR\s0 into the debug register number \s-1IDX.\s0
.PP
`\fBI386_DR_LOW_RESET_ADDR (\s-1IDX\s0)\fR'
Reset (i.e. zero out) the address stored in the debug register
number \s-1IDX.\s0
.PP
`\fBI386_DR_LOW_GET_STATUS\fR'
Return the value of the Debug Status (\s-1DR6\s0) register.  This value is
used immediately after it is returned by `\fBI386_DR_LOW_GET_STATUS\fR',
so as to support per-thread status register values.
.PP
For each one of the 4 debug registers (whose indices are from 0 to 3)
that store addresses, a reference count is maintained by \s-1GDB,\s0 to allow
sharing of debug registers by several watchpoints.  This allows users
to define several watchpoints that watch the same expression, but with
different conditions and/or commands, without wasting debug registers
which are in short supply.  \s-1GDB\s0 maintains the reference counts
internally, targets don't have to do anything to use this feature.
.PP
The x86 debug registers can each watch a region that is 1, 2, or 4
bytes long.  The ia32 architecture requires that each watched region be
appropriately aligned: 2\-byte region on 2\-byte boundary, 4\-byte region
on 4\-byte boundary.  However, the x86 watchpoint support in \s-1GDB\s0 can
watch unaligned regions and regions larger than 4 bytes (up to 16
bytes) by allocating several debug registers to watch a single region.
This allocation of several registers per a watched region is also done
automatically without target code intervention.
.PP
The generic x86 watchpoint support provides the following \s-1API\s0 for the
\&\s-1GDB\s0's application code:
.PP
`\fBi386_region_ok_for_watchpoint (\s-1ADDR, LEN\s0)\fR'
The macro `\fB\s-1TARGET_REGION_OK_FOR_HW_WATCHPOINT\s0\fR' is set to call this
function.  It counts the number of debug registers required to
watch a given region, and returns a non-zero value if that number
is less than 4, the number of debug registers available to x86
processors.
.PP
`\fBi386_stopped_data_address (\s-1ADDR_P\s0)\fR'
The target function `\fBtarget_stopped_data_address\fR' is set to call
this function.  This function examines the breakpoint condition
bits in the \s-1DR6\s0 Debug Status register, as returned by the
`\fBI386_DR_LOW_GET_STATUS\fR' macro, and returns the address associated
with the first bit that is set in \s-1DR6.\s0
.PP
`\fBi386_stopped_by_watchpoint (void)\fR'
The macro `\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR' is set to call this function.
The argument passed to `\fB\s-1STOPPED_BY_WATCHPOINT\s0\fR' is ignored.  This
function examines the breakpoint condition bits in the \s-1DR6\s0 Debug
Status register, as returned by the `\fBI386_DR_LOW_GET_STATUS\fR'
macro, and returns true if any bit is set.  Otherwise, false is
returned.
.PP
`\fBi386_insert_watchpoint (\s-1ADDR, LEN, TYPE\s0)\fR'
`\fBi386_remove_watchpoint (\s-1ADDR, LEN, TYPE\s0)\fR'
Insert or remove a watchpoint.  The macros
`\fBtarget_insert_watchpoint\fR' and `\fBtarget_remove_watchpoint\fR' are set
to call these functions.  `\fBi386_insert_watchpoint\fR' first looks for
a debug register which is already set to watch the same region for
the same access types; if found, it just increments the reference
count of that debug register, thus implementing debug register
sharing between watchpoints.  If no such register is found, the
function looks for a vacant debug register, sets its mirrored
value to \s-1ADDR,\s0 sets the mirrored value of \s-1DR7\s0 Debug Control
register as appropriate for the \s-1LEN\s0 and \s-1TYPE\s0 parameters, and then
passes the new values of the debug register and \s-1DR7\s0 to the
inferior by calling `\fBI386_DR_LOW_SET_ADDR\fR' and
`\fBI386_DR_LOW_SET_CONTROL\fR'.  If more than one debug register is
required to cover the given region, the above process is repeated
for each debug register.
.PP
`\fBi386_remove_watchpoint\fR' does the opposite: it resets the address
in the mirrored value of the debug register and its read/write and
length bits in the mirrored value of \s-1DR7,\s0 then passes these new
values to the inferior via `\fBI386_DR_LOW_RESET_ADDR\fR' and
`\fBI386_DR_LOW_SET_CONTROL\fR'.  If a register is shared by several
watchpoints, each time a `\fBi386_remove_watchpoint\fR' is called, it
decrements the reference count, and only calls
`\fBI386_DR_LOW_RESET_ADDR\fR' and `\fBI386_DR_LOW_SET_CONTROL\fR' when the
count goes to zero.
.PP
`\fBi386_insert_hw_breakpoint (\s-1BP_TGT\s0)\fR'
`\fBi386_remove_hw_breakpoint (\s-1BP_TGT\s0)\fR'
These functions insert and remove hardware-assisted breakpoints.
The macros `\fBtarget_insert_hw_breakpoint\fR' and
`\fBtarget_remove_hw_breakpoint\fR' are set to call these functions.
The argument is a `\fBstruct bp_target_info *\fR', as described in the
documentation for `\fBtarget_insert_breakpoint\fR'.  These functions
work like `\fBi386_insert_watchpoint\fR' and `\fBi386_remove_watchpoint\fR',
respectively, except that they set up the debug registers to watch
instruction execution, and each hardware-assisted breakpoint
always requires exactly one debug register.
.PP
`\fBi386_cleanup_dregs (void)\fR'
This function clears all the reference counts, addresses, and
control bits in the mirror images of the debug registers.  It
doesn't affect the actual debug registers in the inferior process.
.PP
*Notes:*
1. x86 processors support setting watchpoints on I/O reads or writes.
However, since no target supports this (as of March 2001), and
since `\fBenum target_hw_bp_type\fR' doesn't even have an enumeration
for I/O watchpoints, this feature is not yet available to \s-1GDB\s0
running on x86.
.PP
2. x86 processors can enable watchpoints locally, for the current task
only, or globally, for all the tasks.  For each debug register,
there's a bit in the \s-1DR7\s0 Debug Control register that determines
whether the associated address is watched locally or globally.  The
current implementation of x86 watchpoint support in \s-1GDB\s0 always
sets watchpoints to be locally enabled, since global watchpoints
might interfere with the underlying \s-1OS\s0 and are probably
unavailable in many platforms.
.PP
3.9 Checkpoints
===============
.PP
In the abstract, a checkpoint is a point in the execution history of
the program, which the user may wish to return to at some later time.
.PP
Internally, a checkpoint is a saved copy of the program state,
including whatever information is required in order to restore the
program to that state at a later time.  This can be expected to include
the state of registers and memory, and may include external state such
as the state of open files and devices.
.PP
There are a number of ways in which checkpoints may be implemented
in gdb, e.g. as corefiles, as forked processes, and as some opaque
method implemented on the target side.
.PP
A corefile can be used to save an image of target memory and register
state, which can in principle be restored later \*(-- but corefiles do not
typically include information about external entities such as open
files.  Currently this method is not implemented in gdb.
.PP
A forked process can save the state of user memory and registers, as
well as some subset of external (kernel) state.  This method is used to
implement checkpoints on Linux, and in principle might be used on other
systems.
.PP
Some targets, e.g. simulators, might have their own built-in method
for saving checkpoints, and gdb might be able to take advantage of that
capability without necessarily knowing any details of how it is done.
.PP
3.10 Observing changes in \s-1GDB\s0 internals
=======================================
.PP
In order to function properly, several modules need to be notified when
some changes occur in the \s-1GDB\s0 internals.  Traditionally, these modules
have relied on several paradigms, the most common ones being hooks and
gdb-events.  Unfortunately, none of these paradigms was versatile
enough to become the standard notification mechanism in \s-1GDB. \s0 The fact
that they only supported one \*(L"client\*(R" was also a strong limitation.
.PP
A new paradigm, based on the Observer pattern of the `Design
Patterns' book, has therefore been implemented.  The goal was to provide
a new interface overcoming the issues with the notification mechanisms
previously available.  This new interface needed to be strongly typed,
easy to extend, and versatile enough to be used as the standard
interface when adding new notifications.
.PP
See see \*(L"\s-1GDB\s0 Observers\*(R" for a brief description of the observers
currently implemented in \s-1GDB.\s0 The rationale for the current
implementation is also briefly discussed.
.SS "4 User Interface"
.IX Subsection "4 User Interface"
\&\s-1GDB\s0 has several user interfaces, of which the traditional command-line
interface is perhaps the most familiar.
.PP
4.1 Command Interpreter
=======================
.PP
The command interpreter in \s-1GDB\s0 is fairly simple.  It is designed to
allow for the set of commands to be augmented dynamically, and also has
a recursive subcommand capability, where the first argument to a
command may itself direct a lookup on a different command list.
.PP
For instance, the `\fBset\fR' command just starts a lookup on the
`\fBsetlist\fR' command list, while `\fBset thread\fR' recurses to the
`\fBset_thread_cmd_list\fR'.
.PP
To add commands in general, use `\fBadd_cmd\fR'.  `\fBadd_com\fR' adds to the
main command list, and should be used for those commands.  The usual
place to add commands is in the `\fB_initialize_XYZ\fR' routines at the ends
of most source files.
.PP
To add paired `\fBset\fR' and `\fBshow\fR' commands, use `\fBadd_setshow_cmd\fR' or
`\fBadd_setshow_cmd_full\fR'.  The former is a slightly simpler interface
which is useful when you don't need to further modify the new command
structures, while the latter returns the new command structures for
manipulation.
.PP
Before removing commands from the command set it is a good idea to
deprecate them for some time.  Use `\fBdeprecate_cmd\fR' on commands or
aliases to set the deprecated flag.  `\fBdeprecate_cmd\fR' takes a `struct
cmd_list_element' as it's first argument.  You can use the return value
from `\fBadd_com\fR' or `\fBadd_cmd\fR' to deprecate the command immediately after
it is created.
.PP
The first time a command is used the user will be warned and offered
a replacement (if one exists). Note that the replacement string passed
to `\fBdeprecate_cmd\fR' should be the full name of the command, i.e., the
entire string the user should type at the command line.
.PP
4.2 UI-Independent Output\*(--the `\fBui_out\fR' Functions
=================================================
.PP
The `\fBui_out\fR' functions present an abstraction level for the \s-1GDB\s0 output
code.  They hide the specifics of different user interfaces supported
by \s-1GDB,\s0 and thus free the programmer from the need to write several
versions of the same code, one each for every \s-1UI,\s0 to produce output.
.PP
4.2.1 Overview and Terminology
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
In general, execution of each \s-1GDB\s0 command produces some sort of output,
and can even generate an input request.
.PP
Output can be generated for the following purposes:
.PP
* to display a _result_ of an operation;
.PP
* to convey _info_ or produce side-effects of a requested operation;
.PP
* to provide a _notification_ of an asynchronous event (including
progress indication of a prolonged asynchronous operation);
.PP
* to display _error messages_ (including warnings);
.PP
* to show _debug data_;
.PP
* to _query_ or prompt a user for input (a special case).
.PP
This section mainly concentrates on how to build result output,
although some of it also applies to other kinds of output.
.PP
Generation of output that displays the results of an operation
involves one or more of the following:
.PP
* output of the actual data
.PP
* formatting the output as appropriate for console output, to make it
easily readable by humans
.PP
* machine oriented formatting-a more terse formatting to allow for
easy parsing by programs which read \s-1GDB\s0's output
.PP
* annotation, whose purpose is to help legacy GUIs to identify
interesting parts in the output
.PP
The `\fBui_out\fR' routines take care of the first three aspects.
Annotations are provided by separate annotation routines.  Note that use
of annotations for an interface between a \s-1GUI\s0 and \s-1GDB\s0 is deprecated.
.PP
Output can be in the form of a single item, which we call a \*(L"field\*(R";
a \*(L"list\*(R" consisting of identical fields; a \*(L"tuple\*(R" consisting of
non-identical fields; or a \*(L"table\*(R", which is a tuple consisting of a
header and a body.  In a BNF-like form:
.PP
`\fB<table> ==>\fR'
`\fB<header> <body>\fR'
.PP
`\fB<header> ==>\fR'
`\fB{ <column> }\fR'
.PP
`\fB<column> ==>\fR'
`\fB<width> <alignment> <title>\fR'
.PP
`\fB<body> ==>\fR'
`\fB{<row>}\fR'
.PP
4.2.2 General Conventions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Most `\fBui_out\fR' routines are of type `\fBvoid\fR', the exceptions are
`\fBui_out_stream_new\fR' (which returns a pointer to the newly created
object) and the `\fBmake_cleanup\fR' routines.
.PP
The first parameter is always the `\fBui_out\fR' vector object, a pointer
to a `\fBstruct ui_out\fR'.
.PP
The \s-1FORMAT\s0 parameter is like in `\fBprintf\fR' family of functions.  When
it is present, there must also be a variable list of arguments
sufficient used to satisfy the `\fB%\fR' specifiers in the supplied format.
.PP
When a character string argument is not used in a `\fBui_out\fR' function
call, a `\fB\s-1NULL\s0\fR' pointer has to be supplied instead.
.PP
4.2.3 Table, Tuple and List Functions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
This section introduces `\fBui_out\fR' routines for building lists, tuples
and tables.  The routines to output the actual data items (fields) are
presented in the next section.
.PP
To recap: A \*(L"tuple\*(R" is a sequence of \*(L"fields\*(R", each field containing
information about an object; a \*(L"list\*(R" is a sequence of fields where
each field describes an identical object.
.PP
Use the \*(L"table\*(R" functions when your output consists of a list of
rows (tuples) and the console output should include a heading.  Use this
even when you are listing just one object but you still want the header.
.PP
Tables can not be nested.  Tuples and lists can be nested up to a
maximum of five levels.
.PP
The overall structure of the table output code is something like
this:
.PP
ui_out_table_begin
ui_out_table_header
\&...
ui_out_table_body
ui_out_tuple_begin
ui_out_field_*
\&...
ui_out_tuple_end
\&...
ui_out_table_end
.PP
Here is the description of table\-, tuple\- and list-related `\fBui_out\fR'
functions:
.PP
\&\-\- Function: void ui_out_table_begin (struct ui_out *UIOUT, int
\&\s-1NBROFCOLS,\s0 int \s-1NR_ROWS,\s0 const char *TBLID)
The function `\fBui_out_table_begin\fR' marks the beginning of the output
of a table.  It should always be called before any other `\fBui_out\fR'
function for a given table.  \s-1NBROFCOLS\s0 is the number of columns in
the table. \s-1NR_ROWS\s0 is the number of rows in the table.  \s-1TBLID\s0 is
an optional string identifying the table.  The string pointed to
by \s-1TBLID\s0 is copied by the implementation of `\fBui_out_table_begin\fR',
so the application can free the string if it was `\fBmalloc\fR'ed.
.PP
The companion function `\fBui_out_table_end\fR', described below, marks
the end of the table's output.
.PP
\&\-\- Function: void ui_out_table_header (struct ui_out *UIOUT, int
\&\s-1WIDTH,\s0 enum ui_align \s-1ALIGNMENT,\s0 const char *COLHDR)
`\fBui_out_table_header\fR' provides the header information for a single
table column.  You call this function several times, one each for
every column of the table, after `\fBui_out_table_begin\fR', but before
`\fBui_out_table_body\fR'.
.PP
The value of \s-1WIDTH\s0 gives the column width in characters.  The
value of \s-1ALIGNMENT\s0 is one of `\fBleft\fR', `\fBcenter\fR', and `\fBright\fR', and it
specifies how to align the header: left-justify, center, or
right-justify it.  \s-1COLHDR\s0 points to a string that specifies the
column header; the implementation copies that string, so column
header strings in `\fBmalloc\fR'ed storage can be freed after the call.
.PP
\&\-\- Function: void ui_out_table_body (struct ui_out *UIOUT)
This function delimits the table header from the table body.
.PP
\&\-\- Function: void ui_out_table_end (struct ui_out *UIOUT)
This function signals the end of a table's output.  It should be
called after the table body has been produced by the list and
field output functions.
.PP
There should be exactly one call to `\fBui_out_table_end\fR' for each
call to `\fBui_out_table_begin\fR', otherwise the `\fBui_out\fR' functions
will signal an internal error.
.PP
The output of the tuples that represent the table rows must follow
the call to `\fBui_out_table_body\fR' and precede the call to
`\fBui_out_table_end\fR'.  You build a tuple by calling `\fBui_out_tuple_begin\fR'
and `\fBui_out_tuple_end\fR', with suitable calls to functions which actually
output fields between them.
.PP
\&\-\- Function: void ui_out_tuple_begin (struct ui_out *UIOUT, const char
*ID)
This function marks the beginning of a tuple output.  \s-1ID\s0 points to
an optional string that identifies the tuple; it is copied by the
implementation, and so strings in `\fBmalloc\fR'ed storage can be freed
after the call.
.PP
\&\-\- Function: void ui_out_tuple_end (struct ui_out *UIOUT)
This function signals an end of a tuple output.  There should be
exactly one call to `\fBui_out_tuple_end\fR' for each call to
`\fBui_out_tuple_begin\fR', otherwise an internal \s-1GDB\s0 error will be
signaled.
.PP
\&\-\- Function: struct cleanup * make_cleanup_ui_out_tuple_begin_end
(struct ui_out *UIOUT, const char *ID)
This function first opens the tuple and then establishes a cleanup
(*note Cleanups: Misc Guidelines.) to close the tuple.  It
provides a convenient and correct implementation of the
\&\fInon\-portable\fR\|(1) code sequence:
struct cleanup *old_cleanup;
ui_out_tuple_begin (uiout, \*(L"...\*(R");
old_cleanup = make_cleanup ((void(*)(void *)) ui_out_tuple_end,
uiout);
.PP
\&\-\- Function: void ui_out_list_begin (struct ui_out *UIOUT, const char
*ID)
This function marks the beginning of a list output.  \s-1ID\s0 points to
an optional string that identifies the list; it is copied by the
implementation, and so strings in `\fBmalloc\fR'ed storage can be freed
after the call.
.PP
\&\-\- Function: void ui_out_list_end (struct ui_out *UIOUT)
This function signals an end of a list output.  There should be
exactly one call to `\fBui_out_list_end\fR' for each call to
`\fBui_out_list_begin\fR', otherwise an internal \s-1GDB\s0 error will be
signaled.
.PP
\&\-\- Function: struct cleanup * make_cleanup_ui_out_list_begin_end
(struct ui_out *UIOUT, const char *ID)
Similar to `\fBmake_cleanup_ui_out_tuple_begin_end\fR', this function
opens a list and then establishes cleanup (*note Cleanups: Misc
Guidelines.)  that will close the list.
.PP
4.2.4 Item Output Functions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The functions described below produce output for the actual data items,
or fields, which contain information about the object.
.PP
Choose the appropriate function accordingly to your particular needs.
.PP
\&\-\- Function: void ui_out_field_fmt (struct ui_out *UIOUT, char
*FLDNAME, char *FORMAT, ...)
This is the most general output function.  It produces the
representation of the data in the variable-length argument list
according to formatting specifications in \s-1FORMAT,\s0 a `\fBprintf\fR'\-like
format string.  The optional argument \s-1FLDNAME\s0 supplies the name of
the field.  The data items themselves are supplied as additional
arguments after \s-1FORMAT.\s0
.PP
This generic function should be used only when it is not possible
to use one of the specialized versions (see below).
.PP
\&\-\- Function: void ui_out_field_int (struct ui_out *UIOUT, const char
*FLDNAME, int \s-1VALUE\s0)
This function outputs a value of an `\fBint\fR' variable.  It uses the
`\fB\*(L"%d\*(R"\fR' output conversion specification.  \s-1FLDNAME\s0 specifies the
name of the field.
.PP
\&\-\- Function: void ui_out_field_fmt_int (struct ui_out *UIOUT, int
\&\s-1WIDTH,\s0 enum ui_align \s-1ALIGNMENT,\s0 const char *FLDNAME, int
\&\s-1VALUE\s0)
This function outputs a value of an `\fBint\fR' variable.  It differs
from `\fBui_out_field_int\fR' in that the caller specifies the desired
\&\s-1WIDTH\s0 and \s-1ALIGNMENT\s0 of the output.  \s-1FLDNAME\s0 specifies the name of
the field.
.PP
\&\-\- Function: void ui_out_field_core_addr (struct ui_out *UIOUT, const
char *FLDNAME, struct gdbarch *GDBARCH, \s-1CORE_ADDR ADDRESS\s0)
This function outputs an address as appropriate for \s-1GDBARCH.\s0
.PP
\&\-\- Function: void ui_out_field_string (struct ui_out *UIOUT, const
char *FLDNAME, const char *STRING)
This function outputs a string using the `\fB\*(L"%s\*(R"\fR' conversion
specification.
.PP
Sometimes, there's a need to compose your output piece by piece using
functions that operate on a stream, such as `\fBvalue_print\fR' or
`\fBfprintf_symbol_filtered\fR'.  These functions accept an argument of the
type `\fBstruct ui_file *\fR', a pointer to a `\fBui_file\fR' object used to store
the data stream used for the output.  When you use one of these
functions, you need a way to pass their results stored in a `\fBui_file\fR'
object to the `\fBui_out\fR' functions.  To this end, you first create a
`\fBui_stream\fR' object by calling `\fBui_out_stream_new\fR', pass the `\fBstream\fR'
member of that `\fBui_stream\fR' object to `\fBvalue_print\fR' and similar
functions, and finally call `\fBui_out_field_stream\fR' to output the field
you constructed.  When the `\fBui_stream\fR' object is no longer needed, you
should destroy it and free its memory by calling `\fBui_out_stream_delete\fR'.
.PP
\&\-\- Function: struct ui_stream * ui_out_stream_new (struct ui_out
*UIOUT)
This function creates a new `\fBui_stream\fR' object which uses the same
output methods as the `\fBui_out\fR' object whose pointer is passed in
\&\s-1UIOUT. \s0 It returns a pointer to the newly created `\fBui_stream\fR'
object.
.PP
\&\-\- Function: void ui_out_stream_delete (struct ui_stream *STREAMBUF)
This functions destroys a `\fBui_stream\fR' object specified by
\&\s-1STREAMBUF.\s0
.PP
\&\-\- Function: void ui_out_field_stream (struct ui_out *UIOUT, const
char *FIELDNAME, struct ui_stream *STREAMBUF)
This function consumes all the data accumulated in
`\fBstreambuf\->stream\fR' and outputs it like `\fBui_out_field_string\fR'
does.  After a call to `\fBui_out_field_stream\fR', the accumulated data
no longer exists, but the stream is still valid and may be used
for producing more fields.
.PP
*Important:* If there is any chance that your code could bail out
before completing output generation and reaching the point where
`\fBui_out_stream_delete\fR' is called, it is necessary to set up a cleanup,
to avoid leaking memory and other resources.  Here's a skeleton code to
do that:
.PP
struct ui_stream *mybuf = ui_out_stream_new (uiout);
struct cleanup *old = make_cleanup (ui_out_stream_delete, mybuf);
\&...
do_cleanups (old);
.PP
If the function already has the old cleanup chain set (for other
kinds of cleanups), you just have to add your cleanup to it:
.PP
mybuf = ui_out_stream_new (uiout);
make_cleanup (ui_out_stream_delete, mybuf);
.PP
Note that with cleanups in place, you should not call
`\fBui_out_stream_delete\fR' directly, or you would attempt to free the same
buffer twice.
.PP
4.2.5 Utility Output Functions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
\&\-\- Function: void ui_out_field_skip (struct ui_out *UIOUT, const char
*FLDNAME)
This function skips a field in a table.  Use it if you have to
leave an empty field without disrupting the table alignment.  The
argument \s-1FLDNAME\s0 specifies a name for the (missing) filed.
.PP
\&\-\- Function: void ui_out_text (struct ui_out *UIOUT, const char
*STRING)
This function outputs the text in \s-1STRING\s0 in a way that makes it
easy to be read by humans.  For example, the console
implementation of this method filters the text through a built-in
pager, to prevent it from scrolling off the visible portion of the
screen.
.PP
Use this function for printing relatively long chunks of text
around the actual field data: the text it produces is not aligned
according to the table's format.  Use `\fBui_out_field_string\fR' to
output a string field, and use `\fBui_out_message\fR', described below,
to output short messages.
.PP
\&\-\- Function: void ui_out_spaces (struct ui_out *UIOUT, int \s-1NSPACES\s0)
This function outputs \s-1NSPACES\s0 spaces.  It is handy to align the
text produced by `\fBui_out_text\fR' with the rest of the table or list.
.PP
\&\-\- Function: void ui_out_message (struct ui_out *UIOUT, int \s-1VERBOSITY,\s0
const char *FORMAT, ...)
This function produces a formatted message, provided that the
current verbosity level is at least as large as given by
\&\s-1VERBOSITY. \s0 The current verbosity level is specified by the user
with the `\fBset verbositylevel\fR' \fIcommand.\fR\|(2)
.PP
\&\-\- Function: void ui_out_wrap_hint (struct ui_out *UIOUT, char *INDENT)
This function gives the console output filter (a paging filter) a
hint of where to break lines which are too long.  Ignored for all
other output consumers.  \s-1INDENT,\s0 if non\-`\fB\s-1NULL\s0\fR', is the string to
be printed to indent the wrapped text on the next line; it must
remain accessible until the next call to `\fBui_out_wrap_hint\fR', or
until an explicit newline is produced by one of the other
functions.  If \s-1INDENT\s0 is `\fB\s-1NULL\s0\fR', the wrapped text will not be
indented.
.PP
\&\-\- Function: void ui_out_flush (struct ui_out *UIOUT)
This function flushes whatever output has been accumulated so far,
if the \s-1UI\s0 buffers output.
.PP
4.2.6 Examples of Use of `\fBui_out\fR' functions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
This section gives some practical examples of using the `\fBui_out\fR'
functions to generalize the old console-oriented code in \s-1GDB. \s0 The
examples all come from functions defined on the `\fBbreakpoints.c\fR' file.
.PP
This example, from the `\fBbreakpoint_1\fR' function, shows how to produce
a table.
.PP
The original code was:
.PP
if (!found_a_breakpoint++)
{
annotate_breakpoints_headers ();
.PP
annotate_field (0);
printf_filtered (\*(L"Num \*(R");
annotate_field (1);
printf_filtered (\*(L"Type           \*(R");
annotate_field (2);
printf_filtered (\*(L"Disp \*(R");
annotate_field (3);
printf_filtered (\*(L"Enb \*(R");
if (addressprint)
{
annotate_field (4);
printf_filtered (\*(L"Address    \*(R");
}
annotate_field (5);
printf_filtered (\*(L"What\en\*(R");
.PP
annotate_breakpoints_table ();
}
.PP
Here's the new version:
.PP
nr_printable_breakpoints = ...;
.PP
if (addressprint)
ui_out_table_begin (ui, 6, nr_printable_breakpoints, \*(L"BreakpointTable\*(R");
else
ui_out_table_begin (ui, 5, nr_printable_breakpoints, \*(L"BreakpointTable\*(R");
.PP
if (nr_printable_breakpoints > 0)
annotate_breakpoints_headers ();
if (nr_printable_breakpoints > 0)
annotate_field (0);
ui_out_table_header (uiout, 3, ui_left, \*(L"number\*(R", \*(L"Num\*(R");                /* 1 */
if (nr_printable_breakpoints > 0)
annotate_field (1);
ui_out_table_header (uiout, 14, ui_left, \*(L"type\*(R", \*(L"Type\*(R");                /* 2 */
if (nr_printable_breakpoints > 0)
annotate_field (2);
ui_out_table_header (uiout, 4, ui_left, \*(L"disp\*(R", \*(L"Disp\*(R");         /* 3 */
if (nr_printable_breakpoints > 0)
annotate_field (3);
ui_out_table_header (uiout, 3, ui_left, \*(L"enabled\*(R", \*(L"Enb\*(R");       /* 4 */
if (addressprint)
{
if (nr_printable_breakpoints > 0)
annotate_field (4);
if (print_address_bits <= 32)
ui_out_table_header (uiout, 10, ui_left, \*(L"addr\*(R", \*(L"Address\*(R");/* 5 */
else
ui_out_table_header (uiout, 18, ui_left, \*(L"addr\*(R", \*(L"Address\*(R");/* 5 */
}
if (nr_printable_breakpoints > 0)
annotate_field (5);
ui_out_table_header (uiout, 40, ui_noalign, \*(L"what\*(R", \*(L"What\*(R");     /* 6 */
ui_out_table_body (uiout);
if (nr_printable_breakpoints > 0)
annotate_breakpoints_table ();
.PP
This example, from the `\fBprint_one_breakpoint\fR' function, shows how to
produce the actual data for the table whose structure was defined in
the above example.  The original code was:
.PP
annotate_record ();
annotate_field (0);
printf_filtered (\*(L"%\-3d \*(R", b\->number);
annotate_field (1);
if ((int)b\->type > (sizeof(bptypes)/sizeof(bptypes[0]))
|| ((int) b\->type != bptypes[(int) b\->type].type))
internal_error (\*(L"bptypes table does not describe type #%d.\*(R",
(int)b\->type);
printf_filtered (\*(L"%\-14s \*(R", bptypes[(int)b\->type].description);
annotate_field (2);
printf_filtered (\*(L"%\-4s \*(R", bpdisps[(int)b\->disposition]);
annotate_field (3);
printf_filtered (\*(L"%\-3c \*(R", bpenables[(int)b\->enable]);
\&...
.PP
This is the new version:
.PP
annotate_record ();
ui_out_tuple_begin (uiout, \*(L"bkpt\*(R");
annotate_field (0);
ui_out_field_int (uiout, \*(L"number\*(R", b\->number);
annotate_field (1);
if (((int) b\->type > (sizeof (bptypes) / sizeof (bptypes[0])))
|| ((int) b\->type != bptypes[(int) b\->type].type))
internal_error (\*(L"bptypes table does not describe type #%d.\*(R",
(int) b\->type);
ui_out_field_string (uiout, \*(L"type\*(R", bptypes[(int)b\->type].description);
annotate_field (2);
ui_out_field_string (uiout, \*(L"disp\*(R", bpdisps[(int)b\->disposition]);
annotate_field (3);
ui_out_field_fmt (uiout, \*(L"enabled\*(R", \*(L"%c\*(R", bpenables[(int)b\->enable]);
\&...
.PP
This example, also from `\fBprint_one_breakpoint\fR', shows how to produce
a complicated output field using the `\fBprint_expression\fR' functions which
requires a stream to be passed.  It also shows how to automate stream
destruction with cleanups.  The original code was:
.PP
annotate_field (5);
print_expression (b\->exp, gdb_stdout);
.PP
The new version is:
.PP
struct ui_stream *stb = ui_out_stream_new (uiout);
struct cleanup *old_chain = make_cleanup_ui_out_stream_delete (stb);
\&...
annotate_field (5);
print_expression (b\->exp, stb\->stream);
ui_out_field_stream (uiout, \*(L"what\*(R", local_stream);
.PP
This example, also from `\fBprint_one_breakpoint\fR', shows how to use
`\fBui_out_text\fR' and `\fBui_out_field_string\fR'.  The original code was:
.PP
annotate_field (5);
if (b\->dll_pathname == \s-1NULL\s0)
printf_filtered (\*(L"<any library> \*(R");
else
printf_filtered (\*(L"library \e\*(R"%s\e\*(L" \*(R", b\->dll_pathname);
.PP
It became:
.PP
annotate_field (5);
if (b\->dll_pathname == \s-1NULL\s0)
{
ui_out_field_string (uiout, \*(L"what\*(R", \*(L"<any library>\*(R");
ui_out_spaces (uiout, 1);
}
else
{
ui_out_text (uiout, \*(L"library \e\*(R"\*(L");
ui_out_field_string (uiout, \*(R"what\*(L", b\->dll_pathname);
ui_out_text (uiout, \*(R"\e\*(L" \*(R");
}
.PP
The following example from `\fBprint_one_breakpoint\fR' shows how to use
`\fBui_out_field_int\fR' and `\fBui_out_spaces\fR'.  The original code was:
.PP
annotate_field (5);
if (b\->forked_inferior_pid != 0)
printf_filtered (\*(L"process \f(CW%d\fR \*(R", b\->forked_inferior_pid);
.PP
It became:
.PP
annotate_field (5);
if (b\->forked_inferior_pid != 0)
{
ui_out_text (uiout, \*(L"process \*(R");
ui_out_field_int (uiout, \*(L"what\*(R", b\->forked_inferior_pid);
ui_out_spaces (uiout, 1);
}
.PP
Here's an example of using `\fBui_out_field_string\fR'.  The original code
was:
.PP
annotate_field (5);
if (b\->exec_pathname != \s-1NULL\s0)
printf_filtered (\*(L"program \e\*(R"%s\e\*(L" \*(R", b\->exec_pathname);
.PP
It became:
.PP
annotate_field (5);
if (b\->exec_pathname != \s-1NULL\s0)
{
ui_out_text (uiout, \*(L"program \e\*(R"\*(L");
ui_out_field_string (uiout, \*(R"what\*(L", b\->exec_pathname);
ui_out_text (uiout, \*(R"\e\*(L" \*(R");
}
.PP
Finally, here's an example of printing an address.  The original
code:
.PP
annotate_field (4);
printf_filtered (\*(L"%s \*(R",
hex_string_custom ((unsigned long) b\->address, 8));
.PP
It became:
.PP
annotate_field (4);
ui_out_field_core_addr (uiout, \*(L"Address\*(R", b\->address);
.PP
4.3 Console Printing
====================
.PP
4.4 \s-1TUI\s0
=======
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) The function cast is not portable \s-1ISO C.\s0
.PP
(2) As of this writing (April 2001), setting verbosity level is not
yet implemented, and is always returned as zero.  So calling
`\fBui_out_message\fR' with a \s-1VERBOSITY\s0 argument more than zero will cause
the message to never be printed.
.SS "5 libgdb"
.IX Subsection "5 libgdb"
5.1 libgdb 1.0
==============
.PP
`\fBlibgdb\fR' 1.0 was an abortive project of years ago.  The theory was to
provide an \s-1API\s0 to \s-1GDB\s0's functionality.
.PP
5.2 libgdb 2.0
==============
.PP
`\fBlibgdb\fR' 2.0 is an ongoing effort to update \s-1GDB\s0 so that is better able
to support graphical and other environments.
.PP
Since `\fBlibgdb\fR' development is on-going, its architecture is still
evolving.  The following components have so far been identified:
.PP
* Observer \- `\fBgdb\-events.h\fR'.
.PP
* Builder \- `\fBui\-out.h\fR'
.PP
* Event Loop \- `\fBevent\-loop.h\fR'
.PP
* Library \- `\fBgdb.h\fR'
.PP
The model that ties these components together is described below.
.PP
5.3 The `\fBlibgdb\fR' Model
======================
.PP
A client of `\fBlibgdb\fR' interacts with the library in two ways.
.PP
* As an observer (using `\fBgdb-events\fR') receiving notifications from
`\fBlibgdb\fR' of any internal state changes (break point changes, run
state, etc).
.PP
* As a client querying `\fBlibgdb\fR' (using the `\fBui-out\fR' builder) to
obtain various status values from \s-1GDB.\s0
.PP
Since `\fBlibgdb\fR' could have multiple clients (e.g., a \s-1GUI\s0 supporting
the existing \s-1GDB CLI\s0), those clients must co-operate when controlling
`\fBlibgdb\fR'.  In particular, a client must ensure that `\fBlibgdb\fR' is idle
(i.e. no other client is using `\fBlibgdb\fR') before responding to a
`\fBgdb-event\fR' by making a query.
.PP
5.4 \s-1CLI\s0 support
===============
.PP
At present \s-1GDB\s0's \s-1CLI\s0 is very much entangled in with the core of
`\fBlibgdb\fR'.  Consequently, a client wishing to include the \s-1CLI\s0 in their
interface needs to carefully co-ordinate its own and the \s-1CLI\s0's
requirements.
.PP
It is suggested that the client set `\fBlibgdb\fR' up to be bi-modal
(alternate between \s-1CLI\s0 and client query modes).  The notes below sketch
out the theory:
.PP
* The client registers itself as an observer of `\fBlibgdb\fR'.
.PP
* The client create and install `\fBcli-out\fR' builder using its own
versions of the `\fBui-file\fR' `\fBgdb_stderr\fR', `\fBgdb_stdtarg\fR' and
`\fBgdb_stdout\fR' streams.
.PP
* The client creates a separate custom `\fBui-out\fR' builder that is only
used while making direct queries to `\fBlibgdb\fR'.
.PP
When the client receives input intended for the \s-1CLI,\s0 it simply
passes it along.  Since the `\fBcli-out\fR' builder is installed by default,
all the \s-1CLI\s0 output in response to that command is routed (pronounced
rooted) through to the client controlled `\fBgdb_stdout\fR' et. al. streams.
At the same time, the client is kept abreast of internal changes by
virtue of being a `\fBlibgdb\fR' observer.
.PP
The only restriction on the client is that it must wait until
`\fBlibgdb\fR' becomes idle before initiating any queries (using the client's
custom builder).
.PP
5.5 `\fBlibgdb\fR' components
=======================
.PP
Observer \- `\fBgdb\-events.h\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
`\fBgdb-events\fR' provides the client with a very raw mechanism that can be
used to implement an observer.  At present it only allows for one
observer and that observer must, internally, handle the need to delay
the processing of any event notifications until after `\fBlibgdb\fR' has
finished the current command.
.PP
Builder \- `\fBui\-out.h\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
`\fBui-out\fR' provides the infrastructure necessary for a client to create a
builder.  That builder is then passed down to `\fBlibgdb\fR' when doing any
queries.
.PP
Event Loop \- `\fBevent\-loop.h\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
`\fBevent-loop\fR', currently non-re-entrant, provides a simple event loop.
A client would need to either plug its self into this loop or,
implement a new event-loop that \s-1GDB\s0 would use.
.PP
The event-loop will eventually be made re-entrant.  This is so that
\&\s-1GDB\s0 can better handle the problem of some commands blocking instead of
returning.
.PP
Library \- `\fBgdb.h\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
`\fBlibgdb\fR' is the most obvious component of this system.  It provides the
query interface.  Each function is parameterized by a `\fBui-out\fR' builder.
The result of the query is constructed using that builder before the
query function returns.
.SS "6 Values"
.IX Subsection "6 Values"
6.1 Values
==========
.PP
\&\s-1GDB\s0 uses `\fBstruct value\fR', or \*(L"values\*(R", as an internal abstraction for
the representation of a variety of inferior objects and \s-1GDB\s0 convenience
objects.
.PP
Values have an associated `\fBstruct type\fR', that describes a virtual
view of the raw data or object stored in or accessed through the value.
.PP
A value is in addition discriminated by its lvalue-ness, given its
`\fBenum lval_type\fR' enumeration type:
.PP
``\fBnot_lval\fR''
This value is not an lval.  It can't be assigned to.
.PP
``\fBlval_memory\fR''
This value represents an object in memory.
.PP
``\fBlval_register\fR''
This value represents an object that lives in a register.
.PP
``\fBlval_internalvar\fR''
Represents the value of an internal variable.
.PP
``\fBlval_internalvar_component\fR''
Represents part of a \s-1GDB\s0 internal variable.  E.g., a structure
field.
.PP
``\fBlval_computed\fR''
These are \*(L"computed\*(R" values.  They allow creating specialized value
objects for specific purposes, all abstracted away from the core
value support code.  The creator of such a value writes specialized
functions to handle the reading and writing to/from the value's
backend data, and optionally, a \*(L"copy operator\*(R" and a \*(L"destructor\*(R".
.PP
Pointers to these functions are stored in a `\fBstruct lval_funcs\fR'
instance (declared in `\fBvalue.h\fR'), and passed to the
`\fBallocate_computed_value\fR' function, as in the example below.
.PP
static void
nil_value_read (struct value *v)
{
/* This callback reads data from some backend, and stores it in V.
In this case, we always read null data.  You'll want to fill in
something more interesting.  */
.PP
memset (value_contents_all_raw (v),
value_offset (v),
\&\s-1TYPE_LENGTH \s0(value_type (v)));
}
.PP
static void
nil_value_write (struct value *v, struct value *fromval)
{
/* Takes the data from \s-1FROMVAL\s0 and stores it in the backend of V.  */
.PP
to_oblivion (value_contents_all_raw (fromval),
value_offset (v),
\&\s-1TYPE_LENGTH \s0(value_type (fromval)));
}
.PP
static struct lval_funcs nil_value_funcs =
{
nil_value_read,
nil_value_write
};
.PP
struct value *
make_nil_value (void)
{
struct type *type;
struct value *v;
.PP
type = make_nils_type ();
v = allocate_computed_value (type, &nil_value_funcs, \s-1NULL\s0);
.PP
return v;
}
.PP
See the implementation of the `\fB\f(CB$_siginfo\fB\fR' convenience variable in
`\fBinfrun.c\fR' as a real example use of lval_computed.
.SS "7 Stack Frames"
.IX Subsection "7 Stack Frames"
A frame is a construct that \s-1GDB\s0 uses to keep track of calling and
called functions.
.PP
\&\s-1GDB\s0's frame model, a fresh design, was implemented with the need to
support \s-1DWARF\s0's Call Frame Information in mind.  In fact, the term
\&\*(L"unwind\*(R" is taken directly from that specification.  Developers wishing
to learn more about unwinders, are encouraged to read the \s-1DWARF\s0
specification, available from `\fBhttp://www.dwarfstd.org\fR'.
.PP
\&\s-1GDB\s0's model is that you find a frame's registers by \*(L"unwinding\*(R" them
from the next younger frame.  That is, `\fBget_frame_register\fR' which
returns the value of a register in frame #1 (the next-to-youngest
frame), is implemented by calling frame #0's `\fBframe_register_unwind\fR'
(the youngest frame).  But then the obvious question is: how do you
access the registers of the youngest frame itself?
.PP
To answer this question, \s-1GDB\s0 has the \*(L"sentinel\*(R" frame, the \*(L"\-1st\*(R"
frame.  Unwinding registers from the sentinel frame gives you the
current values of the youngest real frame's registers.  If F is a
sentinel frame, then `\fBget_frame_type (F) == \s-1SENTINEL_FRAME\s0\fR'.
.PP
7.1 Selecting an Unwinder
=========================
.PP
The architecture registers a list of frame unwinders (`struct
frame_unwind'), using the functions `\fBframe_unwind_prepend_unwinder\fR' and
`\fBframe_unwind_append_unwinder\fR'.  Each unwinder includes a sniffer.
Whenever \s-1GDB\s0 needs to unwind a frame (to fetch the previous frame's
registers or the current frame's \s-1ID\s0), it calls registered sniffers in
order to find one which recognizes the frame.  The first time a sniffer
returns non-zero, the corresponding unwinder is assigned to the frame.
.PP
7.2 Unwinding the Frame \s-1ID\s0
==========================
.PP
Every frame has an associated \s-1ID,\s0 of type `\fBstruct frame_id\fR'.  The \s-1ID\s0
includes the stack base and function start address for the frame.  The
\&\s-1ID\s0 persists through the entire life of the frame, including while other
called frames are running; it is used to locate an appropriate `struct
frame_info' from the cache.
.PP
Every time the inferior stops, and at various other times, the frame
cache is flushed.  Because of this, parts of \s-1GDB\s0 which need to keep
track of individual frames cannot use pointers to `\fBstruct frame_info\fR'.
A frame \s-1ID\s0 provides a stable reference to a frame, even when the
unwinder must be run again to generate a new `\fBstruct frame_info\fR' for
the same frame.
.PP
The frame's unwinder's `\fBthis_id\fR' method is called to find the \s-1ID.\s0
Note that this is different from register unwinding, where the next
frame's `\fBprev_register\fR' is called to unwind this frame's registers.
.PP
Both stack base and function address are required to identify the
frame, because a recursive function has the same function address for
two consecutive frames and a leaf function may have the same stack
address as its caller.  On some platforms, a third address is part of
the \s-1ID\s0 to further disambiguate frames\*(--for instance, on \s-1IA\-64\s0 the
separate register stack address is included in the \s-1ID.\s0
.PP
An invalid frame \s-1ID \s0(`\fBouter_frame_id\fR') returned from the `\fBthis_id\fR'
method means to stop unwinding after this frame.
.PP
`\fBnull_frame_id\fR' is another invalid frame \s-1ID\s0 which should be used
when there is no frame.  For instance, certain breakpoints are attached
to a specific frame, and that frame is identified through its frame \s-1ID
\&\s0(we use this to implement the \*(L"finish\*(R" command).  Using `\fBnull_frame_id\fR'
as the frame \s-1ID\s0 for a given breakpoint means that the breakpoint is not
specific to any frame.  The `\fBthis_id\fR' method should never return
`\fBnull_frame_id\fR'.
.PP
7.3 Unwinding Registers
=======================
.PP
Each unwinder includes a `\fBprev_register\fR' method.  This method takes a
frame, an associated cache pointer, and a register number.  It returns
a `\fBstruct value *\fR' describing the requested register, as saved by this
frame.  This is the value of the register that is current in this
frame's caller.
.PP
The returned value must have the same type as the register.  It may
have any lvalue type.  In most circumstances one of these routines will
generate the appropriate value:
.PP
`\fBframe_unwind_got_optimized\fR'
This register was not saved.
.PP
`\fBframe_unwind_got_register\fR'
This register was copied into another register in this frame.  This
is also used for unchanged registers; they are \*(L"copied\*(R" into the
same register.
.PP
`\fBframe_unwind_got_memory\fR'
This register was saved in memory.
.PP
`\fBframe_unwind_got_constant\fR'
This register was not saved, but the unwinder can compute the
previous value some other way.
.PP
`\fBframe_unwind_got_address\fR'
Same as `\fBframe_unwind_got_constant\fR', except that the value is a
target address.  This is frequently used for the stack pointer,
which is not explicitly saved but has a known offset from this
frame's stack pointer.  For architectures with a flat unified
address space, this is generally the same as
`\fBframe_unwind_got_constant\fR'.
.SS "8 Symbol Handling"
.IX Subsection "8 Symbol Handling"
Symbols are a key part of \s-1GDB\s0's operation.  Symbols include variables,
functions, and types.
.PP
Symbol information for a large program can be truly massive, and
reading of symbol information is one of the major performance
bottlenecks in \s-1GDB\s0; it can take many minutes to process it all.
Studies have shown that nearly all the time spent is computational,
rather than file reading.
.PP
One of the ways for \s-1GDB\s0 to provide a good user experience is to
start up quickly, taking no more than a few seconds.  It is simply not
possible to process all of a program's debugging info in that time, and
so we attempt to handle symbols incrementally.  For instance, we create
\&\*(L"partial symbol tables\*(R" consisting of only selected symbols, and only
expand them to full symbol tables when necessary.
.PP
8.1 Symbol Reading
==================
.PP
\&\s-1GDB\s0 reads symbols from \*(L"symbol files\*(R".  The usual symbol file is the
file containing the program which \s-1GDB\s0 is debugging.  \s-1GDB\s0 can be
directed to use a different file for symbols (with the `\fBsymbol-file\fR'
command), and it can also read more symbols via the `\fBadd-file\fR' and
`\fBload\fR' commands. In addition, it may bring in more symbols while
loading shared libraries.
.PP
Symbol files are initially opened by code in `\fBsymfile.c\fR' using the
\&\s-1BFD\s0 library (see \*(L"Support Libraries\*(R").  \s-1BFD\s0 identifies the type of
the file by examining its header.  `\fBfind_sym_fns\fR' then uses this
identification to locate a set of symbol-reading functions.
.PP
Symbol-reading modules identify themselves to \s-1GDB\s0 by calling
`\fBadd_symtab_fns\fR' during their module initialization.  The argument to
`\fBadd_symtab_fns\fR' is a `\fBstruct sym_fns\fR' which contains the name (or name
prefix) of the symbol format, the length of the prefix, and pointers to
four functions.  These functions are called at various times to process
symbol files whose identification matches the specified prefix.
.PP
The functions supplied by each module are:
.PP
`\fBXYZ_symfile_init(struct sym_fns *sf)\fR'
Called from `\fBsymbol_file_add\fR' when we are about to read a new
symbol file.  This function should clean up any internal state
(possibly resulting from half-read previous files, for example)
and prepare to read a new symbol file.  Note that the symbol file
which we are reading might be a new \*(L"main\*(R" symbol file, or might
be a secondary symbol file whose symbols are being added to the
existing symbol table.
.PP
The argument to `\fBXYZ_symfile_init\fR' is a newly allocated `struct
sym_fns' whose `\fBbfd\fR' field contains the \s-1BFD\s0 for the new symbol
file being read.  Its `\fBprivate\fR' field has been zeroed, and can be
modified as desired.  Typically, a struct of private information
will be `\fBmalloc\fR''d, and a pointer to it will be placed in the
`\fBprivate\fR' field.
.PP
There is no result from `\fBXYZ_symfile_init\fR', but it can call
`\fBerror\fR' if it detects an unavoidable problem.
.PP
`\fB\f(BIXYZ_new_init()\fB\fR'
Called from `\fBsymbol_file_add\fR' when discarding existing symbols.
This function needs only handle the symbol-reading module's
internal state; the symbol table data structures visible to the
rest of \s-1GDB\s0 will be discarded by `\fBsymbol_file_add\fR'.  It has no
arguments and no result.  It may be called after
`\fBXYZ_symfile_init\fR', if a new symbol table is being read, or may be
called alone if all symbols are simply being discarded.
.PP
`\fBXYZ_symfile_read(struct sym_fns *sf, \s-1CORE_ADDR\s0 addr, int mainline)\fR'
Called from `\fBsymbol_file_add\fR' to actually read the symbols from a
symbol-file into a set of psymtabs or symtabs.
.PP
`\fBsf\fR' points to the `\fBstruct sym_fns\fR' originally passed to
`\fBXYZ_sym_init\fR' for possible initialization.  `\fBaddr\fR' is the offset
between the file's specified start address and its true address in
memory.  `\fBmainline\fR' is 1 if this is the main symbol table being
read, and 0 if a secondary symbol file (e.g., shared library or
dynamically loaded file) is being read.
.PP
In addition, if a symbol-reading module creates psymtabs when
XYZ_symfile_read is called, these psymtabs will contain a pointer to a
function `\fBXYZ_psymtab_to_symtab\fR', which can be called from any point in
the \s-1GDB\s0 symbol-handling code.
.PP
`\fBXYZ_psymtab_to_symtab (struct partial_symtab *pst)\fR'
Called from `\fBpsymtab_to_symtab\fR' (or the `\fB\s-1PSYMTAB_TO_SYMTAB\s0\fR' macro)
if the psymtab has not already been read in and had its
`\fBpst\->symtab\fR' pointer set.  The argument is the psymtab to be
fleshed-out into a symtab.  Upon return, `\fBpst\->readin\fR' should have
been set to 1, and `\fBpst\->symtab\fR' should contain a pointer to the
new corresponding symtab, or zero if there were no symbols in that
part of the symbol file.
.PP
8.2 Partial Symbol Tables
=========================
.PP
\&\s-1GDB\s0 has three types of symbol tables:
.PP
* Full symbol tables (\*(L"symtabs\*(R").  These contain the main
information about symbols and addresses.
.PP
* Partial symbol tables (\*(L"psymtabs\*(R").  These contain enough
information to know when to read the corresponding part of the full
symbol table.
.PP
* Minimal symbol tables (\*(L"msymtabs\*(R").  These contain information
gleaned from non-debugging symbols.
.PP
This section describes partial symbol tables.
.PP
A psymtab is constructed by doing a very quick pass over an
executable file's debugging information.  Small amounts of information
are extracted\*(--enough to identify which parts of the symbol table will
need to be re-read and fully digested later, when the user needs the
information.  The speed of this pass causes \s-1GDB\s0 to start up very
quickly.  Later, as the detailed rereading occurs, it occurs in small
pieces, at various times, and the delay therefrom is mostly invisible to
the user.
.PP
The symbols that show up in a file's psymtab should be, roughly,
those visible to the debugger's user when the program is not running
code from that file.  These include external symbols and types, static
symbols and types, and `\fBenum\fR' values declared at file scope.
.PP
The psymtab also contains the range of instruction addresses that the
full symbol table would represent.
.PP
The idea is that there are only two ways for the user (or much of the
code in the debugger) to reference a symbol:
.PP
* By its address (e.g., execution stops at some address which is
inside a function in this file).  The address will be noticed to
be in the range of this psymtab, and the full symtab will be read
in.  `\fBfind_pc_function\fR', `\fBfind_pc_line\fR', and other `\fBfind_pc_...\fR'
functions handle this.
.PP
* By its name (e.g., the user asks to print a variable, or set a
breakpoint on a function).  Global names and file-scope names will
be found in the psymtab, which will cause the symtab to be pulled
in.  Local names will have to be qualified by a global name, or a
file-scope name, in which case we will have already read in the
symtab as we evaluated the qualifier.  Or, a local symbol can be
referenced when we are \*(L"in\*(R" a local scope, in which case the first
case applies.  `\fBlookup_symbol\fR' does most of the work here.
.PP
The only reason that psymtabs exist is to cause a symtab to be read
in at the right moment.  Any symbol that can be elided from a psymtab,
while still causing that to happen, should not appear in it.  Since
psymtabs don't have the idea of scope, you can't put local symbols in
them anyway.  Psymtabs don't have the idea of the type of a symbol,
either, so types need not appear, unless they will be referenced by
name.
.PP
It is a bug for \s-1GDB\s0 to behave one way when only a psymtab has been
read, and another way if the corresponding symtab has been read in.
Such bugs are typically caused by a psymtab that does not contain all
the visible symbols, or which has the wrong instruction address ranges.
.PP
The psymtab for a particular section of a symbol file (objfile)
could be thrown away after the symtab has been read in.  The symtab
should always be searched before the psymtab, so the psymtab will never
be used (in a bug-free environment).  Currently, psymtabs are allocated
on an obstack, and all the psymbols themselves are allocated in a pair
of large arrays on an obstack, so there is little to be gained by
trying to free them unless you want to do a lot more work.
.PP
Whether or not psymtabs are created depends on the objfile's symbol
reader.  The core of \s-1GDB\s0 hides the details of partial symbols and
partial symbol tables behind a set of function pointers known as the
\&\*(L"quick symbol functions\*(R".  These are documented in `\fBsymfile.h\fR'.
.PP
8.3 Types
=========
.PP
Fundamental Types (e.g., `\fB\s-1FT_VOID\s0\fR', `\fB\s-1FT_BOOLEAN\s0\fR').
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
These are the fundamental types that \s-1GDB\s0 uses internally.  Fundamental
types from the various debugging formats (stabs, \s-1ELF,\s0 etc) are mapped
into one of these.  They are basically a union of all fundamental types
that \s-1GDB\s0 knows about for all the languages that \s-1GDB\s0 knows about.
.PP
Type Codes (e.g., `\fB\s-1TYPE_CODE_PTR\s0\fR', `\fB\s-1TYPE_CODE_ARRAY\s0\fR').
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Each time \s-1GDB\s0 builds an internal type, it marks it with one of these
types.  The type may be a fundamental type, such as `\fB\s-1TYPE_CODE_INT\s0\fR', or
a derived type, such as `\fB\s-1TYPE_CODE_PTR\s0\fR' which is a pointer to another
type.  Typically, several `\fBFT_*\fR' types map to one `\fBTYPE_CODE_*\fR' type,
and are distinguished by other members of the type struct, such as
whether the type is signed or unsigned, and how many bits it uses.
.PP
Builtin Types (e.g., `\fBbuiltin_type_void\fR', `\fBbuiltin_type_char\fR').
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
These are instances of type structs that roughly correspond to
fundamental types and are created as global types for \s-1GDB\s0 to use for
various ugly historical reasons.  We eventually want to eliminate
these.  Note for example that `\fBbuiltin_type_int\fR' initialized in
`\fBgdbtypes.c\fR' is basically the same as a `\fB\s-1TYPE_CODE_INT\s0\fR' type that is
initialized in `\fBc\-lang.c\fR' for an `\fB\s-1FT_INTEGER\s0\fR' fundamental type.  The
difference is that the `\fBbuiltin_type\fR' is not associated with any
particular objfile, and only one instance exists, while `\fBc\-lang.c\fR'
builds as many `\fB\s-1TYPE_CODE_INT\s0\fR' types as needed, with each one
associated with some particular objfile.
.PP
8.4 Object File Formats
=======================
.PP
8.4.1 a.out
\&\-\-\-\-\-\-\-\-\-\-\-
.PP
The `\fBa.out\fR' format is the original file format for Unix.  It consists
of three sections: `\fBtext\fR', `\fBdata\fR', and `\fBbss\fR', which are for program
code, initialized data, and uninitialized data, respectively.
.PP
The `\fBa.out\fR' format is so simple that it doesn't have any reserved
place for debugging information.  (Hey, the original Unix hackers used
`\fBadb\fR', which is a machine-language debugger!)  The only debugging
format for `\fBa.out\fR' is stabs, which is encoded as a set of normal
symbols with distinctive attributes.
.PP
The basic `\fBa.out\fR' reader is in `\fBdbxread.c\fR'.
.PP
8.4.2 \s-1COFF
\&\-\-\-\-\-\-\-\-\-\-\s0
.PP
The \s-1COFF\s0 format was introduced with System V Release 3 (\s-1SVR3\s0) Unix.
\&\s-1COFF\s0 files may have multiple sections, each prefixed by a header.  The
number of sections is limited.
.PP
The \s-1COFF\s0 specification includes support for debugging.  Although this
was a step forward, the debugging information was woefully limited.
For instance, it was not possible to represent code that came from an
included file.  \s-1GNU\s0's COFF-using configs often use stabs-type info,
encapsulated in special sections.
.PP
The \s-1COFF\s0 reader is in `\fBcoffread.c\fR'.
.PP
8.4.3 \s-1ECOFF
\&\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
\&\s-1ECOFF\s0 is an extended \s-1COFF\s0 originally introduced for Mips and Alpha
workstations.
.PP
The basic \s-1ECOFF\s0 reader is in `\fBmipsread.c\fR'.
.PP
8.4.4 \s-1XCOFF
\&\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
The \s-1IBM RS/6000\s0 running \s-1AIX\s0 uses an object file format called \s-1XCOFF.\s0
The \s-1COFF\s0 sections, symbols, and line numbers are used, but debugging
symbols are `\fBdbx\fR'\-style stabs whose strings are located in the `\fB.debug\fR'
section (rather than the string table).  For more information, see
*note Top: (stabs)Top.
.PP
The shared library scheme has a clean interface for figuring out what
shared libraries are in use, but the catch is that everything which
refers to addresses (symbol tables and breakpoints at least) needs to be
relocated for both shared libraries and the main executable.  At least
using the standard mechanism this can only be done once the program has
been run (or the core file has been read).
.PP
8.4.5 \s-1PE
\&\-\-\-\-\-\-\-\-\s0
.PP
Windows 95 and \s-1NT\s0 use the \s-1PE \s0(\*(L"Portable Executable\*(R") format for their
executables.  \s-1PE\s0 is basically \s-1COFF\s0 with additional headers.
.PP
While \s-1BFD\s0 includes special \s-1PE\s0 support, \s-1GDB\s0 needs only the basic \s-1COFF\s0
reader.
.PP
8.4.6 \s-1ELF
\&\-\-\-\-\-\-\-\-\-\s0
.PP
The \s-1ELF\s0 format came with System V Release 4 (\s-1SVR4\s0) Unix.  \s-1ELF\s0 is
similar to \s-1COFF\s0 in being organized into a number of sections, but it
removes many of \s-1COFF\s0's limitations.  Debugging info may be either stabs
encapsulated in \s-1ELF\s0 sections, or more commonly these days, \s-1DWARF.\s0
.PP
The basic \s-1ELF\s0 reader is in `\fBelfread.c\fR'.
.PP
8.4.7 \s-1SOM
\&\-\-\-\-\-\-\-\-\-\s0
.PP
\&\s-1SOM\s0 is \s-1HP\s0's object file and debug format (not to be confused with \s-1IBM\s0's
\&\s-1SOM,\s0 which is a cross-language \s-1ABI\s0).
.PP
The \s-1SOM\s0 reader is in `\fBsomread.c\fR'.
.PP
8.5 Debugging File Formats
==========================
.PP
This section describes characteristics of debugging information that
are independent of the object file format.
.PP
8.5.1 stabs
\&\-\-\-\-\-\-\-\-\-\-\-
.PP
`\fBstabs\fR' started out as special symbols within the `\fBa.out\fR' format.
Since then, it has been encapsulated into other file formats, such as
\&\s-1COFF\s0 and \s-1ELF.\s0
.PP
While `\fBdbxread.c\fR' does some of the basic stab processing, including
for encapsulated versions, `\fBstabsread.c\fR' does the real work.
.PP
8.5.2 \s-1COFF
\&\-\-\-\-\-\-\-\-\-\-\s0
.PP
The basic \s-1COFF\s0 definition includes debugging information.  The level of
support is minimal and non-extensible, and is not often used.
.PP
8.5.3 Mips debug (Third Eye)
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
\&\s-1ECOFF\s0 includes a definition of a special debug format.
.PP
The file `\fBmdebugread.c\fR' implements reading for this format.
.PP
8.5.4 \s-1DWARF 2
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
\&\s-1DWARF 2\s0 is an improved but incompatible version of \s-1DWARF 1.\s0
.PP
The \s-1DWARF 2\s0 reader is in `\fBdwarf2read.c\fR'.
.PP
8.5.5 Compressed \s-1DWARF 2
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
Compressed \s-1DWARF 2\s0 is not technically a separate debugging format, but
merely \s-1DWARF 2\s0 debug information that has been compressed.  In this
format, every object-file section holding \s-1DWARF 2\s0 debugging information
is compressed and prepended with a header.  (The section is also
typically renamed, so a section called `\fB.debug_info\fR' in a \s-1DWARF 2\s0
binary would be called `\fB.zdebug_info\fR' in a compressed \s-1DWARF 2\s0 binary.)
The header is 12 bytes long:
.PP
4 bytes: see \*(L"the literal string \*(R"\s-1ZLIB""\s0
.PP
8 bytes: see \*(L"the uncompressed size of the section, in big-endian byte\*(R"
.PP
order.
.PP
The same reader is used for both compressed an normal \s-1DWARF 2\s0 info.
Section decompression is done in `\fBzlib_decompress_section\fR' in
`\fBdwarf2read.c\fR'.
.PP
8.5.6 \s-1DWARF 3
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
\&\s-1DWARF 3\s0 is an improved version of \s-1DWARF 2.\s0
.PP
8.5.7 \s-1SOM
\&\-\-\-\-\-\-\-\-\-\s0
.PP
Like \s-1COFF,\s0 the \s-1SOM\s0 definition includes debugging information.
.PP
8.6 Adding a New Symbol Reader to \s-1GDB\s0
=====================================
.PP
If you are using an existing object file format (`\fBa.out\fR', \s-1COFF, ELF,\s0
etc), there is probably little to be done.
.PP
If you need to add a new object file format, you must first add it to
\&\s-1BFD. \s0 This is beyond the scope of this document.
.PP
You must then arrange for the \s-1BFD\s0 code to provide access to the
debugging symbols.  Generally \s-1GDB\s0 will have to call swapping routines
from \s-1BFD\s0 and a few other \s-1BFD\s0 internal routines to locate the debugging
information.  As much as possible, \s-1GDB\s0 should not depend on the \s-1BFD\s0
internal data structures.
.PP
For some targets (e.g., \s-1COFF\s0), there is a special transfer vector
used to call swapping routines, since the external data structures on
various platforms have different sizes and layouts.  Specialized
routines that will only ever be implemented by one object file format
may be called directly.  This interface should be described in a file
`\fBbfd/libXYZ.h\fR', which is included by \s-1GDB.\s0
.PP
8.7 Memory Management for Symbol Files
======================================
.PP
Most memory associated with a loaded symbol file is stored on its
`\fBobjfile_obstack\fR'.  This includes symbols, types, namespace data, and
other information produced by the symbol readers.
.PP
Because this data lives on the objfile's obstack, it is automatically
released when the objfile is unloaded or reloaded.  Therefore one
objfile must not reference symbol or type data from another objfile;
they could be unloaded at different times.
.PP
User convenience variables, et cetera, have associated types.
Normally these types live in the associated objfile.  However, when the
objfile is unloaded, those types are deep copied to global memory, so
that the values of the user variables and history items are not lost.
.SS "9 Language Support"
.IX Subsection "9 Language Support"
\&\s-1GDB\s0's language support is mainly driven by the symbol reader, although
it is possible for the user to set the source language manually.
.PP
\&\s-1GDB\s0 chooses the source language by looking at the extension of the
file recorded in the debug info; `\fB.c\fR' means C, `\fB.f\fR' means Fortran, etc.
It may also use a special-purpose language identifier if the debug
format supports it, like with \s-1DWARF.\s0
.PP
9.1 Adding a Source Language to \s-1GDB\s0
===================================
.PP
To add other languages to \s-1GDB\s0's expression parser, follow the following
steps:
.PP
_Create the expression parser._
This should reside in a file `\fBLANG\-exp.y\fR'.  Routines for building
parsed expressions into a `\fBunion exp_element\fR' list are in
`\fBparse.c\fR'.
.PP
Since we can't depend upon everyone having Bison, and \s-1YACC\s0 produces
parsers that define a bunch of global names, the following lines
*must* be included at the top of the \s-1YACC\s0 parser, to prevent the
various parsers from defining the same global names:
.PP
#define yyparse         LANG_parse
#define yylex           LANG_lex
#define yyerror         LANG_error
#define yylval          LANG_lval
#define yychar          LANG_char
#define yydebug         LANG_debug
#define yypact          LANG_pact
#define yyr1            LANG_r1
#define yyr2            LANG_r2
#define yydef           LANG_def
#define yychk           LANG_chk
#define yypgo           LANG_pgo
#define yyact           LANG_act
#define yyexca          LANG_exca
#define yyerrflag       LANG_errflag
#define yynerrs         LANG_nerrs
.PP
At the bottom of your parser, define a `\fBstruct language_defn\fR' and
initialize it with the right values for your language.  Define an
`\fBinitialize_LANG\fR' routine and have it call
`\fBadd_language(LANG_language_defn)\fR' to tell the rest of \s-1GDB\s0 that
your language exists.  You'll need some other supporting variables
and functions, which will be used via pointers from your
`\fBLANG_language_defn\fR'.  See the declaration of `struct
language_defn' in `\fBlanguage.h\fR', and the other `\fB*\-exp.y\fR' files, for
more information.
.PP
_Add any evaluation routines, if necessary_
If you need new opcodes (that represent the operations of the
language), add them to the enumerated type in `\fBexpression.h\fR'.  Add
support code for these operations in the `\fBevaluate_subexp\fR' function
defined in the file `\fBeval.c\fR'.  Add cases for new opcodes in two
functions from `\fBparse.c\fR': `\fBprefixify_subexp\fR' and
`\fBlength_of_subexp\fR'.  These compute the number of `\fBexp_element\fR's
that a given operation takes up.
.PP
_Update some existing code_
Add an enumerated identifier for your language to the enumerated
type `\fBenum language\fR' in `\fBdefs.h\fR'.
.PP
Update the routines in `\fBlanguage.c\fR' so your language is included.
These routines include type predicates and such, which (in some
cases) are language dependent.  If your language does not appear
in the switch statement, an error is reported.
.PP
Also included in `\fBlanguage.c\fR' is the code that updates the variable
`\fBcurrent_language\fR', and the routines that translate the
`\fBlanguage_LANG\fR' enumerated identifier into a printable string.
.PP
Update the function `\fB_initialize_language\fR' to include your
language.  This function picks the default language upon startup,
so is dependent upon which languages that \s-1GDB\s0 is built for.
.PP
Update `\fBallocate_symtab\fR' in `\fBsymfile.c\fR' and/or symbol-reading code
so that the language of each symtab (source file) is set properly.
This is used to determine the language to use at each stack frame
level.  Currently, the language is set based upon the extension of
the source file.  If the language can be better inferred from the
symbol information, please set the language of the symtab in the
symbol-reading code.
.PP
Add helper code to `\fBprint_subexp\fR' (in `\fBexpprint.c\fR') to handle any
new expression opcodes you have added to `\fBexpression.h\fR'.  Also,
add the printed representations of your operators to
`\fBop_print_tab\fR'.
.PP
_Add a place of call_
Add a call to `\fB\f(BILANG_parse()\fB\fR' and `\fBLANG_error\fR' in `\fBparse_exp_1\fR'
(defined in `\fBparse.c\fR').
.PP
_Edit `\fBMakefile.in\fR'_
Add dependencies in `\fBMakefile.in\fR'.  Make sure you update the macro
variables such as `\fB\s-1HFILES\s0\fR' and `\fB\s-1OBJS\s0\fR', otherwise your code may not
get linked in, or, worse yet, it may not get `\fBtar\fR'red into the
distribution!
.SS "10 Host Definition"
.IX Subsection "10 Host Definition"
With the advent of Autoconf, it's rarely necessary to have host
definition machinery anymore.  The following information is provided,
mainly, as an historical reference.
.PP
10.1 Adding a New Host
======================
.PP
\&\s-1GDB\s0's host configuration support normally happens via Autoconf.  New
host-specific definitions should not be needed.  Older hosts \s-1GDB\s0 still
use the host-specific definitions and files listed below, but these
mostly exist for historical reasons, and will eventually disappear.
.PP
`\fBgdb/config/ARCH/XYZ.mh\fR'
This file is a Makefile fragment that once contained both host and
native configuration information (see \*(L"Native Debugging\*(R") for the
machine \s-1XYZ. \s0 The host configuration information is now handled by
Autoconf.
.PP
Host configuration information included definitions for `\fB\s-1CC\s0\fR',
`\fB\s-1SYSV_DEFINE\s0\fR', `\fB\s-1XM_CFLAGS\s0\fR', `\fB\s-1XM_ADD_FILES\s0\fR', `\fB\s-1XM_CLIBS\s0\fR',
`\fB\s-1XM_CDEPS\s0\fR', etc.; see `\fBMakefile.in\fR'.
.PP
New host-only configurations do not need this file.
.PP
(Files named `\fBgdb/config/ARCH/xm\-XYZ.h\fR' were once used to define
host-specific macros, but were no longer needed and have all been
removed.)
.PP
Generic Host Support Files
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
There are some \*(L"generic\*(R" versions of routines that can be used by
various systems.
.PP
`\fBser\-unix.c\fR'
This contains serial line support for Unix systems.  It is
included by default on all Unix-like hosts.
.PP
`\fBser\-pipe.c\fR'
This contains serial pipe support for Unix systems.  It is
included by default on all Unix-like hosts.
.PP
`\fBser\-mingw.c\fR'
This contains serial line support for 32\-bit programs running under
Windows using MinGW.
.PP
`\fBser\-go32.c\fR'
This contains serial line support for 32\-bit programs running
under \s-1DOS,\s0 using the \s-1DJGPP \s0(a.k.a. \s-1GO32\s0) execution environment.
.PP
`\fBser\-tcp.c\fR'
This contains generic \s-1TCP\s0 support using sockets.  It is included by
default on all Unix-like hosts and with MinGW.
.PP
10.2 Host Conditionals
======================
.PP
When \s-1GDB\s0 is configured and compiled, various macros are defined or left
undefined, to control compilation based on the attributes of the host
system.  While formerly they could be set in host-specific header
files, at present they can be changed only by setting `\fB\s-1CFLAGS\s0\fR' when
building, or by editing the source code.
.PP
These macros and their meanings (or if the meaning is not documented
here, then one of the source files where they are used is indicated)
are:
.PP
`\fB\s-1GDBINIT_FILENAME\s0\fR'
The default name of \s-1GDB\s0's initialization file (normally
`\fB.gdbinit\fR').
.PP
`\fB\s-1CRLF_SOURCE_FILES\s0\fR'
Define this if host files use `\fB\er\en\fR' rather than `\fB\en\fR' as a line
terminator.  This will cause source file listings to omit `\fB\er\fR'
characters when printing and it will allow `\fB\er\en\fR' line endings of
files which are \*(L"sourced\*(R" by gdb.  It must be possible to open
files in binary mode using `\fBO_BINARY\fR' or, for fopen, `\fB\*(L"rb\*(R"\fR'.
.PP
`\fB\s-1DEFAULT_PROMPT\s0\fR'
The default value of the prompt string (normally `\fB\*(L"(gdb) \*(R"\fR').
.PP
`\fB\s-1DEV_TTY\s0\fR'
The name of the generic \s-1TTY\s0 device, defaults to `\fB\*(L"/dev/tty\*(R"\fR'.
.PP
`\fB\s-1ISATTY\s0\fR'
Substitute for isatty, if not available.
.PP
`\fB\s-1FOPEN_RB\s0\fR'
Define this if binary files are opened the same way as text files.
.PP
`\fB\s-1PRINTF_HAS_LONG_LONG\s0\fR'
Define this if the host can handle printing of long long integers
via the printf format conversion specifier `\fBll\fR'.  This is set by
the `\fBconfigure\fR' script.
.PP
`\fB\s-1LSEEK_NOT_LINEAR\s0\fR'
Define this if `\fBlseek (n)\fR' does not necessarily move to byte number
`\fBn\fR' in the file.  This is only used when reading source files.  It
is normally faster to define `\fB\s-1CRLF_SOURCE_FILES\s0\fR' when possible.
.PP
`\fBlint\fR'
Define this to help placate `\fBlint\fR' in some situations.
.PP
`\fBvolatile\fR'
Define this to override the defaults of `\fB_\|_volatile_\|_\fR' or `\fB/**/\fR'.
.SS "11 Target Architecture Definition"
.IX Subsection "11 Target Architecture Definition"
\&\s-1GDB\s0's target architecture defines what sort of machine-language
programs \s-1GDB\s0 can work with, and how it works with them.
.PP
The target architecture object is implemented as the C structure
`\fBstruct gdbarch *\fR'.  The structure, and its methods, are generated
using the Bourne shell script `\fBgdbarch.sh\fR'.
.PP
* Menu:
.PP
See also \*(L"\s-1OS ABI\s0 Variant Handling\*(R"
.PP
See also \*(L"Initialize New Architecture\*(R"
.PP
See also \*(L"Registers and Memory\*(R"
.PP
See also \*(L"Pointers and Addresses\*(R"
.PP
See also \*(L"Address Classes\*(R"
.PP
See also \*(L"Register Representation\*(R"
.PP
See also \*(L"Frame Interpretation\*(R"
.PP
See also \*(L"Inferior Call Setup\*(R"
.PP
See also \*(L"Adding support for debugging core files\*(R"
.PP
See also \*(L"Defining Other Architecture Features\*(R"
.PP
See also \*(L"Adding a New Target\*(R"
.PP
\&\fB11.1 Operating System \s-1ABI\s0 Variant Handling\fR
.PP
\&\s-1GDB\s0 provides a mechanism for handling variations in \s-1OS\s0 ABIs.  An \s-1OS ABI\s0
variant may have influence over any number of variables in the target
architecture definition.  There are two major components in the \s-1OS ABI\s0
mechanism: sniffers and handlers.
.PP
A \*(L"sniffer\*(R" examines a file matching a \s-1BFD\s0 architecture/flavour pair
(the architecture may be wildcarded) in an attempt to determine the \s-1OS
ABI\s0 of that file.  Sniffers with a wildcarded architecture are
considered to be \*(L"generic\*(R", while sniffers for a specific architecture
are considered to be \*(L"specific\*(R".  A match from a specific sniffer
overrides a match from a generic sniffer.  Multiple sniffers for an
architecture/flavour may exist, in order to differentiate between two
different operating systems which use the same basic file format.  The
\&\s-1OS ABI\s0 framework provides a generic sniffer for ELF-format files which
examines the `\fB\s-1EI_OSABI\s0\fR' field of the \s-1ELF\s0 header, as well as note
sections known to be used by several operating systems.
.PP
A \*(L"handler\*(R" is used to fine-tune the `\fBgdbarch\fR' structure for the
selected \s-1OS ABI. \s0 There may be only one handler for a given \s-1OS ABI\s0 for
each \s-1BFD\s0 architecture.
.PP
The following \s-1OS ABI\s0 variants are defined in `\fBdefs.h\fR':
.PP
`\fB\s-1GDB_OSABI_UNINITIALIZED\s0\fR'
Used for struct gdbarch_info if \s-1ABI\s0 is still uninitialized.
.PP
`\fB\s-1GDB_OSABI_UNKNOWN\s0\fR'
The \s-1ABI\s0 of the inferior is unknown.  The default `\fBgdbarch\fR'
settings for the architecture will be used.
.PP
`\fB\s-1GDB_OSABI_SVR4\s0\fR'
\&\s-1UNIX\s0 System V Release 4.
.PP
`\fB\s-1GDB_OSABI_HURD\s0\fR'
\&\s-1GNU\s0 using the Hurd kernel.
.PP
`\fB\s-1GDB_OSABI_SOLARIS\s0\fR'
Sun Solaris.
.PP
`\fB\s-1GDB_OSABI_OSF1\s0\fR'
\&\s-1OSF/1,\s0 including Digital \s-1UNIX\s0 and Compaq Tru64 \s-1UNIX.\s0
.PP
`\fB\s-1GDB_OSABI_LINUX\s0\fR'
\&\s-1GNU\s0 using the Linux kernel.
.PP
`\fB\s-1GDB_OSABI_FREEBSD_AOUT\s0\fR'
FreeBSD using the `\fBa.out\fR' executable format.
.PP
`\fB\s-1GDB_OSABI_FREEBSD_ELF\s0\fR'
FreeBSD using the \s-1ELF\s0 executable format.
.PP
`\fB\s-1GDB_OSABI_NETBSD_AOUT\s0\fR'
NetBSD using the `\fBa.out\fR' executable format.
.PP
`\fB\s-1GDB_OSABI_NETBSD_ELF\s0\fR'
NetBSD using the \s-1ELF\s0 executable format.
.PP
`\fB\s-1GDB_OSABI_OPENBSD_ELF\s0\fR'
OpenBSD using the \s-1ELF\s0 executable format.
.PP
`\fB\s-1GDB_OSABI_WINCE\s0\fR'
Windows \s-1CE.\s0
.PP
`\fB\s-1GDB_OSABI_GO32\s0\fR'
\&\s-1DJGPP.\s0
.PP
`\fB\s-1GDB_OSABI_IRIX\s0\fR'
Irix.
.PP
`\fB\s-1GDB_OSABI_INTERIX\s0\fR'
Interix (Posix layer for MS-Windows systems).
.PP
`\fB\s-1GDB_OSABI_HPUX_ELF\s0\fR'
\&\s-1HP/UX\s0 using the \s-1ELF\s0 executable format.
.PP
`\fB\s-1GDB_OSABI_HPUX_SOM\s0\fR'
\&\s-1HP/UX\s0 using the \s-1SOM\s0 executable format.
.PP
`\fB\s-1GDB_OSABI_QNXNTO\s0\fR'
\&\s-1QNX\s0 Neutrino.
.PP
`\fB\s-1GDB_OSABI_CYGWIN\s0\fR'
Cygwin.
.PP
`\fB\s-1GDB_OSABI_AIX\s0\fR'
\&\s-1AIX.\s0
.PP
Here are the functions that make up the \s-1OS ABI\s0 framework:
.PP
\&\-\- Function: const char * gdbarch_osabi_name (enum gdb_osabi \s-1OSABI\s0)
Return the name of the \s-1OS ABI\s0 corresponding to \s-1OSABI.\s0
.PP
\&\-\- Function: void gdbarch_register_osabi (enum bfd_architecture \s-1ARCH,\s0
unsigned long \s-1MACHINE,\s0 enum gdb_osabi \s-1OSABI,\s0 void
(*INIT_OSABI)(struct gdbarch_info \s-1INFO,\s0 struct gdbarch
*GDBARCH))
Register the \s-1OS ABI\s0 handler specified by \s-1INIT_OSABI\s0 for the
architecture, machine type and \s-1OS ABI\s0 specified by \s-1ARCH, MACHINE\s0
and \s-1OSABI. \s0 In most cases, a value of zero for the machine type,
which implies the architecture's default machine type, will
suffice.
.PP
\&\-\- Function: void gdbarch_register_osabi_sniffer (enum
bfd_architecture \s-1ARCH,\s0 enum bfd_flavour \s-1FLAVOUR,\s0 enum
gdb_osabi (*SNIFFER)(bfd *ABFD))
Register the \s-1OS ABI\s0 file sniffer specified by \s-1SNIFFER\s0 for the \s-1BFD\s0
architecture/flavour pair specified by \s-1ARCH\s0 and \s-1FLAVOUR. \s0 If \s-1ARCH\s0
is `\fBbfd_arch_unknown\fR', the sniffer is considered to be generic,
and is allowed to examine FLAVOUR-flavoured files for any
architecture.
.PP
\&\-\- Function: enum gdb_osabi gdbarch_lookup_osabi (bfd *ABFD)
Examine the file described by \s-1ABFD\s0 to determine its \s-1OS ABI. \s0 The
value `\fB\s-1GDB_OSABI_UNKNOWN\s0\fR' is returned if the \s-1OS ABI\s0 cannot be
determined.
.PP
\&\-\- Function: void gdbarch_init_osabi (struct gdbarch info \s-1INFO,\s0 struct
gdbarch *GDBARCH, enum gdb_osabi \s-1OSABI\s0)
Invoke the \s-1OS ABI\s0 handler corresponding to \s-1OSABI\s0 to fine-tune the
`\fBgdbarch\fR' structure specified by \s-1GDBARCH. \s0 If a handler
corresponding to \s-1OSABI\s0 has not been registered for \s-1GDBARCH\s0's
architecture, a warning will be issued and the debugging session
will continue with the defaults already established for \s-1GDBARCH.\s0
.PP
\&\-\- Function: void generic_elf_osabi_sniff_abi_tag_sections (bfd *ABFD,
asection *SECT, void *OBJ)
Helper routine for \s-1ELF\s0 file sniffers.  Examine the file described
by \s-1ABFD\s0 and look at \s-1ABI\s0 tag note sections to determine the \s-1OS ABI\s0
from the note.  This function should be called via
`\fBbfd_map_over_sections\fR'.
.PP
\&\fB11.2 Initializing a New Architecture\fR
.PP
* Menu:
.PP
See also \*(L"How an Architecture is Represented\*(R"
.PP
See also \*(L"Looking Up an Existing Architecture\*(R"
.PP
See also \*(L"Creating a New Architecture\*(R"
.PP
\&\fB11.2.1 How an Architecture is Represented\fR
.PP
Each `\fBgdbarch\fR' is associated with a single \s-1BFD\s0 architecture, via a
`\fBbfd_arch_ARCH\fR' in the `\fBbfd_architecture\fR' enumeration.  The `\fBgdbarch\fR'
is registered by a call to `\fBregister_gdbarch_init\fR', usually from the
file's `\fB_initialize_FILENAME\fR' routine, which will be automatically
called during \s-1GDB\s0 startup.  The arguments are a \s-1BFD\s0 architecture
constant and an initialization function.
.PP
A \s-1GDB\s0 description for a new architecture, \s-1ARCH\s0 is created by
defining a global function `\fB_initialize_ARCH_tdep\fR', by convention in
the source file `\fBARCH\-tdep.c\fR'.  For example, in the case of the
OpenRISC 1000, this function is called `\fB_initialize_or1k_tdep\fR' and is
found in the file `\fBor1k\-tdep.c\fR'.
.PP
The resulting object files containing the implementation of the
`\fB_initialize_ARCH_tdep\fR' function are specified in the \s-1GDB\s0
`\fBconfigure.tgt\fR' file, which includes a large case statement pattern
matching against the `\fB\-\-target\fR' option of the `\fBconfigure\fR' script.  The
new `\fBstruct gdbarch\fR' is created within the `\fB_initialize_ARCH_tdep\fR'
function by calling `\fBgdbarch_register\fR':
.PP
void gdbarch_register (enum bfd_architecture    \s-1ARCHITECTURE,\s0
gdbarch_init_ftype      *INIT_FUNC,
gdbarch_dump_tdep_ftype *TDEP_DUMP_FUNC);
.PP
The \s-1ARCHITECTURE\s0 will identify the unique \s-1BFD\s0 to be associated with
this `\fBgdbarch\fR'.  The \s-1INIT_FUNC\s0 funciton is called to create and return
the new `\fBstruct gdbarch\fR'.  The \s-1TDEP_DUMP_FUNC\s0 function will dump the
target specific details associated with this architecture.
.PP
For example the function `\fB_initialize_or1k_tdep\fR' creates its
architecture for 32\-bit OpenRISC 1000 architectures by calling:
.PP
gdbarch_register (bfd_arch_or32, or1k_gdbarch_init, or1k_dump_tdep);
.PP
\&\fB11.2.2 Looking Up an Existing Architecture\fR
.PP
The initialization function has this prototype:
.PP
static struct gdbarch *
ARCH_gdbarch_init (struct gdbarch_info \s-1INFO,\s0
struct gdbarch_list *ARCHES)
.PP
The \s-1INFO\s0 argument contains parameters used to select the correct
architecture, and \s-1ARCHES\s0 is a list of architectures which have already
been created with the same `\fBbfd_arch_ARCH\fR' value.
.PP
The initialization function should first make sure that \s-1INFO\s0 is
acceptable, and return `\fB\s-1NULL\s0\fR' if it is not.  Then, it should search
through \s-1ARCHES\s0 for an exact match to \s-1INFO,\s0 and return one if found.
Lastly, if no exact match was found, it should create a new
architecture based on \s-1INFO\s0 and return it.
.PP
The lookup is done using `\fBgdbarch_list_lookup_by_info\fR'.  It is
passed the list of existing architectures, \s-1ARCHES,\s0 and the `struct
gdbarch_info', \s-1INFO,\s0 and returns the first matching architecture it
finds, or `\fB\s-1NULL\s0\fR' if none are found.  If an architecture is found it can
be returned as the result from the initialization function, otherwise a
new `\fBstruct gdbach\fR' will need to be created.
.PP
The struct gdbarch_info has the following components:
.PP
struct gdbarch_info
{
const struct bfd_arch_info *bfd_arch_info;
int                         byte_order;
bfd                        *abfd;
struct gdbarch_tdep_info   *tdep_info;
enum gdb_osabi              osabi;
const struct target_desc   *target_desc;
};
.PP
The `\fBbfd_arch_info\fR' member holds the key details about the
architecture.  The `\fBbyte_order\fR' member is a value in an enumeration
indicating the endianism.  The `\fBabfd\fR' member is a pointer to the full
\&\s-1BFD,\s0 the `\fBtdep_info\fR' member is additional custom target specific
information, `\fBosabi\fR' identifies which (if any) of a number of operating
specific ABIs are used by this architecture and the `\fBtarget_desc\fR'
member is a set of name-value pairs with information about register
usage in this target.
.PP
When the `\fBstruct gdbarch\fR' initialization function is called, not all
the fields are provided\*(--only those which can be deduced from the \s-1BFD.\s0
The `\fBstruct gdbarch_info\fR', \s-1INFO\s0 is used as a look-up key with the list
of existing architectures, \s-1ARCHES\s0 to see if a suitable architecture
already exists.  The \s-1TDEP_INFO, OSABI\s0 and \s-1TARGET_DESC\s0 fields may be
added before this lookup to refine the search.
.PP
Only information in \s-1INFO\s0 should be used to choose the new
architecture.  Historically, \s-1INFO\s0 could be sparse, and defaults would
be collected from the first element on \s-1ARCHES. \s0 However, \s-1GDB\s0 now fills
in \s-1INFO\s0 more thoroughly, so new `\fBgdbarch\fR' initialization functions
should not take defaults from \s-1ARCHES.\s0
.PP
\&\fB11.2.3 Creating a New Architecture\fR
.PP
If no architecture is found, then a new architecture must be created,
by calling `\fBgdbarch_alloc\fR' using the supplied `\fBstruct gdbarch_info\fR' and
any additional custom target specific information in a `struct
gdbarch_tdep'.  The prototype for `\fBgdbarch_alloc\fR' is:
.PP
struct gdbarch *gdbarch_alloc (const struct gdbarch_info *INFO,
struct gdbarch_tdep       *TDEP);
.PP
The newly created struct gdbarch must then be populated.  Although
there are default values, in most cases they are not what is required.
.PP
For each element, X, there is are a pair of corresponding accessor
functions, one to set the value of that element, `\fBset_gdbarch_X\fR', the
second to either get the value of an element (if it is a variable) or
to apply the element (if it is a function), `\fBgdbarch_X\fR'.  Note that
both accessor functions take a pointer to the `\fBstruct gdbarch\fR' as first
argument.  Populating the new `\fBgdbarch\fR' should use the `\fBset_gdbarch\fR'
functions.
.PP
The following sections identify the main elements that should be set
in this way.  This is not the complete list, but represents the
functions and elements that must commonly be specified for a new
architecture.  Many of the functions and variables are described in the
header file `\fBgdbarch.h\fR'.
.PP
This is the main work in defining a new architecture.  Implementing
the set of functions to populate the `\fBstruct gdbarch\fR'.
.PP
`\fBstruct gdbarch_tdep\fR' is not defined within GDB\*(--it is up to the
user to define this struct if it is needed to hold custom target
information that is not covered by the standard `\fBstruct gdbarch\fR'. For
example with the OpenRISC 1000 architecture it is used to hold the
number of matchpoints available in the target (along with other
information).
.PP
If there is no additional target specific information, it can be set
to `\fB\s-1NULL\s0\fR'.
.PP
\&\fB11.3 Registers and Memory\fR
.PP
\&\s-1GDB\s0's model of the target machine is rather simple.  \s-1GDB\s0 assumes the
machine includes a bank of registers and a block of memory.  Each
register may have a different size.
.PP
\&\s-1GDB\s0 does not have a magical way to match up with the compiler's idea
of which registers are which; however, it is critical that they do
match up accurately.  The only way to make this work is to get accurate
information about the order that the compiler uses, and to reflect that
in the `\fBgdbarch_register_name\fR' and related functions.
.PP
\&\s-1GDB\s0 can handle big-endian, little-endian, and bi-endian
architectures.
.PP
\&\fB11.4 Pointers Are Not Always Addresses\fR
.PP
On almost all 32\-bit architectures, the representation of a pointer is
indistinguishable from the representation of some fixed-length number
whose value is the byte address of the object pointed to.  On such
machines, the words \*(L"pointer\*(R" and \*(L"address\*(R" can be used interchangeably.
However, architectures with smaller word sizes are often cramped for
address space, so they may choose a pointer representation that breaks
this identity, and allows a larger code address space.
.PP
For example, the Renesas D10V is a 16\-bit \s-1VLIW\s0 processor whose
instructions are 32 bits \fIlong\fR\|(1).  If the D10V used ordinary byte
addresses to refer to code locations, then the processor would only be
able to address 64kb of instructions.  However, since instructions must
be aligned on four-byte boundaries, the low two bits of any valid
instruction's byte address are always zero\*(--byte addresses waste two
bits.  So instead of byte addresses, the D10V uses word addresses\*(--byte
addresses shifted right two bits\*(--to refer to code.  Thus, the D10V can
use 16\-bit words to address 256kb of code space.
.PP
However, this means that code pointers and data pointers have
different forms on the D10V.  The 16\-bit word `\fB0xC020\fR' refers to byte
address `\fB0xC020\fR' when used as a data address, but refers to byte address
`\fB0x30080\fR' when used as a code address.
.PP
(The D10V also uses separate code and data address spaces, which also
affects the correspondence between pointers and addresses, but we're
going to ignore that here; this example is already too long.)
.PP
To cope with architectures like this\*(--the D10V is not the only
one!\-\-GDB tries to distinguish between \*(L"addresses\*(R", which are byte
numbers, and \*(L"pointers\*(R", which are the target's representation of an
address of a particular type of data.  In the example above, `\fB0xC020\fR'
is the pointer, which refers to one of the addresses `\fB0xC020\fR' or
`\fB0x30080\fR', depending on the type imposed upon it.  \s-1GDB\s0 provides
functions for turning a pointer into an address and vice versa, in the
appropriate way for the current architecture.
.PP
Unfortunately, since addresses and pointers are identical on almost
all processors, this distinction tends to bit-rot pretty quickly.  Thus,
each time you port \s-1GDB\s0 to an architecture which does distinguish
between pointers and addresses, you'll probably need to clean up some
architecture-independent code.
.PP
Here are functions which convert between pointers and addresses:
.PP
\&\-\- Function: \s-1CORE_ADDR\s0 extract_typed_address (void *BUF, struct type
*TYPE)
Treat the bytes at \s-1BUF\s0 as a pointer or reference of type \s-1TYPE,\s0 and
return the address it represents, in a manner appropriate for the
current architecture.  This yields an address \s-1GDB\s0 can use to read
target memory, disassemble, etc.  Note that \s-1BUF\s0 refers to a buffer
in \s-1GDB\s0's memory, not the inferior's.
.PP
For example, if the current architecture is the Intel x86, this
function extracts a little-endian integer of the appropriate
length from \s-1BUF\s0 and returns it.  However, if the current
architecture is the D10V, this function will return a 16\-bit
integer extracted from \s-1BUF,\s0 multiplied by four if \s-1TYPE\s0 is a
pointer to a function.
.PP
If \s-1TYPE\s0 is not a pointer or reference type, then this function
will signal an internal error.
.PP
\&\-\- Function: \s-1CORE_ADDR\s0 store_typed_address (void *BUF, struct type
*TYPE, \s-1CORE_ADDR ADDR\s0)
Store the address \s-1ADDR\s0 in \s-1BUF,\s0 in the proper format for a pointer
of type \s-1TYPE\s0 in the current architecture.  Note that \s-1BUF\s0 refers to
a buffer in \s-1GDB\s0's memory, not the inferior's.
.PP
For example, if the current architecture is the Intel x86, this
function stores \s-1ADDR\s0 unmodified as a little-endian integer of the
appropriate length in \s-1BUF. \s0 However, if the current architecture
is the D10V, this function divides \s-1ADDR\s0 by four if \s-1TYPE\s0 is a
pointer to a function, and then stores it in \s-1BUF.\s0
.PP
If \s-1TYPE\s0 is not a pointer or reference type, then this function
will signal an internal error.
.PP
\&\-\- Function: \s-1CORE_ADDR\s0 value_as_address (struct value *VAL)
Assuming that \s-1VAL\s0 is a pointer, return the address it represents,
as appropriate for the current architecture.
.PP
This function actually works on integral values, as well as
pointers.  For pointers, it performs architecture-specific
conversions as described above for `\fBextract_typed_address\fR'.
.PP
\&\-\- Function: \s-1CORE_ADDR\s0 value_from_pointer (struct type *TYPE,
\&\s-1CORE_ADDR ADDR\s0)
Create and return a value representing a pointer of type \s-1TYPE\s0 to
the address \s-1ADDR,\s0 as appropriate for the current architecture.
This function performs architecture-specific conversions as
described above for `\fBstore_typed_address\fR'.
.PP
Here are two functions which architectures can define to indicate the
relationship between pointers and addresses.  These have default
definitions, appropriate for architectures on which all pointers are
simple unsigned byte addresses.
.PP
\&\-\- Function: \s-1CORE_ADDR\s0 gdbarch_pointer_to_address (struct gdbarch
*GDBARCH, struct type *TYPE, char *BUF)
Assume that \s-1BUF\s0 holds a pointer of type \s-1TYPE,\s0 in the appropriate
format for the current architecture.  Return the byte address the
pointer refers to.
.PP
This function may safely assume that \s-1TYPE\s0 is either a pointer or a
\&\*(C+ reference type.
.PP
\&\-\- Function: void gdbarch_address_to_pointer (struct gdbarch *GDBARCH,
struct type *TYPE, char *BUF, \s-1CORE_ADDR ADDR\s0)
Store in \s-1BUF\s0 a pointer of type \s-1TYPE\s0 representing the address \s-1ADDR,\s0
in the appropriate format for the current architecture.
.PP
This function may safely assume that \s-1TYPE\s0 is either a pointer or a
\&\*(C+ reference type.
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) Some D10V instructions are actually pairs of 16\-bit
sub-instructions.  However, since you can't jump into the middle of
such a pair, code addresses can only refer to full 32 bit instructions,
which is what matters in this explanation.
.PP
\&\fB11.5 Address Classes\fR
.PP
Sometimes information about different kinds of addresses is available
via the debug information.  For example, some programming environments
define addresses of several different sizes.  If the debug information
distinguishes these kinds of address classes through either the size
info (e.g, `\fBDW_AT_byte_size\fR' in \s-1DWARF 2\s0) or through an explicit address
class attribute (e.g, `\fBDW_AT_address_class\fR' in \s-1DWARF 2\s0), the following
macros should be defined in order to disambiguate these types within
\&\s-1GDB\s0 as well as provide the added information to a \s-1GDB\s0 user when
printing type expressions.
.PP
\&\-\- Function: int gdbarch_address_class_type_flags (struct gdbarch
*GDBARCH, int \s-1BYTE_SIZE,\s0 int \s-1DWARF2_ADDR_CLASS\s0)
Returns the type flags needed to construct a pointer type whose
size is \s-1BYTE_SIZE\s0 and whose address class is \s-1DWARF2_ADDR_CLASS.\s0
This function is normally called from within a symbol reader.  See
`\fBdwarf2read.c\fR'.
.PP
\&\-\- Function: char * gdbarch_address_class_type_flags_to_name (struct
gdbarch *GDBARCH, int \s-1TYPE_FLAGS\s0)
Given the type flags representing an address class qualifier,
return its name.
.PP
\&\-\- Function: int gdbarch_address_class_name_to_type_flags (struct
gdbarch *GDBARCH, int \s-1NAME,\s0 int *TYPE_FLAGS_PTR)
Given an address qualifier name, set the `\fBint\fR' referenced by
\&\s-1TYPE_FLAGS_PTR\s0 to the type flags for that address class qualifier.
.PP
Since the need for address classes is rather rare, none of the
address class functions are defined by default.  Predicate functions
are provided to detect when they are defined.
.PP
Consider a hypothetical architecture in which addresses are normally
32\-bits wide, but 16\-bit addresses are also supported.  Furthermore,
suppose that the \s-1DWARF 2\s0 information for this architecture simply uses
a `\fBDW_AT_byte_size\fR' value of 2 to indicate the use of one of these
\&\*(L"short\*(R" pointers.  The following functions could be defined to
implement the address class functions:
.PP
somearch_address_class_type_flags (int byte_size,
int dwarf2_addr_class)
{
if (byte_size == 2)
return \s-1TYPE_FLAG_ADDRESS_CLASS_1\s0;
else
return 0;
}
.PP
static char *
somearch_address_class_type_flags_to_name (int type_flags)
{
if (type_flags & \s-1TYPE_FLAG_ADDRESS_CLASS_1\s0)
return \*(L"short\*(R";
else
return \s-1NULL\s0;
}
.PP
int
somearch_address_class_name_to_type_flags (char *name,
int *type_flags_ptr)
{
if (strcmp (name, \*(L"short\*(R") == 0)
{
*type_flags_ptr = \s-1TYPE_FLAG_ADDRESS_CLASS_1\s0;
return 1;
}
else
return 0;
}
.PP
The qualifier `\fB\f(CB@short\fB\fR' is used in \s-1GDB\s0's type expressions to indicate
the presence of one of these \*(L"short\*(R" pointers.  For example if the
debug information indicates that `\fBshort_ptr_var\fR' is one of these short
pointers, \s-1GDB\s0 might show the following behavior:
.PP
(gdb) ptype short_ptr_var
type = int * \f(CW@short\fR
.PP
\&\fB11.6 Register Representation\fR
.PP
* Menu:
.PP
See also \*(L"Raw and Cooked Registers\*(R"
.PP
See also \*(L"Register Architecture Functions & Variables\*(R"
.PP
See also \*(L"Register Information Functions\*(R"
.PP
See also \*(L"Register and Memory Data\*(R"
.PP
See also \*(L"Register Caching\*(R"
.PP
\&\fB11.6.1 Raw and Cooked Registers\fR
.PP
\&\s-1GDB\s0 considers registers to be a set with members numbered linearly from
0 upwards.  The first part of that set corresponds to real physical
registers, the second part to any \*(L"pseudo-registers\*(R".  Pseudo-registers
have no independent physical existence, but are useful representations
of information within the architecture.  For example the OpenRISC 1000
architecture has up to 32 general purpose registers, which are
typically represented as 32\-bit (or 64\-bit) integers.  However the GPRs
are also used as operands to the floating point operations, and it
could be convenient to define a set of pseudo-registers, to show the
GPRs represented as floating point values.
.PP
For any architecture, the implementer will decide on a mapping from
hardware to \s-1GDB\s0 register numbers.  The registers corresponding to real
hardware are referred to as \*(L"raw\*(R" registers, the remaining registers are
\&\*(L"pseudo-registers\*(R".  The total register set (raw and pseudo) is called
the \*(L"cooked\*(R" register set.
.PP
\&\fB11.6.2 Functions and Variables Specifying the Register Architecture\fR
.PP
These `\fBstruct gdbarch\fR' functions and variables specify the number and
type of registers in the architecture.
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 read_pc (struct regcache *REGCACHE)
.PP
\&\-\- Architecture Function: void write_pc (struct regcache *REGCACHE,
\&\s-1CORE_ADDR VAL\s0)
Read or write the program counter.  The default value of both
functions is `\fB\s-1NULL\s0\fR' (no function available).  If the program
counter is just an ordinary register, it can be specified in
`\fBstruct gdbarch\fR' instead (see `\fBpc_regnum\fR' below) and it will be
read or written using the standard routines to access registers.
This function need only be specified if the program counter is not
an ordinary register.
.PP
Any register information can be obtained using the supplied
register cache, \s-1REGCACHE. \s0 *Note Register Caching: Register
Caching.
.PP
\&\-\- Architecture Function: void pseudo_register_read (struct gdbarch
*GDBARCH, struct regcache *REGCACHE, int \s-1REGNUM,\s0 const
gdb_byte *BUF)
.PP
\&\-\- Architecture Function: void pseudo_register_write (struct gdbarch
*GDBARCH, struct regcache *REGCACHE, int \s-1REGNUM,\s0 const
gdb_byte *BUF)
These functions should be defined if there are any
pseudo-registers.  The default value is `\fB\s-1NULL\s0\fR'.  \s-1REGNUM\s0 is the
number of the register to read or write (which will be a \*(L"cooked\*(R"
register number) and \s-1BUF\s0 is the buffer where the value read will be
placed, or from which the value to be written will be taken.  The
value in the buffer may be converted to or from a signed or
unsigned integral value using one of the utility functions (*note
Using Different Register and Memory Data Representations: Register
and Memory Data.).
.PP
The access should be for the specified architecture, \s-1GDBARCH. \s0 Any
register information can be obtained using the supplied register
cache, \s-1REGCACHE. \s0 *Note Register Caching: Register Caching.
.PP
\&\-\- Architecture Variable: int sp_regnum
This specifies the register holding the stack pointer, which may
be a raw or pseudo-register.  It defaults to \-1 (not defined), but
it is an error for it not to be defined.
.PP
The value of the stack pointer register can be accessed withing
\&\s-1GDB\s0 as the variable `\fB\f(CB$sp\fB\fR'.
.PP
\&\-\- Architecture Variable: int pc_regnum
This specifies the register holding the program counter, which may
be a raw or pseudo-register.  It defaults to \-1 (not defined).  If
`\fBpc_regnum\fR' is not defined, then the functions `\fBread_pc\fR' and
`\fBwrite_pc\fR' (see above) must be defined.
.PP
The value of the program counter (whether defined as a register, or
through `\fBread_pc\fR' and `\fBwrite_pc\fR') can be accessed withing \s-1GDB\s0 as
the variable `\fB\f(CB$pc\fB\fR'.
.PP
\&\-\- Architecture Variable: int ps_regnum
This specifies the register holding the processor status (often
called the status register), which may be a raw or
pseudo-register.  It defaults to \-1 (not defined).
.PP
If defined, the value of this register can be accessed withing \s-1GDB\s0
as the variable `\fB\f(CB$ps\fB\fR'.
.PP
\&\-\- Architecture Variable: int fp0_regnum
This specifies the first floating point register.  It defaults to
0.  `\fBfp0_regnum\fR' is not needed unless the target offers support
for floating point.
.PP
\&\fB11.6.3 Functions Giving Register Information\fR
.PP
These functions return information about registers.
.PP
\&\-\- Architecture Function: const char * register_name (struct gdbarch
*GDBARCH, int \s-1REGNUM\s0)
This function should convert a register number (raw or pseudo) to a
register name (as a C `\fBconst char *\fR').  This is used both to
determine the name of a register for output and to work out the
meaning of any register names used as input.  The function may
also return `\fB\s-1NULL\s0\fR', to indicate that \s-1REGNUM\s0 is not a valid
register.
.PP
For example with the OpenRISC 1000, \s-1GDB\s0 registers 0\-31 are the
General Purpose Registers, register 32 is the program counter and
register 33 is the supervision register (i.e. the processor status
register), which map to the strings `\fB\*(L"gpr00\*(R"\fR' through `\fB\*(L"gpr31\*(R"\fR',
`\fB\*(L"pc\*(R"\fR' and `\fB\*(L"sr\*(R"\fR' respectively. This means that the \s-1GDB\s0 command
`\fBprint \f(CB$gpr5\fB\fR' should print the value of the \s-1OR1K\s0 general purpose
register 5(1).
.PP
The default value for this function is `\fB\s-1NULL\s0\fR', meaning undefined.
It should always be defined.
.PP
The access should be for the specified architecture, \s-1GDBARCH.\s0
.PP
\&\-\- Architecture Function: struct type * register_type (struct gdbarch
*GDBARCH, int \s-1REGNUM\s0)
Given a register number, this function identifies the type of data
it may be holding, specified as a `\fBstruct type\fR'.  \s-1GDB\s0 allows
creation of arbitrary types, but a number of built in types are
provided (`\fBbuiltin_type_void\fR', `\fBbuiltin_type_int32\fR' etc), together
with functions to derive types from these.
.PP
Typically the program counter will have a type of \*(L"pointer to
function\*(R" (it points to code), the frame pointer and stack pointer
will have types of \*(L"pointer to void\*(R" (they point to data on the
stack) and all other integer registers will have a type of 32\-bit
integer or 64\-bit integer.
.PP
This information guides the formatting when displaying register
information.  The default value is `\fB\s-1NULL\s0\fR' meaning no information is
available to guide formatting when displaying registers.
.PP
\&\-\- Architecture Function: void print_registers_info (struct gdbarch
*GDBARCH, struct ui_file *FILE, struct frame_info *FRAME, int
\&\s-1REGNUM,\s0 int \s-1ALL\s0)
Define this function to print out one or all of the registers for
the \s-1GDB\s0 `\fBinfo registers\fR' command.  The default value is the
function `\fBdefault_print_registers_info\fR', which uses the register
type information (see `\fBregister_type\fR' above) to determine how each
register should be printed.  Define a custom version of this
function for fuller control over how the registers are displayed.
.PP
The access should be for the specified architecture, \s-1GDBARCH,\s0 with
output to the file specified by the User Interface Independent
Output file handle, \s-1FILE \s0(*note UI-Independent Output\*(--the
`\fBui_out\fR' Functions: UI-Independent Output.).
.PP
The registers should show their values in the frame specified by
\&\s-1FRAME. \s0 If \s-1REGNUM\s0 is \-1 and \s-1ALL\s0 is zero, then all the
\&\*(L"significant\*(R" registers should be shown (the implementer should
decide which registers are \*(L"significant\*(R"). Otherwise only the
value of the register specified by \s-1REGNUM\s0 should be output.  If
\&\s-1REGNUM\s0 is \-1 and \s-1ALL\s0 is non-zero (true), then the value of all
registers should be shown.
.PP
By default `\fBdefault_print_registers_info\fR' prints one register per
line, and if \s-1ALL\s0 is zero omits floating-point registers.
.PP
\&\-\- Architecture Function: void print_float_info (struct gdbarch
*GDBARCH, struct ui_file *FILE, struct frame_info *FRAME,
const char *ARGS)
Define this function to provide output about the floating point
unit and registers for the \s-1GDB\s0 `\fBinfo float\fR' command respectively.
The default value is `\fB\s-1NULL\s0\fR' (not defined), meaning no information
will be provided.
.PP
The \s-1GDBARCH\s0 and \s-1FILE\s0 and \s-1FRAME\s0 arguments have the same meaning as
in the `\fBprint_registers_info\fR' function above. The string \s-1ARGS\s0
contains any supplementary arguments to the `\fBinfo float\fR' command.
.PP
Define this function if the target supports floating point
operations.
.PP
\&\-\- Architecture Function: void print_vector_info (struct gdbarch
*GDBARCH, struct ui_file *FILE, struct frame_info *FRAME,
const char *ARGS)
Define this function to provide output about the vector unit and
registers for the \s-1GDB\s0 `\fBinfo vector\fR' command respectively.  The
default value is `\fB\s-1NULL\s0\fR' (not defined), meaning no information will
be provided.
.PP
The \s-1GDBARCH, FILE\s0 and \s-1FRAME\s0 arguments have the same meaning as in
the `\fBprint_registers_info\fR' function above.  The string \s-1ARGS\s0
contains any supplementary arguments to the `\fBinfo vector\fR' command.
.PP
Define this function if the target supports vector operations.
.PP
\&\-\- Architecture Function: int register_reggroup_p (struct gdbarch
*GDBARCH, int \s-1REGNUM,\s0 struct reggroup *GROUP)
\&\s-1GDB\s0 groups registers into different categories (general, vector,
floating point etc).  This function, given a register, \s-1REGNUM,\s0 and
group, \s-1GROUP,\s0 returns 1 (true) if the register is in the group and
0 (false) otherwise.
.PP
The information should be for the specified architecture, \s-1GDBARCH\s0
.PP
The default value is the function `\fBdefault_register_reggroup_p\fR'
which will do a reasonable job based on the type of the register
(see the function `\fBregister_type\fR' above), with groups for general
purpose registers, floating point registers, vector registers and
raw (i.e not pseudo) registers.
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) Historically, \s-1GDB\s0 always had a concept of a frame pointer
register, which could be accessed via the \s-1GDB\s0 variable, `\fB\f(CB$fp\fB\fR'.  That
concept is now deprecated, recognizing that not all architectures have
a frame pointer.  However if an architecture does have a frame pointer
register, and defines a register or pseudo-register with the name
`\fB\*(L"fp\*(R"\fR', then that register will be used as the value of the `\fB\f(CB$fp\fB\fR'
variable.
.PP
\&\fB11.6.4 Using Different Register and Memory Data Representations\fR
.PP
Some architectures have different representations of data objects,
depending whether the object is held in a register or memory.  For
example:
.PP
* The Alpha architecture can represent 32 bit integer values in
floating-point registers.
.PP
* The x86 architecture supports 80\-bit floating-point registers.  The
`\fBlong double\fR' data type occupies 96 bits in memory but only 80
bits when stored in a register.
.PP
In general, the register representation of a data type is determined
by the architecture, or \s-1GDB\s0's interface to the architecture, while the
memory representation is determined by the Application Binary Interface.
.PP
For almost all data types on almost all architectures, the two
representations are identical, and no special handling is needed.
However, they do occasionally differ.  An architecture may define the
following `\fBstruct gdbarch\fR' functions to request conversions between the
register and memory representations of a data type:
.PP
\&\-\- Architecture Function: int gdbarch_convert_register_p (struct
gdbarch *GDBARCH, int \s-1REG\s0)
Return non-zero (true) if the representation of a data value
stored in this register may be different to the representation of
that same data value when stored in memory.  The default value is
`\fB\s-1NULL\s0\fR' (undefined).
.PP
If this function is defined and returns non-zero, the `struct
gdbarch' functions `\fBgdbarch_register_to_value\fR' and
`\fBgdbarch_value_to_register\fR' (see below) should be used to perform
any necessary conversion.
.PP
If defined, this function should return zero for the register's
native type, when no conversion is necessary.
.PP
\&\-\- Architecture Function: void gdbarch_register_to_value (struct
gdbarch *GDBARCH, int \s-1REG,\s0 struct type *TYPE, char *FROM,
char *TO)
Convert the value of register number \s-1REG\s0 to a data object of type
\&\s-1TYPE. \s0 The buffer at \s-1FROM\s0 holds the register's value in raw
format; the converted value should be placed in the buffer at \s-1TO.\s0
.PP
_Note:_ `\fBgdbarch_register_to_value\fR' and
`\fBgdbarch_value_to_register\fR' take their \s-1REG\s0 and \s-1TYPE\s0 arguments
in different orders.
.PP
`\fBgdbarch_register_to_value\fR' should only be used with registers for
which the `\fBgdbarch_convert_register_p\fR' function returns a non-zero
value.
.PP
\&\-\- Architecture Function: void gdbarch_value_to_register (struct
gdbarch *GDBARCH, struct type *TYPE, int \s-1REG,\s0 char *FROM,
char *TO)
Convert a data value of type \s-1TYPE\s0 to register number \s-1REG\s0' raw
format.
.PP
_Note:_ `\fBgdbarch_register_to_value\fR' and
`\fBgdbarch_value_to_register\fR' take their \s-1REG\s0 and \s-1TYPE\s0 arguments
in different orders.
.PP
`\fBgdbarch_value_to_register\fR' should only be used with registers for
which the `\fBgdbarch_convert_register_p\fR' function returns a non-zero
value.
.PP
\&\fB11.6.5 Register Caching\fR
.PP
Caching of registers is used, so that the target does not need to be
accessed and reanalyzed multiple times for each register in
circumstances where the register value cannot have changed.
.PP
\&\s-1GDB\s0 provides `\fBstruct regcache\fR', associated with a particular `struct
gdbarch' to hold the cached values of the raw registers.  A set of
functions is provided to access both the raw registers (with `\fBraw\fR' in
their name) and the full set of cooked registers (with `\fBcooked\fR' in
their name).  Functions are provided to ensure the register cache is
kept synchronized with the values of the actual registers in the target.
.PP
Accessing registers through the `\fBstruct regcache\fR' routines will
ensure that the appropriate `\fBstruct gdbarch\fR' functions are called when
necessary to access the underlying target architecture.  In general
users should use the \*(L"cooked\*(R" functions, since these will map to the
\&\*(L"raw\*(R" functions automatically as appropriate.
.PP
The two key functions are `\fBregcache_cooked_read\fR' and
`\fBregcache_cooked_write\fR' which read or write a register from or to a
byte buffer (type `\fBgdb_byte *\fR').  For convenience the wrapper functions
`\fBregcache_cooked_read_signed\fR', `\fBregcache_cooked_read_unsigned\fR',
`\fBregcache_cooked_write_signed\fR' and `\fBregcache_cooked_write_unsigned\fR' are
provided, which read or write the value using the buffer and convert to
or from an integral value as appropriate.
.PP
\&\fB11.7 Frame Interpretation\fR
.PP
* Menu:
.PP
See also \*(L"All About Stack Frames\*(R"
.PP
See also \*(L"Frame Handling Terminology\*(R"
.PP
See also \*(L"Prologue Caches\*(R"
.PP
See also \*(L"Functions and Variable to Analyze Frames\*(R"
.PP
See also \*(L"Functions to Access Frame Data\*(R"
.PP
See also \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R"
.PP
\&\fB11.7.1 All About Stack Frames\fR
.PP
\&\s-1GDB\s0 needs to understand the stack on which local (automatic) variables
are stored.  The area of the stack containing all the local variables
for a function invocation is known as the \*(L"stack frame\*(R" for that
function (or colloquially just as the \*(L"frame\*(R").  In turn the function
that called the function will have its stack frame, and so on back
through the chain of functions that have been called.
.PP
Almost all architectures have one register dedicated to point to the
end of the stack (the \*(L"stack pointer\*(R").  Many have a second register
which points to the start of the currently active stack frame (the
\&\*(L"frame pointer\*(R").  The specific arrangements for an architecture are a
key part of the \s-1ABI.\s0
.PP
A diagram helps to explain this.  Here is a simple program to compute
factorials:
.PP
#include <stdio.h>
int fact (int n)
{
if (0 == n)
{
return 1;
}
else
{
return n * fact (n \- 1);
}
}
.PP
main ()
{
int i;
.PP
for (i = 0; i < 10; i++)
{
int   f = fact (i);
printf (\*(L"%d! = \f(CW%d\fR\en\*(R", i, f);
}
}
.PP
Consider the state of the stack when the code reaches line 6 after
the main program has called `\fBfact (3)\fR'.  The chain of function calls
will be `\fBmain ()\fR', `\fBfact (3)\fR', `\fBfact (2)\fR', `\fBfact (1)\fR' and `\fBfact (0)\fR'.
.PP
In this illustration the stack is falling (as used for example by the
OpenRISC 1000 \s-1ABI\s0).  The stack pointer (\s-1SP\s0) is at the end of the stack
(lowest address) and the frame pointer (\s-1FP\s0) is at the highest address
in the current stack frame.  The following diagram shows how the stack
looks.
.PP
^    \->|            |
Frame             |   |  |            |
Number          \- |   |  |============|       int fact (int n)
|  |   |  |   i = 3    |       {
|  |   |  |\-\-\-\-\-\-\-\-\-\-\-\-|         if (0 == n) {
|  |   |  |   f = ?    |           return  1;  <\-\-\-\-\-\-\-\- \s-1PC\s0
#4 \fImain()\fR   <   |   |  |\-\-\-\-\-\-\-\-\-\-\-\-|        }
|  |   |  |            |         else {
|  |  \-+\->|\-\-\-\-\-\-\-\-\-\-\-\-|   \-\-\->    return n * fact (n \- 1);
|   \-+\-+\-\-+\-\-\-\-\-o      |  |      }
=   | |  |============|  |    }
|    | |  |   n = 3    |  |
|    | |  |\-\-\-\-\-\-\-\-\-\-\-\-|  |    main ()
#3 fact (3) <     | |  |     o\-\-\-\-\-\-\-\-\-+\-   {
|   \-+\-+\->|\-\-\-\-\-\-\-\-\-\-\-\-|  | |    int  i;
|  | |  \-\-+\-\-\-\-\-o      |  | |
= | |    |============|  | |    for (i = 0; i < 10; i++) {
|  | |    |   n = 2    |  |  \->    int  f = fact (i);
|  | |    |\-\-\-\-\-\-\-\-\-\-\-\-|  |        printf (\*(L"%d! = \f(CW%d\fR\en\*(R", i , f);
#2 fact (2) <   | |    |     o\-\-\-\-\-\-+\-\-|      }
|  | |  \->|\-\-\-\-\-\-\-\-\-\-\-\-|  |    }
|  |  \-+\-\-+\-\-\-\-\-o      |  |
= |   |  |============|  |
|  |   |  |   n = 1    |  |
|  |   |  |\-\-\-\-\-\-\-\-\-\-\-\-|  |
#1 fact (1) <   |   |  |     o\-\-\-\-\-\-+\-\-|
|  |   |  |\-\-\-\-\-\-\-\-\-\-\-\-|  |
|   \-\-\-|\-\-+\-\-\-\-\-o      |<\-+\-\-\-\-\-\-\- \s-1FP\s0
=     |  |============|  |                   |
|      |  |   n = 0    |  |                   |
|      |  |\-\-\-\-\-\-\-\-\-\-\-\-|  |                   |
#0 fact (0) <       |  |     o\-\-\-\-\-\-\-\-\-                    |
|      |  |\-\-\-\-\-\-\-\-\-\-\-\-|                      |
|       \-\-+\-\-\-\-\-o      |<\-\-\-\-\-\-\-\-\- \s-1SP        \s0 |
=        |============|                      |
|         |  Red Zone  |                      v
|         \e/\e/\e/\e/\e/\e/\e/                 Direction of
#\-1         <          \e/\e/\e/\e/\e/\e/\e/                 stack growth
|         |            |
.PP
In each stack frame, offset 0 from the stack pointer is the frame
pointer of the previous frame and offset 4 (this is illustrating a
32\-bit architecture) from the stack pointer is the return address.
Local variables are indexed from the frame pointer, with negative
indexes.  In the function `\fBfact\fR', offset \-4 from the frame pointer is
the argument N.  In the `\fBmain\fR' function, offset \-4 from the frame
pointer is the local variable I and offset \-8 from the frame pointer is
the local variable F(1).
.PP
It is very easy to get confused when examining stacks.  \s-1GDB\s0 has
terminology it uses rigorously throughout.  The stack frame of the
function currently executing, or where execution stopped is numbered
zero.  In this example frame #0 is the stack frame of the call to
`\fBfact (0)\fR'.  The stack frame of its calling function (`\fBfact (1)\fR' in
this case) is numbered #1 and so on back through the chain of calls.
.PP
The main \s-1GDB\s0 data structure describing frames is
`\fBstruct frame_info\fR'.  It is not used directly, but only via its
accessor functions.  `\fBframe_info\fR' includes information about the
registers in the frame and a pointer to the code of the function with
which the frame is associated.  The entire stack is represented as a
linked list of `\fBframe_info\fR' structs.
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) This is a simplified example for illustrative purposes only.
Good optimizing compilers would not put anything on the stack for such
simple functions.  Indeed they might eliminate the recursion and use of
the stack entirely!
.PP
\&\fB11.7.2 Frame Handling Terminology\fR
.PP
It is easy to get confused when referencing stack frames.  \s-1GDB\s0 uses
some precise terminology.
.PP
* \*(L"\s-1THIS\*(R"\s0 frame is the frame currently under consideration.
.PP
* The \*(L"\s-1NEXT\*(R"\s0 frame, also sometimes called the inner or newer frame
is the frame of the function called by the function of \s-1THIS\s0 frame.
.PP
* The \*(L"\s-1PREVIOUS\*(R"\s0 frame, also sometimes called the outer or older
frame is the frame of the function which called the function of
\&\s-1THIS\s0 frame.
.PP
So in the example in the previous section (*note All About Stack
Frames: All About Stack Frames.), if \s-1THIS\s0 frame is #3 (the call to
`\fBfact (3)\fR'), the \s-1NEXT\s0 frame is frame #2 (the call to `\fBfact (2)\fR') and
the \s-1PREVIOUS\s0 frame is frame #4 (the call to `\fBmain ()\fR').
.PP
The \*(L"innermost\*(R" frame is the frame of the current executing
function, or where the program stopped, in this example, in the middle
of the call to `\fBfact (0))\fR'.  It is always numbered frame #0.
.PP
The \*(L"base\*(R" of a frame is the address immediately before the start of
the \s-1NEXT\s0 frame.  For a stack which grows down in memory (a \*(L"falling\*(R"
stack) this will be the lowest address and for a stack which grows up
in memory (a \*(L"rising\*(R" stack) this will be the highest address in the
frame.
.PP
\&\s-1GDB\s0 functions to analyze the stack are typically given a pointer to
the \s-1NEXT\s0 frame to determine information about \s-1THIS\s0 frame.  Information
about \s-1THIS\s0 frame includes data on where the registers of the \s-1PREVIOUS\s0
frame are stored in this stack frame.  In this example the frame
pointer of the \s-1PREVIOUS\s0 frame is stored at offset 0 from the stack
pointer of \s-1THIS\s0 frame.
.PP
The process whereby a function is given a pointer to the \s-1NEXT\s0 frame
to work out information about \s-1THIS\s0 frame is referred to as \*(L"unwinding\*(R".
The \s-1GDB\s0 functions involved in this typically include unwind in their
name.
.PP
The process of analyzing a target to determine the information that
should go in struct frame_info is called \*(L"sniffing\*(R".  The functions
that carry this out are called sniffers and typically include sniffer
in their name.  More than one sniffer may be required to extract all
the information for a particular frame.
.PP
Because so many functions work using the \s-1NEXT\s0 frame, there is an
issue about addressing the innermost frame\*(--it has no \s-1NEXT\s0 frame.  To
solve this \s-1GDB\s0 creates a dummy frame #\-1, known as the \*(L"sentinel\*(R" frame.
.PP
\&\fB11.7.3 Prologue Caches\fR
.PP
All the frame sniffing functions typically examine the code at the
start of the corresponding function, to determine the state of
registers.  The \s-1ABI\s0 will save old values and set new values of key
registers at the start of each function in what is known as the
function \*(L"prologue\*(R".
.PP
For any particular stack frame this data does not change, so all the
standard unwinding functions, in addition to receiving a pointer to the
\&\s-1NEXT\s0 frame as their first argument, receive a pointer to a \*(L"prologue
cache\*(R" as their second argument.  This can be used to store values
associated with a particular frame, for reuse on subsequent calls
involving the same frame.
.PP
It is up to the user to define the structure used (it is a `\fBvoid *\fR'
pointer) and arrange allocation and deallocation of storage.  However
for general use, \s-1GDB\s0 provides `\fBstruct trad_frame_cache\fR', with a set of
accessor routines.  This structure holds the stack and code address of
\&\s-1THIS\s0 frame, the base address of the frame, a pointer to the struct
`\fBframe_info\fR' for the \s-1NEXT\s0 frame and details of where the registers of
the \s-1PREVIOUS\s0 frame may be found in \s-1THIS\s0 frame.
.PP
Typically the first time any sniffer function is called with \s-1NEXT\s0
frame, the prologue sniffer for \s-1THIS\s0 frame will be `\fB\s-1NULL\s0\fR'.  The sniffer
will analyze the frame, allocate a prologue cache structure and
populate it.  Subsequent calls using the same \s-1NEXT\s0 frame will pass in
this prologue cache, so the data can be returned with no additional
analysis.
.PP
\&\fB11.7.4 Functions and Variable to Analyze Frames\fR
.PP
These struct `\fBgdbarch\fR' functions and variable should be defined to
provide analysis of the stack frame and allow it to be adjusted as
required.
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 skip_prologue (struct gdbarch
*GDBARCH, \s-1CORE_ADDR PC\s0)
The prologue of a function is the code at the beginning of the
function which sets up the stack frame, saves the return address
etc.  The code representing the behavior of the function starts
after the prologue.
.PP
This function skips past the prologue of a function if the program
counter, \s-1PC,\s0 is within the prologue of a function.  The result is
the program counter immediately after the prologue.  With modern
optimizing compilers, this may be a far from trivial exercise.
However the required information may be within the binary as
\&\s-1DWARF2\s0 debugging information, making the job much easier.
.PP
The default value is `\fB\s-1NULL\s0\fR' (not defined).  This function should
always be provided, but can take advantage of \s-1DWARF2\s0 debugging
information, if that is available.
.PP
\&\-\- Architecture Function: int inner_than (\s-1CORE_ADDR LHS, CORE_ADDR RHS\s0)
Given two frame or stack pointers, return non-zero (true) if the
first represents the \*(L"inner\*(R" stack frame and 0 (false) otherwise.
This is used to determine whether the target has a stack which
grows up in memory (rising stack) or grows down in memory (falling
stack).  *Note All About Stack Frames: All About Stack Frames, for
an explanation of \*(L"inner\*(R" frames.
.PP
The default value of this function is `\fB\s-1NULL\s0\fR' and it should always
be defined.  However for almost all architectures one of the
built-in functions can be used: `\fBcore_addr_lessthan\fR' (for stacks
growing down in memory) or `\fBcore_addr_greaterthan\fR' (for stacks
growing up in memory).
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 frame_align (struct gdbarch
*GDBARCH, \s-1CORE_ADDR ADDRESS\s0)
The architecture may have constraints on how its frames are
aligned.  For example the OpenRISC 1000 \s-1ABI\s0 requires stack frames
to be double-word aligned, but 32\-bit versions of the architecture
allocate single-word values to the stack.  Thus extra padding may
be needed at the end of a stack frame.
.PP
Given a proposed address for the stack pointer, this function
returns a suitably aligned address (by expanding the stack frame).
.PP
The default value is `\fB\s-1NULL\s0\fR' (undefined).  This function should be
defined for any architecture where it is possible the stack could
become misaligned.  The utility functions `\fBalign_down\fR' (for falling
stacks) and `\fBalign_up\fR' (for rising stacks) will facilitate the
implementation of this function.
.PP
\&\-\- Architecture Variable: int frame_red_zone_size
Some ABIs reserve space beyond the end of the stack for use by leaf
functions without prologue or epilogue or by exception handlers
(for example the OpenRISC 1000).
.PP
This is known as a \*(L"red zone\*(R" (\s-1AMD\s0 terminology).  The \s-1AMD64 \s0(nee
x86\-64) \s-1ABI\s0 documentation refers to the \*(L"red zone\*(R" when describing
this scratch area.
.PP
The default value is 0.  Set this field if the architecture has
such a red zone.  The value must be aligned as required by the \s-1ABI
\&\s0(see `\fBframe_align\fR' above for an explanation of stack frame
alignment).
.PP
\&\fB11.7.5 Functions to Access Frame Data\fR
.PP
These functions provide access to key registers and arguments in the
stack frame.
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 unwind_pc (struct gdbarch
*GDBARCH, struct frame_info *NEXT_FRAME)
This function is given a pointer to the \s-1NEXT\s0 stack frame (*note
All About Stack Frames: All About Stack Frames, for how frames are
represented) and returns the value of the program counter in the
\&\s-1PREVIOUS\s0 frame (i.e. the frame of the function that called \s-1THIS\s0
one).  This is commonly referred to as the \*(L"return address\*(R".
.PP
The implementation, which must be frame agnostic (work with any
frame), is typically no more than:
.PP
\&\s-1ULONGEST\s0 pc;
pc = frame_unwind_register_unsigned (next_frame, \s-1ARCH_PC_REGNUM\s0);
return gdbarch_addr_bits_remove (gdbarch, pc);
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 unwind_sp (struct gdbarch
*GDBARCH, struct frame_info *NEXT_FRAME)
This function is given a pointer to the \s-1NEXT\s0 stack frame (*note
All About Stack Frames: All About Stack Frames. for how frames are
represented) and returns the value of the stack pointer in the
\&\s-1PREVIOUS\s0 frame (i.e. the frame of the function that called \s-1THIS\s0
one).
.PP
The implementation, which must be frame agnostic (work with any
frame), is typically no more than:
.PP
\&\s-1ULONGEST\s0 sp;
sp = frame_unwind_register_unsigned (next_frame, \s-1ARCH_SP_REGNUM\s0);
return gdbarch_addr_bits_remove (gdbarch, sp);
.PP
\&\-\- Architecture Function: int frame_num_args (struct gdbarch *GDBARCH,
struct frame_info *THIS_FRAME)
This function is given a pointer to \s-1THIS\s0 stack frame (*note All
About Stack Frames: All About Stack Frames. for how frames are
represented), and returns the number of arguments that are being
passed, or \-1 if not known.
.PP
The default value is `\fB\s-1NULL\s0\fR' (undefined), in which case the number
of arguments passed on any stack frame is always unknown.  For many
architectures this will be a suitable default.
.PP
\&\fB11.7.6 Analyzing Stacks\*(--Frame Sniffers\fR
.PP
When a program stops, \s-1GDB\s0 needs to construct the chain of struct
`\fBframe_info\fR' representing the state of the stack using appropriate
\&\*(L"sniffers\*(R".
.PP
Each architecture requires appropriate sniffers, but they do not form
entries in `\fBstruct gdbarch\fR', since more than one sniffer may be
required and a sniffer may be suitable for more than one
`\fBstruct gdbarch\fR'.  Instead sniffers are associated with architectures
using the following functions.
.PP
* `\fBframe_unwind_append_sniffer\fR' is used to add a new sniffer to
analyze \s-1THIS\s0 frame when given a pointer to the \s-1NEXT\s0 frame.
.PP
* `\fBframe_base_append_sniffer\fR' is used to add a new sniffer which can
determine information about the base of a stack frame.
.PP
* `\fBframe_base_set_default\fR' is used to specify the default base
sniffer.
.PP
These functions all take a reference to `\fBstruct gdbarch\fR', so they
are associated with a specific architecture.  They are usually called
in the `\fBgdbarch\fR' initialization function, after the `\fBgdbarch\fR' struct
has been set up.  Unless a default has been set, the most recently
appended sniffer will be tried first.
.PP
The main frame unwinding sniffer (as set by
`\fBframe_unwind_append_sniffer)\fR' returns a structure specifying a set of
sniffing functions:
.PP
struct frame_unwind
{
enum frame_type            type;
frame_this_id_ftype       *this_id;
frame_prev_register_ftype *prev_register;
const struct frame_data   *unwind_data;
frame_sniffer_ftype       *sniffer;
frame_prev_pc_ftype       *prev_pc;
frame_dealloc_cache_ftype *dealloc_cache;
};
.PP
The `\fBtype\fR' field indicates the type of frame this sniffer can
handle: normal, dummy (*note Functions Creating Dummy Frames: Functions
Creating Dummy Frames.), signal handler or sentinel.  Signal handlers
sometimes have their own simplified stack structure for efficiency, so
may need their own handlers.
.PP
The `\fBunwind_data\fR' field holds additional information which may be
relevant to particular types of frame.  For example it may hold
additional information for signal handler frames.
.PP
The remaining fields define functions that yield different types of
information when given a pointer to the \s-1NEXT\s0 stack frame.  Not all
functions need be provided.  If an entry is `\fB\s-1NULL\s0\fR', the next sniffer
will be tried instead.
.PP
* `\fBthis_id\fR' determines the stack pointer and function (code entry
point) for \s-1THIS\s0 stack frame.
.PP
* `\fBprev_register\fR' determines where the values of registers for the
\&\s-1PREVIOUS\s0 stack frame are stored in \s-1THIS\s0 stack frame.
.PP
* `\fBsniffer\fR' takes a look at \s-1THIS\s0 frame's registers to determine if
this is the appropriate unwinder.
.PP
* `\fBprev_pc\fR' determines the program counter for \s-1THIS\s0 frame.  Only
needed if the program counter is not an ordinary register (*note
Functions and Variables Specifying the Register Architecture:
Register Architecture Functions & Variables.).
.PP
* `\fBdealloc_cache\fR' frees any additional memory associated with the
prologue cache for this frame (*note Prologue Caches: Prologue
Caches.).
.PP
In general it is only the `\fBthis_id\fR' and `\fBprev_register\fR' fields that
need be defined for custom sniffers.
.PP
The frame base sniffer is much simpler.  It is a
`\fBstruct frame_base\fR', which refers to the corresponding `\fBframe_unwind\fR'
struct and whose fields refer to functions yielding various addresses
within the frame.
.PP
struct frame_base
{
const struct frame_unwind *unwind;
frame_this_base_ftype     *this_base;
frame_this_locals_ftype   *this_locals;
frame_this_args_ftype     *this_args;
};
.PP
All the functions referred to take a pointer to the \s-1NEXT\s0 frame as
argument. The function referred to by `\fBthis_base\fR' returns the base
address of \s-1THIS\s0 frame, the function referred to by `\fBthis_locals\fR'
returns the base address of local variables in \s-1THIS\s0 frame and the
function referred to by `\fBthis_args\fR' returns the base address of the
function arguments in this frame.
.PP
As described above, the base address of a frame is the address
immediately before the start of the \s-1NEXT\s0 frame.  For a falling stack,
this is the lowest address in the frame and for a rising stack it is
the highest address in the frame.  For most architectures the same
address is also the base address for local variables and arguments, in
which case the same function can be used for all three \fIentries\fR\|(1).
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) It is worth noting that if it cannot be determined in any other
way (for example by there being a register with the name `\fB\*(L"fp\*(R"\fR'), then
the result of the `\fBthis_base\fR' function will be used as the value of the
frame pointer variable `\fB\f(CB$fp\fB\fR' in \s-1GDB. \s0 This is very often not correct
(for example with the OpenRISC 1000, this value is the stack pointer,
`\fB\f(CB$sp\fB\fR').  In this case a register (raw or pseudo) with the name `\fB\*(L"fp\*(R"\fR'
should be defined.  It will be used in preference as the value of `\fB\f(CB$fp\fB\fR'.
.PP
\&\fB11.8 Inferior Call Setup\fR
.PP
* Menu:
.PP
See also \*(L"About Dummy Frames\*(R"
.PP
See also \*(L"Functions Creating Dummy Frames\*(R"
.PP
\&\fB11.8.1 About Dummy Frames\fR
.PP
\&\s-1GDB\s0 can call functions in the target code (for example by using the
`\fBcall\fR' or `\fBprint\fR' commands).  These functions may be breakpointed, and
it is essential that if a function does hit a breakpoint, commands like
`\fBbacktrace\fR' work correctly.
.PP
This is achieved by making the stack look as though the function had
been called from the point where \s-1GDB\s0 had previously stopped.  This
requires that \s-1GDB\s0 can set up stack frames appropriate for such function
calls.
.PP
\&\fB11.8.2 Functions Creating Dummy Frames\fR
.PP
The following functions provide the functionality to set up such
\&\*(L"dummy\*(R" stack frames.
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 push_dummy_call (struct gdbarch
*GDBARCH, struct value *FUNCTION, struct regcache *REGCACHE,
\&\s-1CORE_ADDR BP_ADDR,\s0 int \s-1NARGS,\s0 struct value **ARGS, \s-1CORE_ADDR
SP,\s0 int \s-1STRUCT_RETURN, CORE_ADDR STRUCT_ADDR\s0)
This function sets up a dummy stack frame for the function about
to be called.  `\fBpush_dummy_call\fR' is given the arguments to be
passed and must copy them into registers or push them on to the
stack as appropriate for the \s-1ABI.\s0
.PP
\&\s-1FUNCTION\s0 is a pointer to the function that will be called and
\&\s-1REGCACHE\s0 the register cache from which values should be obtained.
\&\s-1BP_ADDR\s0 is the address to which the function should return (which
is breakpointed, so \s-1GDB\s0 can regain control, hence the name).
\&\s-1NARGS\s0 is the number of arguments to pass and \s-1ARGS\s0 an array
containing the argument values.  \s-1STRUCT_RETURN\s0 is non-zero (true)
if the function returns a structure, and if so \s-1STRUCT_ADDR\s0 is the
address in which the structure should be returned.
.PP
After calling this function, \s-1GDB\s0 will pass control to the target
at the address of the function, which will find the stack and
registers set up just as expected.
.PP
The default value of this function is `\fB\s-1NULL\s0\fR' (undefined).  If the
function is not defined, then \s-1GDB\s0 will not allow the user to call
functions within the target being debugged.
.PP
\&\-\- Architecture Function: struct frame_id unwind_dummy_id (struct
gdbarch *GDBARCH, struct frame_info *NEXT_FRAME)
This is the inverse of `\fBpush_dummy_call\fR' which restores the stack
pointer and program counter after a call to evaluate a function
using a dummy stack frame.  The result is a `\fBstruct frame_id\fR',
which contains the value of the stack pointer and program counter
to be used.
.PP
The \s-1NEXT\s0 frame pointer is provided as argument, \s-1NEXT_FRAME.  THIS\s0
frame is the frame of the dummy function, which can be unwound, to
yield the required stack pointer and program counter from the
\&\s-1PREVIOUS\s0 frame.
.PP
The default value is `\fB\s-1NULL\s0\fR' (undefined).  If `\fBpush_dummy_call\fR' is
defined, then this function should also be defined.
.PP
\&\-\- Architecture Function: \s-1CORE_ADDR\s0 push_dummy_code (struct gdbarch
*GDBARCH, \s-1CORE_ADDR SP, CORE_ADDR FUNADDR,\s0 struct value
**ARGS, int \s-1NARGS,\s0 struct type *VALUE_TYPE, \s-1CORE_ADDR\s0
*REAL_PC, \s-1CORE_ADDR\s0 *BP_ADDR, struct regcache *REGCACHE)
If this function is not defined (its default value is `\fB\s-1NULL\s0\fR'), a
dummy call will use the entry point of the currently loaded code
on the target as its return address.  A temporary breakpoint will
be set there, so the location must be writable and have room for a
breakpoint.
.PP
It is possible that this default is not suitable.  It might not be
writable (in \s-1ROM\s0 possibly), or the \s-1ABI\s0 might require code to be
executed on return from a call to unwind the stack before the
breakpoint is encountered.
.PP
If either of these is the case, then push_dummy_code should be
defined to push an instruction sequence onto the end of the stack
to which the dummy call should return.
.PP
The arguments are essentially the same as those to
`\fBpush_dummy_call\fR'.  However the function is provided with the type
of the function result, \s-1VALUE_TYPE, BP_ADDR\s0 is used to return a
value (the address at which the breakpoint instruction should be
inserted) and \s-1REAL PC\s0 is used to specify the resume address when
starting the call sequence.  The function should return the
updated innermost stack address.
.PP
_Note:_ This does require that code in the stack can be
executed.  Some Harvard architectures may not allow this.
.PP
\&\fB11.9 Adding support for debugging core files\fR
.PP
The prerequisite for adding core file support in \s-1GDB\s0 is to have core
file support in \s-1BFD.\s0
.PP
Once \s-1BFD\s0 support is available, writing the apropriate
`\fBregset_from_core_section\fR' architecture function should be all that is
needed in order to add support for core files in \s-1GDB.\s0
.PP
\&\fB11.10 Defining Other Architecture Features\fR
.PP
This section describes other functions and values in `\fBgdbarch\fR',
together with some useful macros, that you can use to define the target
architecture.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_addr_bits_remove (\s-1GDBARCH, ADDR\s0)\fR'
If a raw machine instruction address includes any bits that are not
really part of the address, then this function is used to zero
those bits in \s-1ADDR. \s0 This is only used for addresses of
instructions, and even then not in all contexts.
.PP
For example, the two low-order bits of the \s-1PC\s0 on the
Hewlett-Packard \s-1PA 2.0\s0 architecture contain the privilege level of
the corresponding instruction.  Since instructions must always be
aligned on four-byte boundaries, the processor masks out these
bits to generate the actual address of the instruction.
`\fBgdbarch_addr_bits_remove\fR' would then for example look like that:
arch_addr_bits_remove (\s-1CORE_ADDR\s0 addr)
{
return (addr &= ~0x3);
}
.PP
`\fBint address_class_name_to_type_flags (\s-1GDBARCH, NAME, TYPE_FLAGS_PTR\s0)\fR'
If \s-1NAME\s0 is a valid address class qualifier name, set the `\fBint\fR'
referenced by \s-1TYPE_FLAGS_PTR\s0 to the mask representing the qualifier
and return 1.  If \s-1NAME\s0 is not a valid address class qualifier name,
return 0.
.PP
The value for \s-1TYPE_FLAGS_PTR\s0 should be one of
`\fB\s-1TYPE_FLAG_ADDRESS_CLASS_1\s0\fR', `\fB\s-1TYPE_FLAG_ADDRESS_CLASS_2\s0\fR', or
possibly some combination of these values or'd together.  *Note
Address Classes: Target Architecture Definition.
.PP
`\fBint address_class_name_to_type_flags_p (\s-1GDBARCH\s0)\fR'
Predicate which indicates whether
`\fBaddress_class_name_to_type_flags\fR' has been defined.
.PP
`\fBint gdbarch_address_class_type_flags (\s-1GDBARCH, BYTE_SIZE, DWARF2_ADDR_CLASS\s0)\fR'
Given a pointers byte size (as described by the debug information)
and the possible `\fBDW_AT_address_class\fR' value, return the type flags
used by \s-1GDB\s0 to represent this address class.  The value returned
should be one of `\fB\s-1TYPE_FLAG_ADDRESS_CLASS_1\s0\fR',
`\fB\s-1TYPE_FLAG_ADDRESS_CLASS_2\s0\fR', or possibly some combination of these
values or'd together.  *Note Address Classes: Target Architecture
Definition.
.PP
`\fBint gdbarch_address_class_type_flags_p (\s-1GDBARCH\s0)\fR'
Predicate which indicates whether
`\fBgdbarch_address_class_type_flags_p\fR' has been defined.
.PP
`\fBconst char *gdbarch_address_class_type_flags_to_name (\s-1GDBARCH, TYPE_FLAGS\s0)\fR'
Return the name of the address class qualifier associated with the
type flags given by \s-1TYPE_FLAGS.\s0
.PP
`\fBint gdbarch_address_class_type_flags_to_name_p (\s-1GDBARCH\s0)\fR'
Predicate which indicates whether
`\fBgdbarch_address_class_type_flags_to_name\fR' has been defined.
*Note Address Classes: Target Architecture Definition.
.PP
`\fBvoid gdbarch_address_to_pointer (\s-1GDBARCH, TYPE, BUF, ADDR\s0)\fR'
Store in \s-1BUF\s0 a pointer of type \s-1TYPE\s0 representing the address \s-1ADDR,\s0
in the appropriate format for the current architecture.  This
function may safely assume that \s-1TYPE\s0 is either a pointer or a \*(C+
reference type.  *Note Pointers Are Not Always Addresses: Target
Architecture Definition.
.PP
`\fBint gdbarch_believe_pcc_promotion (\s-1GDBARCH\s0)\fR'
Used to notify if the compiler promotes a `\fBshort\fR' or `\fBchar\fR'
parameter to an `\fBint\fR', but still reports the parameter as its
original type, rather than the promoted type.
.PP
`\fBgdbarch_bits_big_endian (\s-1GDBARCH\s0)\fR'
This is used if the numbering of bits in the targets does *not*
match the endianism of the target byte order.  A value of 1 means
that the bits are numbered in a big-endian bit order, 0 means
little-endian.
.PP
`\fBset_gdbarch_bits_big_endian (\s-1GDBARCH, BITS_BIG_ENDIAN\s0)\fR'
Calling set_gdbarch_bits_big_endian with a value of 1 indicates
that the bits in the target are numbered in a big-endian bit
order, 0 indicates little-endian.
.PP
`\fB\s-1BREAKPOINT\s0\fR'
This is the character array initializer for the bit pattern to put
into memory where a breakpoint is set.  Although it's common to
use a trap instruction for a breakpoint, it's not required; for
instance, the bit pattern could be an invalid instruction.  The
breakpoint must be no longer than the shortest instruction of the
architecture.
.PP
`\fB\s-1BREAKPOINT\s0\fR' has been deprecated in favor of
`\fBgdbarch_breakpoint_from_pc\fR'.
.PP
`\fB\s-1BIG_BREAKPOINT\s0\fR'
`\fB\s-1LITTLE_BREAKPOINT\s0\fR'
Similar to \s-1BREAKPOINT,\s0 but used for bi-endian targets.
.PP
`\fB\s-1BIG_BREAKPOINT\s0\fR' and `\fB\s-1LITTLE_BREAKPOINT\s0\fR' have been deprecated in
favor of `\fBgdbarch_breakpoint_from_pc\fR'.
.PP
`\fBconst gdb_byte *gdbarch_breakpoint_from_pc (\s-1GDBARCH, PCPTR, LENPTR\s0)\fR'
Use the program counter to determine the contents and size of a
breakpoint instruction.  It returns a pointer to a static string
of bytes that encode a breakpoint instruction, stores the length
of the string to `\fB*LENPTR\fR', and adjusts the program counter (if
necessary) to point to the actual memory location where the
breakpoint should be inserted.  On input, the program counter
(`\fB*PCPTR\fR' is the encoded inferior's \s-1PC\s0 register.  If software
breakpoints are supported, the function sets this argument to the
\&\s-1PC\s0's plain address.  If software breakpoints are not supported,
the function returns \s-1NULL\s0 instead of the encoded breakpoint
instruction.
.PP
Although it is common to use a trap instruction for a breakpoint,
it's not required; for instance, the bit pattern could be an
invalid instruction.  The breakpoint must be no longer than the
shortest instruction of the architecture.
.PP
Provided breakpoint bytes can be also used by
`\fBbp_loc_is_permanent\fR' to detect permanent breakpoints.
`\fBgdbarch_breakpoint_from_pc\fR' should return an unchanged memory
copy if it was called for a location with permanent breakpoint as
some architectures use breakpoint instructions containing
arbitrary parameter value.
.PP
Replaces all the other \s-1BREAKPOINT\s0 macros.
.PP
`\fBint gdbarch_memory_insert_breakpoint (\s-1GDBARCH, BP_TGT\s0)\fR'
`\fBgdbarch_memory_remove_breakpoint (\s-1GDBARCH, BP_TGT\s0)\fR'
Insert or remove memory based breakpoints.  Reasonable defaults
(`\fBdefault_memory_insert_breakpoint\fR' and
`\fBdefault_memory_remove_breakpoint\fR' respectively) have been
provided so that it is not necessary to set these for most
architectures.  Architectures which may want to set
`\fBgdbarch_memory_insert_breakpoint\fR' and
`\fBgdbarch_memory_remove_breakpoint\fR' will likely have instructions
that are oddly sized or are not stored in a conventional manner.
.PP
It may also be desirable (from an efficiency standpoint) to define
custom breakpoint insertion and removal routines if
`\fBgdbarch_breakpoint_from_pc\fR' needs to read the target's memory for
some reason.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_adjust_breakpoint_address (\s-1GDBARCH, BPADDR\s0)\fR'
Given an address at which a breakpoint is desired, return a
breakpoint address adjusted to account for architectural
constraints on breakpoint placement.  This method is not needed by
most targets.
.PP
The FR-V target (see `\fBfrv\-tdep.c\fR') requires this method.  The FR-V
is a \s-1VLIW\s0 architecture in which a number of RISC-like instructions
are grouped (packed) together into an aggregate instruction or
instruction bundle.  When the processor executes one of these
bundles, the component instructions are executed in parallel.
.PP
In the course of optimization, the compiler may group instructions
from distinct source statements into the same bundle.  The line
number information associated with one of the latter statements
will likely refer to some instruction other than the first one in
the bundle.  So, if the user attempts to place a breakpoint on one
of these latter statements, \s-1GDB\s0 must be careful to _not_ place the
break instruction on any instruction other than the first one in
the bundle.  (Remember though that the instructions within a
bundle execute in parallel, so the _first_ instruction is the
instruction at the lowest address and has nothing to do with
execution order.)
.PP
The FR-V's `\fBgdbarch_adjust_breakpoint_address\fR' method will adjust a
breakpoint's address by scanning backwards for the beginning of
the bundle, returning the address of the bundle.
.PP
Since the adjustment of a breakpoint may significantly alter a
user's expectation, \s-1GDB\s0 prints a warning when an adjusted
breakpoint is initially set and each time that that breakpoint is
hit.
.PP
`\fBint gdbarch_call_dummy_location (\s-1GDBARCH\s0)\fR'
See the file `\fBinferior.h\fR'.
.PP
This method has been replaced by `\fBgdbarch_push_dummy_code\fR' (*note
gdbarch_push_dummy_code::).
.PP
`\fBint gdbarch_cannot_fetch_register (\s-1GDBARCH, REGUM\s0)\fR'
This function should return nonzero if \s-1REGNO\s0 cannot be fetched
from an inferior process.
.PP
`\fBint gdbarch_cannot_store_register (\s-1GDBARCH, REGNUM\s0)\fR'
This function should return nonzero if \s-1REGNO\s0 should not be written
to the target.  This is often the case for program counters,
status words, and other special registers.  This function returns
0 as default so that \s-1GDB\s0 will assume that all registers may be
written.
.PP
`\fBint gdbarch_convert_register_p (\s-1GDBARCH, REGNUM,\s0 struct type *TYPE)\fR'
Return non-zero if register \s-1REGNUM\s0 represents data values of type
\&\s-1TYPE\s0 in a non-standard form.  *Note Using Different Register and
Memory Data Representations: Target Architecture Definition.
.PP
`\fBint gdbarch_fp0_regnum (\s-1GDBARCH\s0)\fR'
This function returns the number of the first floating point
register, if the machine has such registers.  Otherwise, it
returns \-1.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_decr_pc_after_break (\s-1GDBARCH\s0)\fR'
This function shall return the amount by which to decrement the \s-1PC\s0
after the program encounters a breakpoint.  This is often the
number of bytes in `\fB\s-1BREAKPOINT\s0\fR', though not always.  For most
targets this value will be 0.
.PP
`\fB\s-1DISABLE_UNSETTABLE_BREAK \s0(\s-1ADDR\s0)\fR'
If defined, this should evaluate to 1 if \s-1ADDR\s0 is in a shared
library in which breakpoints cannot be set and so should be
disabled.
.PP
`\fBint gdbarch_dwarf2_reg_to_regnum (\s-1GDBARCH, DWARF2_REGNR\s0)\fR'
Convert \s-1DWARF2\s0 register number \s-1DWARF2_REGNR\s0 into \s-1GDB\s0 regnum.  If
not defined, no conversion will be performed.
.PP
`\fBint gdbarch_ecoff_reg_to_regnum (\s-1GDBARCH, ECOFF_REGNR\s0)\fR'
Convert \s-1ECOFF\s0 register number  \s-1ECOFF_REGNR\s0 into \s-1GDB\s0 regnum.  If
not defined, no conversion will be performed.
.PP
`\fB\s-1GCC_COMPILED_FLAG_SYMBOL\s0\fR'
`\fB\s-1GCC2_COMPILED_FLAG_SYMBOL\s0\fR'
If defined, these are the names of the symbols that \s-1GDB\s0 will look
for to detect that \s-1GCC\s0 compiled the file.  The default symbols are
`\fBgcc_compiled.\fR' and `\fBgcc2_compiled.\fR', respectively.  (Currently
only defined for the Delta 68.)
.PP
`\fBgdbarch_get_longjmp_target\fR'
This function determines the target \s-1PC\s0 address that `\fBlongjmp\fR' will
jump to, assuming that we have just stopped at a `\fBlongjmp\fR'
breakpoint.  It takes a `\fB\s-1CORE_ADDR\s0 *\fR' as argument, and stores the
target \s-1PC\s0 value through this pointer.  It examines the current
state of the machine as needed, typically by using a
manually-determined offset into the `\fBjmp_buf\fR'.  (While we might
like to get the offset from the target's `\fBjmpbuf.h\fR', that header
file cannot be assumed to be available when building a
cross-debugger.)
.PP
`\fB\s-1DEPRECATED_IBM6000_TARGET\s0\fR'
Shows that we are configured for an \s-1IBM RS/6000\s0 system.  This
conditional should be eliminated (\s-1FIXME\s0) and replaced by
feature-specific macros.  It was introduced in haste and we are
repenting at leisure.
.PP
`\fBI386_USE_GENERIC_WATCHPOINTS\fR'
An x86\-based target can define this to use the generic x86
watchpoint support; see *note I386_USE_GENERIC_WATCHPOINTS:
Algorithms.
.PP
`\fBgdbarch_in_function_epilogue_p (\s-1GDBARCH, ADDR\s0)\fR'
Returns non-zero if the given \s-1ADDR\s0 is in the epilogue of a
function.  The epilogue of a function is defined as the part of a
function where the stack frame of the function already has been
destroyed up to the final `\fBreturn from function call\fR' instruction.
.PP
`\fBint gdbarch_in_solib_return_trampoline (\s-1GDBARCH, PC, NAME\s0)\fR'
Define this function to return nonzero if the program is stopped
in the trampoline that returns from a shared library.
.PP
`\fBtarget_so_ops.in_dynsym_resolve_code (\s-1PC\s0)\fR'
Define this to return nonzero if the program is stopped in the
dynamic linker.
.PP
`\fB\s-1SKIP_SOLIB_RESOLVER \s0(\s-1PC\s0)\fR'
Define this to evaluate to the (nonzero) address at which execution
should continue to get past the dynamic linker's symbol resolution
function.  A zero value indicates that it is not important or
necessary to set a breakpoint to get through the dynamic linker
and that single stepping will suffice.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_integer_to_address (\s-1GDBARCH, TYPE, BUF\s0)\fR'
Define this when the architecture needs to handle non-pointer to
address conversions specially.  Converts that value to an address
according to the current architectures conventions.
.PP
_Pragmatics: When the user copies a well defined expression from
their source code and passes it, as a parameter, to \s-1GDB\s0's `\fBprint\fR'
command, they should get the same value as would have been
computed by the target program.  Any deviation from this rule can
cause major confusion and annoyance, and needs to be justified
carefully.  In other words, \s-1GDB\s0 doesn't really have the freedom to
do these conversions in clever and useful ways.  It has, however,
been pointed out that users aren't complaining about how \s-1GDB\s0 casts
integers to pointers; they are complaining that they can't take an
address from a disassembly listing and give it to `\fBx/i\fR'.  Adding
an architecture method like `\fBgdbarch_integer_to_address\fR' certainly
makes it possible for \s-1GDB\s0 to \*(L"get it right\*(R" in all circumstances._
.PP
*Note Pointers Are Not Always Addresses: Target Architecture
Definition.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_pointer_to_address (\s-1GDBARCH, TYPE, BUF\s0)\fR'
Assume that \s-1BUF\s0 holds a pointer of type \s-1TYPE,\s0 in the appropriate
format for the current architecture.  Return the byte address the
pointer refers to.  *Note Pointers Are Not Always Addresses:
Target Architecture Definition.
.PP
`\fBvoid gdbarch_register_to_value(\s-1GDBARCH, FRAME, REGNUM, TYPE, FUR\s0)\fR'
Convert the raw contents of register \s-1REGNUM\s0 into a value of type
\&\s-1TYPE. \s0 *Note Using Different Register and Memory Data
Representations: Target Architecture Definition.
.PP
`\fB\s-1REGISTER_CONVERT_TO_VIRTUAL\s0(\s-1REG, TYPE, FROM, TO\s0)\fR'
Convert the value of register \s-1REG\s0 from its raw form to its virtual
form.  *Note Raw and Virtual Register Representations: Target
Architecture Definition.
.PP
`\fB\s-1REGISTER_CONVERT_TO_RAW\s0(\s-1TYPE, REG, FROM, TO\s0)\fR'
Convert the value of register \s-1REG\s0 from its virtual form to its raw
form.  *Note Raw and Virtual Register Representations: Target
Architecture Definition.
.PP
`\fBconst struct regset *regset_from_core_section (struct gdbarch * \s-1GDBARCH,\s0 const char * \s-1SECT_NAME,\s0 size_t \s-1SECT_SIZE\s0)\fR'
Return the appropriate register set for a core file section with
name \s-1SECT_NAME\s0 and size \s-1SECT_SIZE.\s0
.PP
`\fB\s-1\f(BISOFTWARE_SINGLE_STEP_P\s0()\fB\fR'
Define this as 1 if the target does not have a hardware single-step
mechanism.  The macro `\fB\s-1SOFTWARE_SINGLE_STEP\s0\fR' must also be defined.
.PP
`\fB\s-1SOFTWARE_SINGLE_STEP\s0(\s-1SIGNAL, INSERT_BREAKPOINTS_P\s0)\fR'
A function that inserts or removes (depending on
\&\s-1INSERT_BREAKPOINTS_P\s0) breakpoints at each possible destinations of
the next instruction.  See `\fBsparc\-tdep.c\fR' and `\fBrs6000\-tdep.c\fR' for
examples.
.PP
`\fBset_gdbarch_sofun_address_maybe_missing (\s-1GDBARCH, SET\s0)\fR'
Somebody clever observed that, the more actual addresses you have
in the debug information, the more time the linker has to spend
relocating them.  So whenever there's some other way the debugger
could find the address it needs, you should omit it from the debug
info, to make linking faster.
.PP
Calling `\fBset_gdbarch_sofun_address_maybe_missing\fR' with a non-zero
argument \s-1SET\s0 indicates that a particular set of hacks of this sort
are in use, affecting `\fBN_SO\fR' and `\fBN_FUN\fR' entries in stabs-format
debugging information.  `\fBN_SO\fR' stabs mark the beginning and ending
addresses of compilation units in the text segment.  `\fBN_FUN\fR' stabs
mark the starts and ends of functions.
.PP
In this case, \s-1GDB\s0 assumes two things:
.PP
* `\fBN_FUN\fR' stabs have an address of zero.  Instead of using those
addresses, you should find the address where the function
starts by taking the function name from the stab, and then
looking that up in the minsyms (the linker/assembler symbol
table).  In other words, the stab has the name, and the
linker/assembler symbol table is the only place that carries
the address.
.PP
* `\fBN_SO\fR' stabs have an address of zero, too.  You just look at
the `\fBN_FUN\fR' stabs that appear before and after the `\fBN_SO\fR'
stab, and guess the starting and ending addresses of the
compilation unit from them.
.PP
`\fBint gdbarch_stabs_argument_has_addr (\s-1GDBARCH, TYPE\s0)\fR'
Define this function to return nonzero if a function argument of
type \s-1TYPE\s0 is passed by reference instead of value.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_push_dummy_call (\s-1GDBARCH, FUNCTION, REGCACHE, BP_ADDR, NARGS, ARGS, SP, STRUCT_RETURN, STRUCT_ADDR\s0)\fR'
Define this to push the dummy frame's call to the inferior
function onto the stack.  In addition to pushing \s-1NARGS,\s0 the code
should push \s-1STRUCT_ADDR \s0(when \s-1STRUCT_RETURN\s0 is non-zero), and the
return address (\s-1BP_ADDR,\s0 in inferior's \s-1PC\s0 register encoding).
.PP
\&\s-1FUNCTION\s0 is a pointer to a `\fBstruct value\fR'; on architectures that
use function descriptors, this contains the function descriptor
value.
.PP
Returns the updated top-of-stack pointer.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_push_dummy_code (\s-1GDBARCH, SP, FUNADDR, USING_GCC, ARGS, NARGS, VALUE_TYPE, REAL_PC, BP_ADDR, REGCACHE\s0)\fR'
Given a stack based call dummy, push the instruction sequence
(including space for a breakpoint) to which the called function
should return.
.PP
Set \s-1BP_ADDR\s0 to the address at which the breakpoint instruction
should be inserted (in inferior's \s-1PC\s0 register encoding), \s-1REAL_PC\s0
to the resume address when starting the call sequence, and return
the updated inner-most stack address.
.PP
By default, the stack is grown sufficient to hold a frame-aligned
(see \*(L"frame_align\*(R") breakpoint, \s-1BP_ADDR\s0 is set to the address
reserved for that breakpoint (in inferior's \s-1PC\s0 register encoding),
and \s-1REAL_PC\s0 set to \s-1FUNADDR.\s0
.PP
This method replaces `\fBgdbarch_call_dummy_location (\s-1GDBARCH\s0)\fR'.
.PP
`\fBint gdbarch_sdb_reg_to_regnum (\s-1GDBARCH, SDB_REGNR\s0)\fR'
Use this function to convert sdb register \s-1SDB_REGNR\s0 into \s-1GDB\s0
regnum.  If not defined, no conversion will be done.
.PP
`\fBenum return_value_convention gdbarch_return_value (struct gdbarch *GDBARCH, struct type *VALTYPE, struct regcache *REGCACHE, void *READBUF, const void *WRITEBUF)\fR'
Given a function with a return-value of type \s-1RETTYPE,\s0 return which
return-value convention that function would use.
.PP
\&\s-1GDB\s0 currently recognizes two function return-value conventions:
`\fB\s-1RETURN_VALUE_REGISTER_CONVENTION\s0\fR' where the return value is found
in registers; and `\fB\s-1RETURN_VALUE_STRUCT_CONVENTION\s0\fR' where the return
value is found in memory and the address of that memory location is
passed in as the function's first parameter.
.PP
If the register convention is being used, and \s-1WRITEBUF\s0 is
non\-`\fB\s-1NULL\s0\fR', also copy the return-value in \s-1WRITEBUF\s0 into \s-1REGCACHE.\s0
.PP
If the register convention is being used, and \s-1READBUF\s0 is
non\-`\fB\s-1NULL\s0\fR', also copy the return value from \s-1REGCACHE\s0 into \s-1READBUF
\&\s0(\s-1REGCACHE\s0 contains a copy of the registers from the just returned
function).
.PP
_Maintainer note: This method replaces separate predicate, extract,
store methods.  By having only one method, the logic needed to
determine the return-value convention need only be implemented in
one place.  If \s-1GDB\s0 were written in an \s-1OO\s0 language, this method
would instead return an object that knew how to perform the
register return-value extract and store._
.PP
_Maintainer note: This method does not take a \s-1GCC_P\s0 parameter, and
such a parameter should not be added.  If an architecture that
requires per-compiler or per-function information be identified,
then the replacement of \s-1RETTYPE\s0 with `\fBstruct value\fR' \s-1FUNCTION\s0
should be pursued._
.PP
_Maintainer note: The \s-1REGCACHE\s0 parameter limits this methods to
the inner most frame.  While replacing \s-1REGCACHE\s0 with a `struct
frame_info' \s-1FRAME\s0 parameter would remove that limitation there has
yet to be a demonstrated need for such a change._
.PP
`\fBvoid gdbarch_skip_permanent_breakpoint (\s-1GDBARCH, REGCACHE\s0)\fR'
Advance the inferior's \s-1PC\s0 past a permanent breakpoint.  \s-1GDB\s0
normally steps over a breakpoint by removing it, stepping one
instruction, and re-inserting the breakpoint.  However, permanent
breakpoints are hardwired into the inferior, and can't be removed,
so this strategy doesn't work.  Calling
`\fBgdbarch_skip_permanent_breakpoint\fR' adjusts the processor's state
so that execution will resume just after the breakpoint.  This
function does the right thing even when the breakpoint is in the
delay slot of a branch or jump.
.PP
`\fB\s-1CORE_ADDR\s0 gdbarch_skip_trampoline_code (\s-1GDBARCH, FRAME, PC\s0)\fR'
If the target machine has trampoline code that sits between
callers and the functions being called, then define this function
to return a new \s-1PC\s0 that is at the start of the real function.
.PP
`\fBint gdbarch_deprecated_fp_regnum (\s-1GDBARCH\s0)\fR'
If the frame pointer is in a register, use this function to return
the number of that register.
.PP
`\fBint gdbarch_stab_reg_to_regnum (\s-1GDBARCH, STAB_REGNR\s0)\fR'
Use this function to convert stab register \s-1STAB_REGNR\s0 into \s-1GDB\s0
regnum.  If not defined, no conversion will be done.
.PP
`\fB\s-1TARGET_CHAR_BIT\s0\fR'
Number of bits in a char; defaults to 8.
.PP
`\fBint gdbarch_char_signed (\s-1GDBARCH\s0)\fR'
Non-zero if `\fBchar\fR' is normally signed on this architecture; zero if
it should be unsigned.
.PP
The \s-1ISO C\s0 standard requires the compiler to treat `\fBchar\fR' as
equivalent to either `\fBsigned char\fR' or `\fBunsigned char\fR'; any
character in the standard execution set is supposed to be positive.
Most compilers treat `\fBchar\fR' as signed, but `\fBchar\fR' is unsigned on
the \s-1IBM S/390, RS6000,\s0 and PowerPC targets.
.PP
`\fBint gdbarch_double_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a double float; defaults to
`\fB8 * \s-1TARGET_CHAR_BIT\s0\fR'.
.PP
`\fBint gdbarch_float_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a float; defaults to `\fB4 * \s-1TARGET_CHAR_BIT\s0\fR'.
.PP
`\fBint gdbarch_int_bit (\s-1GDBARCH\s0)\fR'
Number of bits in an integer; defaults to `\fB4 * \s-1TARGET_CHAR_BIT\s0\fR'.
.PP
`\fBint gdbarch_long_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a long integer; defaults to
`\fB4 * \s-1TARGET_CHAR_BIT\s0\fR'.
.PP
`\fBint gdbarch_long_double_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a long double float; defaults to
`\fB2 * gdbarch_double_bit (\s-1GDBARCH\s0)\fR'.
.PP
`\fBint gdbarch_long_long_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a long long integer; defaults to
`\fB2 * gdbarch_long_bit (\s-1GDBARCH\s0)\fR'.
.PP
`\fBint gdbarch_ptr_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a pointer; defaults to
`\fBgdbarch_int_bit (\s-1GDBARCH\s0)\fR'.
.PP
`\fBint gdbarch_short_bit (\s-1GDBARCH\s0)\fR'
Number of bits in a short integer; defaults to
`\fB2 * \s-1TARGET_CHAR_BIT\s0\fR'.
.PP
`\fBvoid gdbarch_virtual_frame_pointer (\s-1GDBARCH, PC, FRAME_REGNUM, FRAME_OFFSET\s0)\fR'
Returns a `\fB(\s-1REGISTER, OFFSET\s0)\fR' pair representing the virtual frame
pointer in use at the code address \s-1PC. \s0 If virtual frame pointers
are not used, a default definition simply returns
`\fBgdbarch_deprecated_fp_regnum\fR' (or `\fBgdbarch_sp_regnum\fR', if no
frame pointer is defined), with an offset of zero.
.PP
`\fB\s-1TARGET_HAS_HARDWARE_WATCHPOINTS\s0\fR'
If non-zero, the target has support for hardware-assisted
watchpoints.  *Note watchpoints: Algorithms, for more details and
other related macros.
.PP
`\fBint gdbarch_print_insn (\s-1GDBARCH, VMA, INFO\s0)\fR'
This is the function used by \s-1GDB\s0 to print an assembly instruction.
It prints the instruction at address \s-1VMA\s0 in debugged memory and
returns the length of the instruction, in bytes.  This usually
points to a function in the `\fBopcodes\fR' library (*note Opcodes:
Support Libraries.).  \s-1INFO\s0 is a structure (of type
`\fBdisassemble_info\fR') defined in the header file
`\fBinclude/dis\-asm.h\fR', and used to pass information to the
instruction decoding routine.
.PP
`\fBframe_id gdbarch_dummy_id (\s-1GDBARCH, FRAME\s0)\fR'
Given \s-1FRAME\s0 return a `\fBstruct frame_id\fR' that uniquely identifies an
inferior function call's dummy frame.  The value returned must
match the dummy frame stack value previously saved by
`\fBcall_function_by_hand\fR'.
.PP
`\fBvoid gdbarch_value_to_register (\s-1GDBARCH, FRAME, TYPE, BUF\s0)\fR'
Convert a value of type \s-1TYPE\s0 into the raw contents of a register.
*Note Using Different Register and Memory Data Representations:
Target Architecture Definition.
.PP
Motorola M68K target conditionals.
.PP
`\fB\s-1BPT_VECTOR\s0\fR'
Define this to be the 4\-bit location of the breakpoint trap
vector.  If not defined, it will default to `\fB0xf\fR'.
.PP
`\fB\s-1REMOTE_BPT_VECTOR\s0\fR'
Defaults to `\fB1\fR'.
.PP
\&\fB11.11 Adding a New Target\fR
.PP
The following files add a target to \s-1GDB:\s0
.PP
`\fBgdb/TTT\-tdep.c\fR'
Contains any miscellaneous code required for this target machine.
On some machines it doesn't exist at all.
.PP
`\fBgdb/ARCH\-tdep.c\fR'
`\fBgdb/ARCH\-tdep.h\fR'
This is required to describe the basic layout of the target
machine's processor chip (registers, stack, etc.).  It can be
shared among many targets that use the same processor architecture.
.PP
(Target header files such as `\fBgdb/config/ARCH/tm\-TTT.h\fR',
`\fBgdb/config/ARCH/tm\-ARCH.h\fR', and `\fBconfig/tm\-OS.h\fR' are no longer used.)
.PP
A \s-1GDB\s0 description for a new architecture, arch is created by
defining a global function `\fB_initialize_ARCH_tdep\fR', by convention in
the source file `\fBARCH\-tdep.c\fR'.  For example, in the case of the
OpenRISC 1000, this function is called `\fB_initialize_or1k_tdep\fR' and is
found in the file `\fBor1k\-tdep.c\fR'.
.PP
The object file resulting from compiling this source file, which will
contain the implementation of the `\fB_initialize_ARCH_tdep\fR' function is
specified in the \s-1GDB\s0 `\fBconfigure.tgt\fR' file, which includes a large case
statement pattern matching against the `\fB\-\-target\fR' option of the
`\fBconfigure\fR' script.
.PP
_Note:_ If the architecture requires multiple source files, the
corresponding binaries should be included in `\fBconfigure.tgt\fR'.
However if there are header files, the dependencies on these will
not be picked up from the entries in `\fBconfigure.tgt\fR'. The
`\fBMakefile.in\fR' file will need extending to show these dependencies.
.PP
A new struct gdbarch, defining the new architecture, is created
within the `\fB_initialize_ARCH_tdep\fR' function by calling
`\fBgdbarch_register\fR':
.PP
void gdbarch_register (enum bfd_architecture    architecture,
gdbarch_init_ftype      *init_func,
gdbarch_dump_tdep_ftype *tdep_dump_func);
.PP
This function has been described fully in an earlier section.  *Note
How an Architecture is Represented: How an Architecture is Represented.
.PP
The new `\fBstruct gdbarch\fR' should contain implementations of the
necessary functions (described in the previous sections) to describe
the basic layout of the target machine's processor chip (registers,
stack, etc.).  It can be shared among many targets that use the same
processor architecture.
.SS "12 Target Descriptions"
.IX Subsection "12 Target Descriptions"
The target architecture definition (*note Target Architecture
Definition::) contains \s-1GDB\s0's hard-coded knowledge about an
architecture.  For some platforms, it is handy to have more flexible
knowledge about a specific instance of the architecture\*(--for instance,
a processor or development board.  \*(L"Target descriptions\*(R" provide a
mechanism for the user to tell \s-1GDB\s0 more about what their target
supports, or for the target to tell \s-1GDB\s0 directly.
.PP
For details on writing, automatically supplying, and manually
selecting target descriptions, see *note Target Descriptions:
(gdb)Target Descriptions.  This section will cover some related topics
about the \s-1GDB\s0 internals.
.PP
* Menu:
.PP
See also \*(L"Target Descriptions Implementation\*(R"
.PP
See also \*(L"Adding Target Described Register Support\*(R"
.PP
\&\fB12.1 Target Descriptions Implementation\fR
.PP
Before \s-1GDB\s0 connects to a new target, or runs a new program on an
existing target, it discards any existing target description and
reverts to a default gdbarch.  Then, after connecting, it looks for a
new target description by calling `\fBtarget_find_description\fR'.
.PP
A description may come from a user specified file (\s-1XML\s0), the remote
`\fBqXfer:features:read\fR' packet (also \s-1XML\s0), or from any custom
`\fBto_read_description\fR' routine in the target vector.  For instance, the
remote target supports guessing whether a \s-1MIPS\s0 target is 32\-bit or
64\-bit based on the size of the `\fBg\fR' packet.
.PP
If any target description is found, \s-1GDB\s0 creates a new gdbarch
incorporating the description by calling `\fBgdbarch_update_p\fR'.  Any
`\fB<architecture>\fR' element is handled first, to determine which
architecture's gdbarch initialization routine is called to create the
new architecture.  Then the initialization routine is called, and has a
chance to adjust the constructed architecture based on the contents of
the target description.  For instance, it can recognize any properties
set by a `\fBto_read_description\fR' routine.  Also see *note Adding Target
Described Register Support::.
.PP
\&\fB12.2 Adding Target Described Register Support\fR
.PP
Target descriptions can report additional registers specific to an
instance of the target.  But it takes a little work in the architecture
specific routines to support this.
.PP
A target description must either have no registers or a complete
set\*(--this avoids complexity in trying to merge standard registers with
the target defined registers.  It is the architecture's responsibility
to validate that a description with registers has everything it needs.
To keep architecture code simple, the same mechanism is used to assign
fixed internal register numbers to standard registers.
.PP
If `\fBtdesc_has_registers\fR' returns 1, the description contains
registers.  The architecture's `\fBgdbarch_init\fR' routine should:
.PP
* Call `\fBtdesc_data_alloc\fR' to allocate storage, early, before
searching for a matching gdbarch or allocating a new one.
.PP
* Use `\fBtdesc_find_feature\fR' to locate standard features by name.
.PP
* Use `\fBtdesc_numbered_register\fR' and `\fBtdesc_numbered_register_choices\fR'
to locate the expected registers in the standard features.
.PP
* Return `\fB\s-1NULL\s0\fR' if a required feature is missing, or if any standard
feature is missing expected registers.  This will produce a
warning that the description was incomplete.
.PP
* Free the allocated data before returning, unless
`\fBtdesc_use_registers\fR' is called.
.PP
* Call `\fBset_gdbarch_num_regs\fR' as usual, with a number higher than any
fixed number passed to `\fBtdesc_numbered_register\fR'.
.PP
* Call `\fBtdesc_use_registers\fR' after creating a new gdbarch, before
returning it.
.PP
After `\fBtdesc_use_registers\fR' has been called, the architecture's
`\fBregister_name\fR', `\fBregister_type\fR', and `\fBregister_reggroup_p\fR' routines
will not be called; that information will be taken from the target
description.  `\fBnum_regs\fR' may be increased to account for any additional
registers in the description.
.PP
Pseudo-registers require some extra care:
.PP
* Using `\fBtdesc_numbered_register\fR' allows the architecture to give
constant register numbers to standard architectural registers, e.g.
as an `\fBenum\fR' in `\fBARCH\-tdep.h\fR'.  But because pseudo-registers are
always numbered above `\fBnum_regs\fR', which may be increased by the
description, constant numbers can not be used for pseudos.  They
must be numbered relative to `\fBnum_regs\fR' instead.
.PP
* The description will not describe pseudo-registers, so the
architecture must call `\fBset_tdesc_pseudo_register_name\fR',
`\fBset_tdesc_pseudo_register_type\fR', and
`\fBset_tdesc_pseudo_register_reggroup_p\fR' to supply routines
describing pseudo registers.  These routines will be passed
internal register numbers, so the same routines used for the
gdbarch equivalents are usually suitable.
.SS "13 Target Vector Definition"
.IX Subsection "13 Target Vector Definition"
The target vector defines the interface between \s-1GDB\s0's abstract handling
of target systems, and the nitty-gritty code that actually exercises
control over a process or a serial port.  \s-1GDB\s0 includes some 30\-40
different target vectors; however, each configuration of \s-1GDB\s0 includes
only a few of them.
.PP
* Menu:
.PP
See also \*(L"Managing Execution State\*(R"
.PP
See also \*(L"Existing Targets\*(R"
.PP
\&\fB13.1 Managing Execution State\fR
.PP
A target vector can be completely inactive (not pushed on the target
stack), active but not running (pushed, but not connected to a fully
manifested inferior), or completely active (pushed, with an accessible
inferior).  Most targets are only completely inactive or completely
active, but some support persistent connections to a target even when
the target has exited or not yet started.
.PP
For example, connecting to the simulator using `\fBtarget sim\fR' does not
create a running program.  Neither registers nor memory are accessible
until `\fBrun\fR'.  Similarly, after `\fBkill\fR', the program can not continue
executing.  But in both cases \s-1GDB\s0 remains connected to the simulator,
and target-specific commands are directed to the simulator.
.PP
A target which only supports complete activation should push itself
onto the stack in its `\fBto_open\fR' routine (by calling `\fBpush_target\fR'), and
unpush itself from the stack in its `\fBto_mourn_inferior\fR' routine (by
calling `\fBunpush_target\fR').
.PP
A target which supports both partial and complete activation should
still call `\fBpush_target\fR' in `\fBto_open\fR', but not call `\fBunpush_target\fR' in
`\fBto_mourn_inferior\fR'.  Instead, it should call either
`\fBtarget_mark_running\fR' or `\fBtarget_mark_exited\fR' in its `\fBto_open\fR',
depending on whether the target is fully active after connection.  It
should also call `\fBtarget_mark_running\fR' any time the inferior becomes
fully active (e.g. in `\fBto_create_inferior\fR' and `\fBto_attach\fR'), and
`\fBtarget_mark_exited\fR' when the inferior becomes inactive (in
`\fBto_mourn_inferior\fR').  The target should also make sure to call
`\fBtarget_mourn_inferior\fR' from its `\fBto_kill\fR', to return the target to
inactive state.
.PP
\&\fB13.2 Existing Targets\fR
.PP
13.2.1 File Targets
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Both executables and core files have target vectors.
.PP
13.2.2 Standard Protocol and Remote Stubs
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
\&\s-1GDB\s0's file `\fBremote.c\fR' talks a serial protocol to code that runs in the
target system.  \s-1GDB\s0 provides several sample \*(L"stubs\*(R" that can be
integrated into target programs or operating systems for this purpose;
they are named `\fBCPU\-stub.c\fR'.  Many operating systems, embedded targets,
emulators, and simulators already have a \s-1GDB\s0 stub built into them, and
maintenance of the remote protocol must be careful to preserve
compatibility.
.PP
The \s-1GDB\s0 user's manual describes how to put such a stub into your
target code.  What follows is a discussion of integrating the \s-1SPARC\s0
stub into a complicated operating system (rather than a simple
program), by Stu Grossman, the author of this stub.
.PP
The trap handling code in the stub assumes the following upon entry
to `\fBtrap_low\fR':
.PP
1. \f(CW%l1\fR and \f(CW%l2\fR contain pc and npc respectively at the time of the
trap;
.PP
2. traps are disabled;
.PP
3. you are in the correct trap window.
.PP
As long as your trap handler can guarantee those conditions, then
there is no reason why you shouldn't be able to \*(L"share\*(R" traps with the
stub.  The stub has no requirement that it be jumped to directly from
the hardware trap vector.  That is why it calls `\fB\f(BIexceptionHandler()\fB\fR',
which is provided by the external environment.  For instance, this could
set up the hardware traps to actually execute code which calls the stub
first, and then transfers to its own trap handler.
.PP
For the most point, there probably won't be much of an issue with
\&\*(L"sharing\*(R" traps, as the traps we use are usually not used by the kernel,
and often indicate unrecoverable error conditions.  Anyway, this is all
controlled by a table, and is trivial to modify.  The most important
trap for us is for `\fBta 1\fR'.  Without that, we can't single step or do
breakpoints.  Everything else is unnecessary for the proper operation
of the debugger/stub.
.PP
From reading the stub, it's probably not obvious how breakpoints
work.  They are simply done by deposit/examine operations from \s-1GDB.\s0
.PP
13.2.3 \s-1ROM\s0 Monitor Interface
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
13.2.4 Custom Protocols
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
13.2.5 Transport Layer
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
13.2.6 Builtin Simulator
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.SS "14 Native Debugging"
.IX Subsection "14 Native Debugging"
Several files control \s-1GDB\s0's configuration for native support:
.PP
`\fBgdb/config/ARCH/XYZ.mh\fR'
Specifies Makefile fragments needed by a _native_ configuration on
machine \s-1XYZ. \s0 In particular, this lists the required
native-dependent object files, by defining `\fBNATDEPFILES=...\fR'.
Also specifies the header file which describes native support on
\&\s-1XYZ,\s0 by defining `\fBNAT_FILE= nm\-XYZ.h\fR'.  You can also define
`\fB\s-1NAT_CFLAGS\s0\fR', `\fB\s-1NAT_ADD_FILES\s0\fR', `\fB\s-1NAT_CLIBS\s0\fR', `\fB\s-1NAT_CDEPS\s0\fR',
`\fB\s-1NAT_GENERATED_FILES\s0\fR', etc.; see `\fBMakefile.in\fR'.
.PP
_Maintainer's note: The `\fB.mh\fR' suffix is because this file
originally contained `\fBMakefile\fR' fragments for hosting \s-1GDB\s0 on
machine \s-1XYZ. \s0 While the file is no longer used for this purpose,
the `\fB.mh\fR' suffix remains.  Perhaps someone will eventually rename
these fragments so that they have a `\fB.mn\fR' suffix._
.PP
`\fBgdb/config/ARCH/nm\-XYZ.h\fR'
(`\fBnm.h\fR' is a link to this file, created by `\fBconfigure\fR').  Contains
C macro definitions describing the native system environment, such
as child process control and core file support.
.PP
`\fBgdb/XYZ\-nat.c\fR'
Contains any miscellaneous C code required for this native support
of this machine.  On some machines it doesn't exist at all.
.PP
There are some \*(L"generic\*(R" versions of routines that can be used by
various systems.  These can be customized in various ways by macros
defined in your `\fBnm\-XYZ.h\fR' file.  If these routines work for the \s-1XYZ\s0
host, you can just include the generic file's name (with `\fB.o\fR', not
`\fB.c\fR') in `\fB\s-1NATDEPFILES\s0\fR'.
.PP
Otherwise, if your machine needs custom support routines, you will
need to write routines that perform the same functions as the generic
file.  Put them into `\fBXYZ\-nat.c\fR', and put `\fBXYZ\-nat.o\fR' into
`\fB\s-1NATDEPFILES\s0\fR'.
.PP
`\fBinftarg.c\fR'
This contains the _target_ops vector_ that supports Unix child
processes on systems which use ptrace and wait to control the
child.
.PP
`\fBprocfs.c\fR'
This contains the _target_ops vector_ that supports Unix child
processes on systems which use /proc to control the child.
.PP
`\fBfork\-child.c\fR'
This does the low-level grunge that uses Unix system calls to do a
\&\*(L"fork and exec\*(R" to start up a child process.
.PP
`\fBinfptrace.c\fR'
This is the low level interface to inferior processes for systems
using the Unix `\fBptrace\fR' call in a vanilla way.
.PP
14.1 ptrace
===========
.PP
14.2 /proc
==========
.PP
14.3 win32
==========
.PP
14.4 shared libraries
=====================
.PP
14.5 Native Conditionals
========================
.PP
When \s-1GDB\s0 is configured and compiled, various macros are defined or left
undefined, to control compilation when the host and target systems are
the same.  These macros should be defined (or left undefined) in
`\fBnm\-SYSTEM.h\fR'.
.PP
`\fBI386_USE_GENERIC_WATCHPOINTS\fR'
An x86\-based machine can define this to use the generic x86
watchpoint support; see *note I386_USE_GENERIC_WATCHPOINTS:
Algorithms.
.PP
`\fB\s-1SOLIB_ADD \s0(\s-1FILENAME, FROM_TTY, TARG, READSYMS\s0)\fR'
Define this to expand into an expression that will cause the
symbols in \s-1FILENAME\s0 to be added to \s-1GDB\s0's symbol table.  If
\&\s-1READSYMS\s0 is zero symbols are not read but any necessary low level
processing for \s-1FILENAME\s0 is still done.
.PP
`\fB\s-1SOLIB_CREATE_INFERIOR_HOOK\s0\fR'
Define this to expand into any shared-library-relocation code that
you want to be run just after the child process has been forked.
.PP
`\fB\s-1START_INFERIOR_TRAPS_EXPECTED\s0\fR'
When starting an inferior, \s-1GDB\s0 normally expects to trap twice;
once when the shell execs, and once when the program itself execs.
If the actual number of traps is something other than 2, then
define this macro to expand into the number expected.
.SS "15 Support Libraries"
.IX Subsection "15 Support Libraries"
15.1 \s-1BFD\s0
========
.PP
\&\s-1BFD\s0 provides support for \s-1GDB\s0 in several ways:
.PP
_identifying executable and core files_
\&\s-1BFD\s0 will identify a variety of file types, including a.out, coff,
and several variants thereof, as well as several kinds of core
files.
.PP
_access to sections of files_
\&\s-1BFD\s0 parses the file headers to determine the names, virtual
addresses, sizes, and file locations of all the various named
sections in files (such as the text section or the data section).
\&\s-1GDB\s0 simply calls \s-1BFD\s0 to read or write section X at byte offset Y
for length Z.
.PP
_specialized core file support_
\&\s-1BFD\s0 provides routines to determine the failing command name stored
in a core file, the signal with which the program failed, and
whether a core file matches (i.e. could be a core dump of) a
particular executable file.
.PP
_locating the symbol information_
\&\s-1GDB\s0 uses an internal interface of \s-1BFD\s0 to determine where to find
the symbol information in an executable file or symbol-file.  \s-1GDB\s0
itself handles the reading of symbols, since \s-1BFD\s0 does not
\&\*(L"understand\*(R" debug symbols, but \s-1GDB\s0 uses \s-1BFD\s0's cached information
to find the symbols, string table, etc.
.PP
15.2 opcodes
============
.PP
The opcodes library provides \s-1GDB\s0's disassembler.  (It's a separate
library because it's also used in binutils, for `\fBobjdump\fR').
.PP
15.3 readline
=============
.PP
The `\fBreadline\fR' library provides a set of functions for use by
applications that allow users to edit command lines as they are typed
in.
.PP
15.4 libiberty
==============
.PP
The `\fBlibiberty\fR' library provides a set of functions and features that
integrate and improve on functionality found in modern operating
systems.  Broadly speaking, such features can be divided into three
groups: supplemental functions (functions that may be missing in some
environments and operating systems), replacement functions (providing a
uniform and easier to use interface for commonly used standard
functions), and extensions (which provide additional functionality
beyond standard functions).
.PP
\&\s-1GDB\s0 uses various features provided by the `\fBlibiberty\fR' library, for
instance the \*(C+ demangler, the \s-1IEEE\s0 floating format support functions,
the input options parser `\fBgetopt\fR', the `\fBobstack\fR' extension, and other
functions.
.PP
15.4.1 `\fBobstacks\fR' in \s-1GDB
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
The obstack mechanism provides a convenient way to allocate and free
chunks of memory.  Each obstack is a pool of memory that is managed
like a stack.  Objects (of any nature, size and alignment) are
allocated and freed in a \s-1LIFO\s0 fashion on an obstack (see `\fBlibiberty\fR''s
documentation for a more detailed explanation of `\fBobstacks\fR').
.PP
The most noticeable use of the `\fBobstacks\fR' in \s-1GDB\s0 is in object files.
There is an obstack associated with each internal representation of an
object file.  Lots of things get allocated on these `\fBobstacks\fR':
dictionary entries, blocks, blockvectors, symbols, minimal symbols,
types, vectors of fundamental types, class fields of types, object
files section lists, object files section offset lists, line tables,
symbol tables, partial symbol tables, string tables, symbol table
private data, macros tables, debug information sections and entries,
import and export lists (som), unwind information (hppa), dwarf2
location expressions data.  Plus various strings such as directory
names strings, debug format strings, names of types.
.PP
An essential and convenient property of all data on `\fBobstacks\fR' is
that memory for it gets allocated (with `\fBobstack_alloc\fR') at various
times during a debugging session, but it is released all at once using
the `\fBobstack_free\fR' function.  The `\fBobstack_free\fR' function takes a
pointer to where in the stack it must start the deletion from (much
like the cleanup chains have a pointer to where to start the cleanups).
Because of the stack like structure of the `\fBobstacks\fR', this allows to
free only a top portion of the obstack.  There are a few instances in
\&\s-1GDB\s0 where such thing happens.  Calls to `\fBobstack_free\fR' are done after
some local data is allocated to the obstack.  Only the local data is
deleted from the obstack.  Of course this assumes that nothing between
the `\fBobstack_alloc\fR' and the `\fBobstack_free\fR' allocates anything else on
the same obstack.  For this reason it is best and safest to use
temporary `\fBobstacks\fR'.
.PP
Releasing the whole obstack is also not safe per se.  It is safe only
under the condition that we know the `\fBobstacks\fR' memory is no longer
needed.  In \s-1GDB\s0 we get rid of the `\fBobstacks\fR' only when we get rid of
the whole objfile(s), for instance upon reading a new symbol file.
.PP
15.5 gnu-regex
==============
.PP
Regex conditionals.
.PP
`\fBC_ALLOCA\fR'
.PP
`\fB\s-1NFAILURES\s0\fR'
.PP
`\fB\s-1RE_NREGS\s0\fR'
.PP
`\fB\s-1SIGN_EXTEND_CHAR\s0\fR'
.PP
`\fB\s-1SWITCH_ENUM_BUG\s0\fR'
.PP
`\fB\s-1SYNTAX_TABLE\s0\fR'
.PP
`\fBSword\fR'
.PP
`\fBsparc\fR'
.PP
15.6 Array Containers
=====================
.PP
Often it is necessary to manipulate a dynamic array of a set of
objects.  C forces some bookkeeping on this, which can get cumbersome
and repetitive.  The `\fBvec.h\fR' file contains macros for defining and
using a typesafe vector type.  The functions defined will be inlined
when compiling, and so the abstraction cost should be zero.  Domain
checks are added to detect programming errors.
.PP
An example use would be an array of symbols or section information.
The array can be grown as symbols are read in (or preallocated), and
the accessor macros provided keep care of all the necessary
bookkeeping.  Because the arrays are type safe, there is no danger of
accidentally mixing up the contents.  Think of these as \*(C+ templates,
but implemented in C.
.PP
Because of the different behavior of structure objects, scalar
objects and of pointers, there are three flavors of vector, one for
each of these variants.  Both the structure object and pointer variants
pass pointers to objects around \*(-- in the former case the pointers are
stored into the vector and in the latter case the pointers are
dereferenced and the objects copied into the vector.  The scalar object
variant is suitable for `\fBint\fR'\-like objects, and the vector elements are
returned by value.
.PP
There are both `\fBindex\fR' and `\fBiterate\fR' accessors.  The iterator
returns a boolean iteration condition and updates the iteration
variable passed by reference.  Because the iterator will be inlined,
the address-of can be optimized away.
.PP
The vectors are implemented using the trailing array idiom, thus they
are not resizeable without changing the address of the vector object
itself.  This means you cannot have variables or fields of vector type
\&\*(-- always use a pointer to a vector.  The one exception is the final
field of a structure, which could be a vector type.  You will have to
use the `\fBembedded_size\fR' & `\fBembedded_init\fR' calls to create such objects,
and they will probably not be resizeable (so don't use the \*(L"safe\*(R"
allocation variants).  The trailing array idiom is used (rather than a
pointer to an array of data), because, if we allow `\fB\s-1NULL\s0\fR' to also
represent an empty vector, empty vectors occupy minimal space in the
structure containing them.
.PP
Each operation that increases the number of active elements is
available in \*(L"quick\*(R" and \*(L"safe\*(R" variants.  The former presumes that
there is sufficient allocated space for the operation to succeed (it
dies if there is not).  The latter will reallocate the vector, if
needed.  Reallocation causes an exponential increase in vector size.
If you know you will be adding N elements, it would be more efficient
to use the reserve operation before adding the elements with the
\&\*(L"quick\*(R" operation.  This will ensure there are at least as many
elements as you ask for, it will exponentially increase if there are
too few spare slots.  If you want reserve a specific number of slots,
but do not want the exponential increase (for instance, you know this
is the last allocation), use a negative number for reservation.  You
can also create a vector of a specific size from the get go.
.PP
You should prefer the push and pop operations, as they append and
remove from the end of the vector.  If you need to remove several items
in one go, use the truncate operation.  The insert and remove
operations allow you to change elements in the middle of the vector.
There are two remove operations, one which preserves the element
ordering `\fBordered_remove\fR', and one which does not `\fBunordered_remove\fR'.
The latter function copies the end element into the removed slot,
rather than invoke a memmove operation.  The `\fBlower_bound\fR' function
will determine where to place an item in the array using insert that
will maintain sorted order.
.PP
If you need to directly manipulate a vector, then the `\fBaddress\fR'
accessor will return the address of the start of the vector.  Also the
`\fBspace\fR' predicate will tell you whether there is spare capacity in the
vector.  You will not normally need to use these two functions.
.PP
Vector types are defined using a `\fBDEF_VEC_{O,P,I}(\s-1TYPENAME\s0)\fR' macro.
Variables of vector type are declared using a `\fB\s-1VEC\s0(\s-1TYPENAME\s0)\fR' macro.
The characters `\fBO\fR', `\fBP\fR' and `\fBI\fR' indicate whether \s-1TYPENAME\s0 is an object
(`\fBO\fR'), pointer (`\fBP\fR') or integral (`\fBI\fR') type.  Be careful to pick the
correct one, as you'll get an awkward and inefficient \s-1API\s0 if you use
the wrong one.  There is a check, which results in a compile-time
warning, for the `\fBP\fR' and `\fBI\fR' versions, but there is no check for the
`\fBO\fR' versions, as that is not possible in plain C.
.PP
An example of their use would be,
.PP
\&\s-1DEF_VEC_P\s0(tree);   // non-managed tree vector.
.PP
struct my_struct {
\&\s-1VEC\s0(tree) *v;      // A (pointer to) a vector of tree pointers.
};
.PP
struct my_struct *s;
.PP
if (VEC_length(tree, s\->v)) { we have some contents }
VEC_safe_push(tree, s\->v, decl); // append some decl onto the end
for (ix = 0; VEC_iterate(tree, s\->v, ix, elt); ix++)
{ do something with elt }
.PP
The `\fBvec.h\fR' file provides details on how to invoke the various
accessors provided.  They are enumerated here:
.PP
`\fBVEC_length\fR'
Return the number of items in the array,
.PP
`\fBVEC_empty\fR'
Return true if the array has no elements.
.PP
`\fBVEC_last\fR'
`\fBVEC_index\fR'
Return the last or arbitrary item in the array.
.PP
`\fBVEC_iterate\fR'
Access an array element and indicate whether the array has been
traversed.
.PP
`\fBVEC_alloc\fR'
`\fBVEC_free\fR'
Create and destroy an array.
.PP
`\fBVEC_embedded_size\fR'
`\fBVEC_embedded_init\fR'
Helpers for embedding an array as the final element of another
struct.
.PP
`\fBVEC_copy\fR'
Duplicate an array.
.PP
`\fBVEC_space\fR'
Return the amount of free space in an array.
.PP
`\fBVEC_reserve\fR'
Ensure a certain amount of free space.
.PP
`\fBVEC_quick_push\fR'
`\fBVEC_safe_push\fR'
Append to an array, either assuming the space is available, or
making sure that it is.
.PP
`\fBVEC_pop\fR'
Remove the last item from an array.
.PP
`\fBVEC_truncate\fR'
Remove several items from the end of an array.
.PP
`\fBVEC_safe_grow\fR'
Add several items to the end of an array.
.PP
`\fBVEC_replace\fR'
Overwrite an item in the array.
.PP
`\fBVEC_quick_insert\fR'
`\fBVEC_safe_insert\fR'
Insert an item into the middle of the array.  Either the space must
already exist, or the space is created.
.PP
`\fBVEC_ordered_remove\fR'
`\fBVEC_unordered_remove\fR'
Remove an item from the array, preserving order or not.
.PP
`\fBVEC_block_remove\fR'
Remove a set of items from the array.
.PP
`\fBVEC_address\fR'
Provide the address of the first element.
.PP
`\fBVEC_lower_bound\fR'
Binary search the array.
.PP
15.7 include
============
.SS "16 Coding Standards"
.IX Subsection "16 Coding Standards"
16.1 \s-1GDB C\s0 Coding Standards
===========================
.PP
\&\s-1GDB\s0 follows the \s-1GNU\s0 coding standards, as described in
`\fBetc/standards.texi\fR'.  This file is also available for anonymous \s-1FTP\s0
from \s-1GNU\s0 archive sites.  \s-1GDB\s0 takes a strict interpretation of the
standard; in general, when the \s-1GNU\s0 standard recommends a practice but
does not require it, \s-1GDB\s0 requires it.
.PP
\&\s-1GDB\s0 follows an additional set of coding standards specific to \s-1GDB,\s0
as described in the following sections.
.PP
16.1.1 \s-1ISO C
\&\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
\&\s-1GDB\s0 assumes an \s-1ISO/IEC 9899:1990 \s0(a.k.a. \s-1ISO C90\s0) compliant compiler.
.PP
\&\s-1GDB\s0 does not assume an \s-1ISO C\s0 or \s-1POSIX\s0 compliant C library.
.PP
16.1.2 Formatting
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The standard \s-1GNU\s0 recommendations for formatting must be followed
strictly.  Any GDB-specific deviation from \s-1GNU\s0 recomendations is
described below.
.PP
A function declaration should not have its name in column zero.  A
function definition should have its name in column zero.
.PP
/* Declaration */
static void foo (void);
/* Definition */
void
foo (void)
{
}
.PP
_Pragmatics: This simplifies scripting.  Function definitions can be
found using `\fB^function\-name\fR'._
.PP
There must be a space between a function or macro name and the
opening parenthesis of its argument list (except for macro definitions,
as required by C).  There must not be a space after an open
paren/bracket or before a close paren/bracket.
.PP
While additional whitespace is generally helpful for reading, do not
use more than one blank line to separate blocks, and avoid adding
whitespace after the end of a program line (as of 1/99, some 600 lines
had whitespace after the semicolon).  Excess whitespace causes
difficulties for `\fBdiff\fR' and `\fBpatch\fR' utilities.
.PP
Pointers are declared using the traditional K&R C style:
.PP
void *foo;
.PP
and not:
.PP
void * foo;
void* foo;
.PP
In addition, whitespace around casts and unary operators should
follow the following guidelines:
.PP
Use...         ...instead of
`\fB!x\fR'           `\fB! x\fR'
`\fB~x\fR'           `\fB~ x\fR'
`\fB\-x\fR'           `\fB\- x\fR'          (unary minus)
`\fB(foo) x\fR'      `\fB(foo)x\fR'       (cast)
`\fB*x\fR'           `\fB* x\fR'          (pointer dereference)
.PP
Any two or more lines in code should be wrapped in braces, even if
they are comments, as they look like separate statements:
.PP
if (i)
{
/* Return success.  */
return 0;
}
.PP
and not:
.PP
if (i)
/* Return success.  */
return 0;
.PP
16.1.3 Comments
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The standard \s-1GNU\s0 requirements on comments must be followed strictly.
.PP
Block comments must appear in the following form, with no `\fB/*\fR'\- or
`\fB*/\fR'\-only lines, and no leading `\fB*\fR':
.PP
/* Wait for control to return from inferior to debugger.  If inferior
gets a signal, we may decide to start it up again instead of
returning.  That is why there is a loop in this function.  When
this function actually returns it means the inferior should be left
stopped and \s-1GDB\s0 should read more commands.  */
.PP
(Note that this format is encouraged by Emacs; tabbing for a
multi-line comment works correctly, and `\fBM\-q\fR' fills the block
consistently.)
.PP
Put a blank line between the block comments preceding function or
variable definitions, and the definition itself.
.PP
In general, put function-body comments on lines by themselves, rather
than trying to fit them into the 20 characters left at the end of a
line, since either the comment or the code will inevitably get longer
than will fit, and then somebody will have to move it anyhow.
.PP
16.1.4 C Usage
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Code must not depend on the sizes of C data types, the format of the
host's floating point numbers, the alignment of anything, or the order
of evaluation of expressions.
.PP
Use functions freely.  There are only a handful of compute-bound
areas in \s-1GDB\s0 that might be affected by the overhead of a function call,
mainly in symbol reading.  Most of \s-1GDB\s0's performance is limited by the
target interface (whether serial line or system call).
.PP
However, use functions with moderation.  A thousand one-line
functions are just as hard to understand as a single thousand-line
function.
.PP
_Macros are bad, M'kay._ (But if you have to use a macro, make sure
that the macro arguments are protected with parentheses.)
.PP
Declarations like `\fBstruct foo *\fR' should be used in preference to
declarations like `\fBtypedef struct foo { ... } *foo_ptr\fR'.
.PP
Zero constant (`\fB0\fR') is not interchangeable with a null pointer
constant (`\fB\s-1NULL\s0\fR') anywhere.  \s-1GCC\s0 does not give a warning for such
interchange.  Specifically:
.PP
incorrect      `\fBif (pointervar) {}\fR'
incorrect      `\fBif (!pointervar) {}\fR'
incorrect      `\fBif (pointervar != 0) {}\fR'
incorrect      `\fBif (pointervar == 0) {}\fR'
correct        `\fBif (pointervar != \s-1NULL\s0) {}\fR'
correct        `\fBif (pointervar == \s-1NULL\s0) {}\fR'
.PP
16.1.5 Function Prototypes
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Prototypes must be used when both _declaring_ and _defining_ a
function.  Prototypes for \s-1GDB\s0 functions must include both the argument
type and name, with the name matching that used in the actual function
definition.
.PP
All external functions should have a declaration in a header file
that callers include, that declaration should use the `\fBextern\fR' modifier.
The only exception concerns `\fB_initialize_*\fR' functions, which must be
external so that `\fBinit.c\fR' construction works, but shouldn't be visible
to random source files.
.PP
Where a source file needs a forward declaration of a static function,
that declaration must appear in a block near the top of the source file.
.PP
16.1.6 File Names
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Any file used when building the core of \s-1GDB\s0 must be in lower case.  Any
file used when building the core of \s-1GDB\s0 must be 8.3 unique.  These
requirements apply to both source and generated files.
.PP
_Pragmatics: The core of \s-1GDB\s0 must be buildable on many platforms
including \s-1DJGPP\s0 and MacOS/HFS.  Every time an unfriendly file is
introduced to the build process both `\fBMakefile.in\fR' and `\fBconfigure.in\fR'
need to be modified accordingly.  Compare the convoluted conversion
process needed to transform `\fB\s-1COPYING\s0\fR' into `\fBcopying.c\fR' with the
conversion needed to transform `\fBversion.in\fR' into `\fBversion.c\fR'._
.PP
Any file non 8.3 compliant file (that is not used when building the
core of \s-1GDB\s0) must be added to `\fBgdb/config/djgpp/fnchange.lst\fR'.
.PP
_Pragmatics: This is clearly a compromise._
.PP
When \s-1GDB\s0 has a local version of a system header file (ex `\fBstring.h\fR')
the file name based on the \s-1POSIX\s0 header prefixed with `\fBgdb_\fR'
(`\fBgdb_string.h\fR').  These headers should be relatively independent: they
should use only macros defined by `\fBconfigure\fR', the compiler, or the
host; they should include only system headers; they should refer only
to system types.  They may be shared between multiple programs, e.g.
\&\s-1GDB\s0 and \s-1GDBSERVER.\s0
.PP
For other files `\fB\-\fR' is used as the separator.
.PP
16.1.7 Include Files
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
A `\fB.c\fR' file should include `\fBdefs.h\fR' first.
.PP
A `\fB.c\fR' file should directly include the `\fB.h\fR' file of every
declaration and/or definition it directly refers to.  It cannot rely on
indirect inclusion.
.PP
A `\fB.h\fR' file should directly include the `\fB.h\fR' file of every
declaration and/or definition it directly refers to.  It cannot rely on
indirect inclusion.  Exception: The file `\fBdefs.h\fR' does not need to be
directly included.
.PP
An external declaration should only appear in one include file.
.PP
An external declaration should never appear in a `\fB.c\fR' file.
Exception: a declaration for the `\fB_initialize\fR' function that pacifies
`\fB\-Wmissing\-declaration\fR'.
.PP
A `\fBtypedef\fR' definition should only appear in one include file.
.PP
An opaque `\fBstruct\fR' declaration can appear in multiple `\fB.h\fR' files.
Where possible, a `\fB.h\fR' file should use an opaque `\fBstruct\fR' declaration
instead of an include.
.PP
All `\fB.h\fR' files should be wrapped in:
.PP
#ifndef \s-1INCLUDE_FILE_NAME_H\s0
#define \s-1INCLUDE_FILE_NAME_H\s0
header body
#endif
.PP
16.2 \s-1GDB\s0 Python Coding Standards
================================
.PP
\&\s-1GDB\s0 follows the published `\fBPython\fR' coding standards in `\fB\s-1PEP008\s0\fR'
(http://www.python.org/dev/peps/pep\-0008/).
.PP
In addition, the guidelines in the Google Python Style Guide
(http://google\-styleguide.googlecode.com/svn/trunk/pyguide.html) are
also followed where they do not conflict with `\fB\s-1PEP008\s0\fR'.
.PP
16.2.1 GDB-specific exceptions
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
There are a few exceptions to the published standards.  They exist
mainly for consistency with the `\fBC\fR' standards.
.PP
* Use `\fB\s-1FIXME\s0\fR' instead of `\fB\s-1TODO\s0\fR'.
.SS "17 Misc Guidelines"
.IX Subsection "17 Misc Guidelines"
This chapter covers topics that are lower-level than the major
algorithms of \s-1GDB.\s0
.PP
17.1 Cleanups
=============
.PP
Cleanups are a structured way to deal with things that need to be done
later.
.PP
When your code does something (e.g., `\fBxmalloc\fR' some memory, or
`\fBopen\fR' a file) that needs to be undone later (e.g., `\fBxfree\fR' the memory
or `\fBclose\fR' the file), it can make a cleanup.  The cleanup will be done
at some future point: when the command is finished and control returns
to the top level; when an error occurs and the stack is unwound; or
when your code decides it's time to explicitly perform cleanups.
Alternatively you can elect to discard the cleanups you created.
.PP
Syntax:
.PP
`\fBstruct cleanup *OLD_CHAIN;\fR'
Declare a variable which will hold a cleanup chain handle.
.PP
`\fB\s-1OLD_CHAIN\s0 = make_cleanup (\s-1FUNCTION, ARG\s0);\fR'
Make a cleanup which will cause \s-1FUNCTION\s0 to be called with \s-1ARG \s0(a
`\fBchar *\fR') later.  The result, \s-1OLD_CHAIN,\s0 is a handle that can
later be passed to `\fBdo_cleanups\fR' or `\fBdiscard_cleanups\fR'.  Unless
you are going to call `\fBdo_cleanups\fR' or `\fBdiscard_cleanups\fR', you can
ignore the result from `\fBmake_cleanup\fR'.
.PP
`\fBdo_cleanups (\s-1OLD_CHAIN\s0);\fR'
Do all cleanups added to the chain since the corresponding
`\fBmake_cleanup\fR' call was made.
.PP
`\fBdiscard_cleanups (\s-1OLD_CHAIN\s0);\fR'
Same as `\fBdo_cleanups\fR' except that it just removes the cleanups from
the chain and does not call the specified functions.
.PP
Cleanups are implemented as a chain.  The handle returned by
`\fBmake_cleanups\fR' includes the cleanup passed to the call and any later
cleanups appended to the chain (but not yet discarded or performed).
E.g.:
.PP
make_cleanup (a, 0);
{
struct cleanup *old = make_cleanup (b, 0);
make_cleanup (c, 0)
\&...
do_cleanups (old);
}
.PP
will call `\fBc()\fR' and `\fBb()\fR' but will not call `\fBa()\fR'.  The cleanup that
calls `\fBa()\fR' will remain in the cleanup chain, and will be done later
unless otherwise discarded.
.PP
Your function should explicitly do or discard the cleanups it
creates.  Failing to do this leads to non-deterministic behavior since
the caller will arbitrarily do or discard your functions cleanups.
This need leads to two common cleanup styles.
.PP
The first style is try/finally.  Before it exits, your code-block
calls `\fBdo_cleanups\fR' with the old cleanup chain and thus ensures that
your code-block's cleanups are always performed.  For instance, the
following code-segment avoids a memory leak problem (even when `\fBerror\fR'
is called and a forced stack unwind occurs) by ensuring that the
`\fBxfree\fR' will always be called:
.PP
struct cleanup *old = make_cleanup (null_cleanup, 0);
data = xmalloc (sizeof blah);
make_cleanup (xfree, data);
\&... blah blah ...
do_cleanups (old);
.PP
The second style is try/except.  Before it exits, your code-block
calls `\fBdiscard_cleanups\fR' with the old cleanup chain and thus ensures
that any created cleanups are not performed.  For instance, the
following code segment, ensures that the file will be closed but only
if there is an error:
.PP
\&\s-1FILE\s0 *file = fopen (\*(L"afile\*(R", \*(L"r\*(R");
struct cleanup *old = make_cleanup (close_file, file);
\&... blah blah ...
discard_cleanups (old);
return file;
.PP
Some functions, e.g., `\fB\f(BIfputs_filtered()\fB\fR' or `\fB\f(BIerror()\fB\fR', specify that
they \*(L"should not be called when cleanups are not in place\*(R".  This means
that any actions you need to reverse in the case of an error or
interruption must be on the cleanup chain before you call these
functions, since they might never return to your code (they `\fBlongjmp\fR'
instead).
.PP
17.2 Per-architecture module data
=================================
.PP
The multi-arch framework includes a mechanism for adding module
specific per-architecture data-pointers to the `\fBstruct gdbarch\fR'
architecture object.
.PP
A module registers one or more per-architecture data-pointers using:
.PP
\&\-\- Architecture Function: struct gdbarch_data *
gdbarch_data_register_pre_init (gdbarch_data_pre_init_ftype *PRE_INIT)
\&\s-1PRE_INIT\s0 is used to, on-demand, allocate an initial value for a
per-architecture data-pointer using the architecture's obstack
(passed in as a parameter).  Since \s-1PRE_INIT\s0 can be called during
architecture creation, it is not parameterized with the
architecture.  and must not call modules that use per-architecture
data.
.PP
\&\-\- Architecture Function: struct gdbarch_data *
gdbarch_data_register_post_init (gdbarch_data_post_init_ftype
*POST_INIT)
\&\s-1POST_INIT\s0 is used to obtain an initial value for a
per-architecture data-pointer _after_.  Since \s-1POST_INIT\s0 is always
called after architecture creation, it both receives the fully
initialized architecture and is free to call modules that use
per-architecture data (care needs to be taken to ensure that those
other modules do not try to call back to this module as that will
create in cycles in the initialization call graph).
.PP
These functions return a `\fBstruct gdbarch_data\fR' that is used to
identify the per-architecture data-pointer added for that module.
.PP
The per-architecture data-pointer is accessed using the function:
.PP
\&\-\- Architecture Function: void * gdbarch_data (struct gdbarch
*GDBARCH, struct gdbarch_data *DATA_HANDLE)
Given the architecture \s-1ARCH\s0 and module data handle \s-1DATA_HANDLE
\&\s0(returned by `\fBgdbarch_data_register_pre_init\fR' or
`\fBgdbarch_data_register_post_init\fR'), this function returns the
current value of the per-architecture data-pointer.  If the data
pointer is `\fB\s-1NULL\s0\fR', it is first initialized by calling the
corresponding \s-1PRE_INIT\s0 or \s-1POST_INIT\s0 method.
.PP
The examples below assume the following definitions:
.PP
struct nozel { int total; };
static struct gdbarch_data *nozel_handle;
.PP
A module can extend the architecture vector, adding additional
per-architecture data, using the \s-1PRE_INIT\s0 method.  The module's
per-architecture data is then initialized during architecture creation.
.PP
In the below, the module's per-architecture _nozel_ is added.  An
architecture can specify its nozel by calling `\fBset_gdbarch_nozel\fR' from
`\fBgdbarch_init\fR'.
.PP
static void *
nozel_pre_init (struct obstack *obstack)
{
struct nozel *data = \s-1OBSTACK_ZALLOC \s0(obstack, struct nozel);
return data;
}
.PP
extern void
set_gdbarch_nozel (struct gdbarch *gdbarch, int total)
{
struct nozel *data = gdbarch_data (gdbarch, nozel_handle);
data\->total = nozel;
}
.PP
A module can on-demand create architecture dependent data structures
using `\fBpost_init\fR'.
.PP
In the below, the nozel's total is computed on-demand by
`\fBnozel_post_init\fR' using information obtained from the architecture.
.PP
static void *
nozel_post_init (struct gdbarch *gdbarch)
{
struct nozel *data = \s-1GDBARCH_OBSTACK_ZALLOC \s0(gdbarch, struct nozel);
nozel\->total = gdbarch... (gdbarch);
return data;
}
.PP
extern int
nozel_total (struct gdbarch *gdbarch)
{
struct nozel *data = gdbarch_data (gdbarch, nozel_handle);
return data\->total;
}
.PP
17.3 Wrapping Output Lines
==========================
.PP
Output that goes through `\fBprintf_filtered\fR' or `\fBfputs_filtered\fR' or
`\fBfputs_demangled\fR' needs only to have calls to `\fBwrap_here\fR' added in
places that would be good breaking points.  The utility routines will
take care of actually wrapping if the line width is exceeded.
.PP
The argument to `\fBwrap_here\fR' is an indentation string which is
printed _only_ if the line breaks there.  This argument is saved away
and used later.  It must remain valid until the next call to
`\fBwrap_here\fR' or until a newline has been printed through the
`\fB*_filtered\fR' functions.  Don't pass in a local variable and then return!
.PP
It is usually best to call `\fBwrap_here\fR' after printing a comma or
space.  If you call it before printing a space, make sure that your
indentation properly accounts for the leading space that will print if
the line wraps there.
.PP
Any function or set of functions that produce filtered output must
finish by printing a newline, to flush the wrap buffer, before switching
to unfiltered (`\fBprintf\fR') output.  Symbol reading routines that print
warnings are a good example.
.PP
17.4 Memory Management
======================
.PP
\&\s-1GDB\s0 does not use the functions `\fBmalloc\fR', `\fBrealloc\fR', `\fBcalloc\fR', `\fBfree\fR'
and `\fBasprintf\fR'.
.PP
\&\s-1GDB\s0 uses the functions `\fBxmalloc\fR', `\fBxrealloc\fR' and `\fBxcalloc\fR' when
allocating memory.  Unlike `\fBmalloc\fR' et.al.  these functions do not
return when the memory pool is empty.  Instead, they unwind the stack
using cleanups.  These functions return `\fB\s-1NULL\s0\fR' when requested to
allocate a chunk of memory of size zero.
.PP
_Pragmatics: By using these functions, the need to check every
memory allocation is removed.  These functions provide portable
behavior._
.PP
\&\s-1GDB\s0 does not use the function `\fBfree\fR'.
.PP
\&\s-1GDB\s0 uses the function `\fBxfree\fR' to return memory to the memory pool.
Consistent with ISO-C, this function ignores a request to free a `\fB\s-1NULL\s0\fR'
pointer.
.PP
_Pragmatics: On some systems `\fBfree\fR' fails when passed a `\fB\s-1NULL\s0\fR'
pointer._
.PP
\&\s-1GDB\s0 can use the non-portable function `\fBalloca\fR' for the allocation of
small temporary values (such as strings).
.PP
_Pragmatics: This function is very non-portable.  Some systems
restrict the memory being allocated to no more than a few kilobytes._
.PP
\&\s-1GDB\s0 uses the string function `\fBxstrdup\fR' and the print function
`\fBxstrprintf\fR'.
.PP
_Pragmatics: `\fBasprintf\fR' and `\fBstrdup\fR' can fail.  Print functions such
as `\fBsprintf\fR' are very prone to buffer overflow errors._
.PP
17.5 Compiler Warnings
======================
.PP
With few exceptions, developers should avoid the configuration option
`\fB\-\-disable\-werror\fR' when building \s-1GDB. \s0 The exceptions are listed in the
file `\fBgdb/MAINTAINERS\fR'.  The default, when building with \s-1GCC,\s0 is
`\fB\-\-enable\-werror\fR'.
.PP
This option causes \s-1GDB \s0(when built using \s-1GCC\s0) to be compiled with a
carefully selected list of compiler warning flags.  Any warnings from
those flags are treated as errors.
.PP
The current list of warning flags includes:
.PP
`\fB\-Wall\fR'
Recommended \s-1GCC\s0 warnings.
.PP
`\fB\-Wdeclaration\-after\-statement\fR'
\&\s-1GCC 3\s0.x (and later) and C99 allow declarations mixed with code,
but \s-1GCC 2\s0.x and C89 do not.
.PP
`\fB\-Wpointer\-arith\fR'
.PP
`\fB\-Wformat\-nonliteral\fR'
Non-literal format strings, with a few exceptions, are bugs \- they
might contain unintended user-supplied format specifiers.  Since
\&\s-1GDB\s0 uses the `\fBformat printf\fR' attribute on all `\fBprintf\fR' like
functions this checks not just `\fBprintf\fR' calls but also calls to
functions such as `\fBfprintf_unfiltered\fR'.
.PP
`\fB\-Wno\-pointer\-sign\fR'
In version 4.0, \s-1GCC\s0 began warning about pointer argument passing or
assignment even when the source and destination differed only in
signedness.  However, most \s-1GDB\s0 code doesn't distinguish carefully
between `\fBchar\fR' and `\fBunsigned char\fR'.  In early 2006 the \s-1GDB\s0
developers decided correcting these warnings wasn't worth the time
it would take.
.PP
`\fB\-Wno\-unused\-parameter\fR'
Due to the way that \s-1GDB\s0 is implemented many functions have unused
parameters.  Consequently this warning is avoided.  The macro
`\fB\s-1ATTRIBUTE_UNUSED\s0\fR' is not used as it leads to false negatives \*(--
it is not an error to have `\fB\s-1ATTRIBUTE_UNUSED\s0\fR' on a parameter that
is being used.
.PP
`\fB\-Wno\-unused\fR'
`\fB\-Wno\-switch\fR'
`\fB\-Wno\-char\-subscripts\fR'
These are warnings which might be useful for \s-1GDB,\s0 but are
currently too noisy to enable with `\fB\-Werror\fR'.
.PP
17.6 Internal Error Recovery
============================
.PP
During its execution, \s-1GDB\s0 can encounter two types of errors.  User
errors and internal errors.  User errors include not only a user
entering an incorrect command but also problems arising from corrupt
object files and system errors when interacting with the target.
Internal errors include situations where \s-1GDB\s0 has detected, at run time,
a corrupt or erroneous situation.
.PP
When reporting an internal error, \s-1GDB\s0 uses `\fBinternal_error\fR' and
`\fBgdb_assert\fR'.
.PP
\&\s-1GDB\s0 must not call `\fBabort\fR' or `\fBassert\fR'.
.PP
_Pragmatics: There is no `\fBinternal_warning\fR' function.  Either the
code detected a user error, recovered from it and issued a `\fBwarning\fR' or
the code failed to correctly recover from the user error and issued an
`\fBinternal_error\fR'._
.PP
17.7 Command Names
==================
.PP
\&\s-1GDB U/I\s0 commands are written `\fBfoo-bar\fR', not `\fBfoo_bar\fR'.
.PP
17.8 Clean Design and Portable Implementation
=============================================
.PP
In addition to getting the syntax right, there's the little question of
semantics.  Some things are done in certain ways in \s-1GDB\s0 because long
experience has shown that the more obvious ways caused various kinds of
trouble.
.PP
You can't assume the byte order of anything that comes from a target
(including VALUEs, object files, and instructions).  Such things must
be byte-swapped using `\fB\s-1SWAP_TARGET_AND_HOST\s0\fR' in \s-1GDB,\s0 or one of the swap
routines defined in `\fBbfd.h\fR', such as `\fBbfd_get_32\fR'.
.PP
You can't assume that you know what interface is being used to talk
to the target system.  All references to the target must go through the
current `\fBtarget_ops\fR' vector.
.PP
You can't assume that the host and target machines are the same
machine (except in the \*(L"native\*(R" support modules).  In particular, you
can't assume that the target machine's header files will be available
on the host machine.  Target code must bring along its own header files
\&\- written from scratch or explicitly donated by their owner, to avoid
copyright problems.
.PP
Insertion of new `\fB#ifdef\fR''s will be frowned upon.  It's much better
to write the code portably than to conditionalize it for various
systems.
.PP
New `\fB#ifdef\fR''s which test for specific compilers or manufacturers or
operating systems are unacceptable.  All `\fB#ifdef\fR''s should test for
features.  The information about which configurations contain which
features should be segregated into the configuration files.  Experience
has proven far too often that a feature unique to one particular system
often creeps into other systems; and that a conditional based on some
predefined macro for your current system will become worthless over
time, as new versions of your system come out that behave differently
with regard to this feature.
.PP
Adding code that handles specific architectures, operating systems,
target interfaces, or hosts, is not acceptable in generic code.
.PP
One particularly notorious area where system dependencies tend to
creep in is handling of file names.  The mainline \s-1GDB\s0 code assumes
Posix semantics of file names: absolute file names begin with a forward
slash `\fB/\fR', slashes are used to separate leading directories,
case-sensitive file names.  These assumptions are not necessarily true
on non-Posix systems such as MS-Windows.  To avoid system-dependent
code where you need to take apart or construct a file name, use the
following portable macros:
.PP
`\fB\s-1HAVE_DOS_BASED_FILE_SYSTEM\s0\fR'
This preprocessing symbol is defined to a non-zero value on hosts
whose filesystems belong to the MS\-DOS/MS\-Windows family.  Use this
symbol to write conditional code which should only be compiled for
such hosts.
.PP
`\fB\s-1IS_DIR_SEPARATOR \s0(C)\fR'
Evaluates to a non-zero value if C is a directory separator
character.  On Unix and GNU/Linux systems, only a slash `\fB/\fR' is
such a character, but on Windows, both `\fB/\fR' and `\fB\e\fR' will pass.
.PP
`\fB\s-1IS_ABSOLUTE_PATH \s0(\s-1FILE\s0)\fR'
Evaluates to a non-zero value if \s-1FILE\s0 is an absolute file name.
For Unix and GNU/Linux hosts, a name which begins with a slash `\fB/\fR'
is absolute.  On \s-1DOS\s0 and Windows, `\fBd:/foo\fR' and `\fBx:\ebar\fR' are also
absolute file names.
.PP
`\fB\s-1FILENAME_CMP \s0(F1, F2)\fR'
Calls a function which compares file names F1 and F2 as
appropriate for the underlying host filesystem.  For Posix systems,
this simply calls `\fBstrcmp\fR'; on case-insensitive filesystems it
will call `\fBstrcasecmp\fR' instead.
.PP
`\fB\s-1DIRNAME_SEPARATOR\s0\fR'
Evaluates to a character which separates directories in
`\fB\s-1PATH\s0\fR'\-style lists, typically held in environment variables.  This
character is `\fB:\fR' on Unix, `\fB;\fR' on \s-1DOS\s0 and Windows.
.PP
`\fB\s-1SLASH_STRING\s0\fR'
This evaluates to a constant string you should use to produce an
absolute filename from leading directories and the file's basename.
`\fB\s-1SLASH_STRING\s0\fR' is `\fB\*(L"/\*(R"\fR' on most systems, but might be `\fB\*(L"\e\e\*(R"\fR' for
some Windows-based ports.
.PP
In addition to using these macros, be sure to use portable library
functions whenever possible.  For example, to extract a directory or a
basename part from a file name, use the `\fBdirname\fR' and `\fBbasename\fR'
library functions (available in `\fBlibiberty\fR' for platforms which don't
provide them), instead of searching for a slash with `\fBstrrchr\fR'.
.PP
Another way to generalize \s-1GDB\s0 along a particular interface is with an
attribute struct.  For example, \s-1GDB\s0 has been generalized to handle
multiple kinds of remote interfaces\*(--not by `\fB#ifdef\fR's everywhere, but
by defining the `\fBtarget_ops\fR' structure and having a current target (as
well as a stack of targets below it, for memory references).  Whenever
something needs to be done that depends on which remote interface we are
using, a flag in the current target_ops structure is tested (e.g.,
`\fBtarget_has_stack\fR'), or a function is called through a pointer in the
current target_ops structure.  In this way, when a new remote interface
is added, only one module needs to be touched\*(--the one that actually
implements the new remote interface.  Other examples of
attribute-structs are \s-1BFD\s0 access to multiple kinds of object file
formats, or \s-1GDB\s0's access to multiple source languages.
.PP
Please avoid duplicating code.  For example, in \s-1GDB 3\s0.x all the code
interfacing between `\fBptrace\fR' and the rest of \s-1GDB\s0 was duplicated in
`\fB*\-dep.c\fR', and so changing something was very painful.  In \s-1GDB 4\s0.x,
these have all been consolidated into `\fBinfptrace.c\fR'.  `\fBinfptrace.c\fR' can
deal with variations between systems the same way any system-independent
file would (hooks, `\fB#if defined\fR', etc.), and machines which are
radically different don't need to use `\fBinfptrace.c\fR' at all.
.PP
All debugging code must be controllable using the `\fBset debug \s-1MODULE\s0\fR'
command.  Do not use `\fBprintf\fR' to print trace messages.  Use
`\fBfprintf_unfiltered(gdb_stdlog, ...\fR'.  Do not use `\fB#ifdef \s-1DEBUG\s0\fR'.
.SS "18 Porting \s-1GDB\s0"
.IX Subsection "18 Porting GDB"
Most of the work in making \s-1GDB\s0 compile on a new machine is in
specifying the configuration of the machine.  Porting a new
architecture to \s-1GDB\s0 can be broken into a number of steps.
.PP
* Ensure a \s-1BFD\s0 exists for executables of the target architecture in
the `\fBbfd\fR' directory.  If one does not exist, create one by
modifying an existing similar one.
.PP
* Implement a disassembler for the target architecture in the
`\fBopcodes\fR' directory.
.PP
* Define the target architecture in the `\fBgdb\fR' directory (*note
Adding a New Target: Adding a New Target.).  Add the pattern for
the new target to `\fBconfigure.tgt\fR' with the names of the files that
contain the code.  By convention the target architecture
definition for an architecture \s-1ARCH\s0 is placed in `\fBARCH\-tdep.c\fR'.
.PP
Within `\fBARCH\-tdep.c\fR' define the function `\fB_initialize_ARCH_tdep\fR'
which calls `\fBgdbarch_register\fR' to create the new `\fBstruct gdbarch\fR'
for the architecture.
.PP
* If a new remote target is needed, consider adding a new remote
target by defining a function `\fB_initialize_remote_ARCH\fR'.  However
if at all possible use the \s-1GDB\s0 _Remote Serial Protocol_ for this
and implement the server side protocol independently with the
target.
.PP
* If desired implement a simulator in the `\fBsim\fR' directory.  This
should create the library `\fBlibsim.a\fR' implementing the interface in
`\fBremote\-sim.h\fR' (found in the `\fBinclude\fR' directory).
.PP
* Build and test.  If desired, lobby the \s-1GDB\s0 steering group to have
the new port included in the main distribution!
.PP
* Add a description of the new architecture to the main \s-1GDB\s0 user
guide (*note Configuration Specific Information:
(gdb)Configuration Specific Information.).
.SS "19 Versions and Branches"
.IX Subsection "19 Versions and Branches"
19.1 Versions
=============
.PP
\&\s-1GDB\s0's version is determined by the file `\fBgdb/version.in\fR' and takes one
of the following forms:
.PP
\&\s-1MAJOR.MINOR
MAJOR.MINOR.PATCHLEVEL\s0
an official release (e.g., 6.2 or 6.2.1)
.PP
\&\s-1MAJOR.MINOR.PATCHLEVEL.YYYYMMDD\s0
a snapshot taken at YYYY-MM-DD-gmt (e.g., 6.1.50.20020302,
6.1.90.20020304, or 6.1.0.20020308)
.PP
\&\s-1MAJOR.MINOR.PATCHLEVEL\s0.YYYYMMDD\-cvs
a \s-1CVS\s0 check out drawn on YYYY-MM-DD (e.g., 6.1.50.20020302\-cvs,
6.1.90.20020304\-cvs, or 6.1.0.20020308\-cvs)
.PP
\&\s-1MAJOR.MINOR.PATCHLEVEL.YYYYMMDD \s0(\s-1VENDOR\s0)
a vendor specific release of \s-1GDB,\s0 that while based on
\&\s-1MAJOR.MINOR.PATCHLEVEL.YYYYMMDD,\s0 may include additional changes
.PP
\&\s-1GDB\s0's mainline uses the \s-1MAJOR\s0 and \s-1MINOR\s0 version numbers from the
most recent release branch, with a \s-1PATCHLEVEL\s0 of 50.  At the time each
new release branch is created, the mainline's \s-1MAJOR\s0 and \s-1MINOR\s0 version
numbers are updated.
.PP
\&\s-1GDB\s0's release branch is similar.  When the branch is cut, the
\&\s-1PATCHLEVEL\s0 is changed from 50 to 90.  As draft releases are drawn from
the branch, the \s-1PATCHLEVEL\s0 is incremented.  Once the first release
(\s-1MAJOR.MINOR\s0) has been made, the \s-1PATCHLEVEL\s0 is set to 0 and updates
have an incremented \s-1PATCHLEVEL.\s0
.PP
For snapshots, and \s-1CVS\s0 check outs, it is also possible to identify
the \s-1CVS\s0 origin:
.PP
\&\s-1MAJOR.MINOR.50.YYYYMMDD\s0
drawn from the \s-1HEAD\s0 of mainline \s-1CVS \s0(e.g., 6.1.50.20020302)
.PP
\&\s-1MAJOR.MINOR.90.YYYYMMDD
MAJOR.MINOR.91.YYYYMMDD ...\s0
drawn from a release branch prior to the release (e.g.,
6.1.90.20020304)
.PP
\&\s-1MAJOR.MINOR.0.YYYYMMDD
MAJOR.MINOR.1.YYYYMMDD ...\s0
drawn from a release branch after the release (e.g.,
6.2.0.20020308)
.PP
If the previous \s-1GDB\s0 version is 6.1 and the current version is 6.2,
then, substituting 6 for \s-1MAJOR\s0 and 1 or 2 for \s-1MINOR,\s0 here's an
illustration of a typical sequence:
.PP
<\s-1HEAD\s0>
|
6.1.50.20020302\-cvs
|
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-.
|                    <gdb_6_2\-branch>
|                          |
6.2.50.20020303\-cvs        6.1.90 (draft #1)
|                          |
6.2.50.20020304\-cvs        6.1.90.20020304\-cvs
|                          |
6.2.50.20020305\-cvs        6.1.91 (draft #2)
|                          |
6.2.50.20020306\-cvs        6.1.91.20020306\-cvs
|                          |
6.2.50.20020307\-cvs        6.2 (release)
|                          |
6.2.50.20020308\-cvs        6.2.0.20020308\-cvs
|                          |
6.2.50.20020309\-cvs        6.2.1 (update)
|                          |
6.2.50.20020310\-cvs         <branch closed>
|
6.2.50.20020311\-cvs
|
+\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-.
|                     <gdb_6_3\-branch>
|                          |
6.3.50.20020312\-cvs        6.2.90 (draft #1)
|                          |
.PP
19.2 Release Branches
=====================
.PP
\&\s-1GDB\s0 draws a release series (6.2, 6.2.1, ...) from a single release
branch, and identifies that branch using the \s-1CVS\s0 branch tags:
.PP
gdb_MAJOR_MINOR\-YYYYMMDD\-branchpoint
gdb_MAJOR_MINOR\-branch
gdb_MAJOR_MINOR\-YYYYMMDD\-release
.PP
_Pragmatics: To help identify the date at which a branch or release
is made, both the branchpoint and release tags include the date that
they are cut (\s-1YYYYMMDD\s0) in the tag.  The branch tag, denoting the head
of the branch, does not need this._
.PP
19.3 Vendor Branches
====================
.PP
To avoid version conflicts, vendors are expected to modify the file
`\fBgdb/version.in\fR' to include a vendor unique alphabetic identifier (an
official \s-1GDB\s0 release never uses alphabetic characters in its version
identifier).  E.g., `\fB6.2widgit2\fR', or `\fB6.2 (Widgit Inc Patch 2)\fR'.
.PP
19.4 Experimental Branches
==========================
.PP
19.4.1 Guidelines
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
\&\s-1GDB\s0 permits the creation of branches, cut from the \s-1CVS\s0 repository, for
experimental development.  Branches make it possible for developers to
share preliminary work, and maintainers to examine significant new
developments.
.PP
The following are a set of guidelines for creating such branches:
.PP
_a branch has an owner_
The owner can set further policy for a branch, but may not change
the ground rules.  In particular, they can set a policy for
commits (be it adding more reviewers or deciding who can commit).
.PP
_all commits are posted_
All changes committed to a branch shall also be posted to the \s-1GDB\s0
patches mailing list <gdb\-patches@sourceware.org>.  While
commentary on such changes are encouraged, people should remember
that the changes only apply to a branch.
.PP
_all commits are covered by an assignment_
This ensures that all changes belong to the Free Software
Foundation, and avoids the possibility that the branch may become
contaminated.
.PP
_a branch is focused_
A focused branch has a single objective or goal, and does not
contain unnecessary or irrelevant changes.  Cleanups, where
identified, being be pushed into the mainline as soon as possible.
.PP
_a branch tracks mainline_
This keeps the level of divergence under control.  It also keeps
the pressure on developers to push cleanups and other stuff into
the mainline.
.PP
_a branch shall contain the entire \s-1GDB\s0 module_
The \s-1GDB\s0 module `\fBgdb\fR' should be specified when creating a branch
(branches of individual files should be avoided).  see \*(L"Tags\*(R".
.PP
_a branch shall be branded using `\fBversion.in\fR'_
The file `\fBgdb/version.in\fR' shall be modified so that it identifies
the branch \s-1OWNER\s0 and branch \s-1NAME,\s0 e.g.,
`\fB6.2.50.20030303_owner_name\fR' or `\fB6.2 (Owner Name)\fR'.
.PP
19.4.2 Tags
\&\-\-\-\-\-\-\-\-\-\-\-
.PP
To simplify the identification of \s-1GDB\s0 branches, the following branch
tagging convention is strongly recommended:
.PP
`\fBOWNER_NAME\-YYYYMMDD\-branchpoint\fR'
`\fBOWNER_NAME\-YYYYMMDD\-branch\fR'
The branch point and corresponding branch tag.  \s-1YYYYMMDD\s0 is the
date that the branch was created.  A branch is created using the
sequence:
cvs rtag OWNER_NAME\-YYYYMMDD\-branchpoint gdb
cvs rtag \-b \-r OWNER_NAME\-YYYYMMDD\-branchpoint \e
OWNER_NAME\-YYYYMMDD\-branch gdb
.PP
`\fBOWNER_NAME\-YYYYMMDD\-mergepoint\fR'
The tagged point, on the mainline, that was used when merging the
branch on \s-1YYYYMMDD. \s0 To merge in all changes since the branch was
cut, use a command sequence like:
cvs rtag OWNER_NAME\-YYYYMMDD\-mergepoint gdb
cvs update \e
\&\-jOWNER_NAME\-YYYYMMDD\-branchpoint
\&\-jOWNER_NAME\-YYYYMMDD\-mergepoint
Similar sequences can be used to just merge in changes since the
last merge.
.PP
For further information on \s-1CVS,\s0 see Concurrent Versions System
(http://www.gnu.org/software/cvs/).
.SS "20 Start of New Year Procedure"
.IX Subsection "20 Start of New Year Procedure"
At the start of each new year, the following actions should be
performed:
.PP
* Rotate the ChangeLog file
.PP
The current `\fBChangeLog\fR' file should be renamed into
`\fBChangeLog-YYYY\fR' where \s-1YYYY\s0 is the year that has just passed.  A
new `\fBChangeLog\fR' file should be created, and its contents should
contain a reference to the previous ChangeLog.  The following
should also be preserved at the end of the new ChangeLog, in order
to provide the appropriate settings when editing this file with
Emacs:
Local Variables:
mode: change-log
left-margin: 8
fill-column: 74
version-control: never
coding: utf\-8
End:
.PP
* Add an entry for the newly created ChangeLog file
(`\fBChangeLog-YYYY\fR') in `\fBgdb/config/djgpp/fnchange.lst\fR'.
.PP
* Update the copyright year in the startup message
.PP
Update the copyright year in:
*   file `\fBtop.c\fR', function `\fBprint_gdb_version\fR'
.PP
*   file `\fBgdbserver/server.c\fR', function `\fBgdbserver_version\fR'
.PP
*   file `\fBgdbserver/gdbreplay.c\fR', function `\fBgdbreplay_version\fR'
.PP
* Run the `\fBcopyright.py\fR' Python script to add the new year in the
copyright notices of most source files.  This script has been
tested with Python 2.6 and 2.7.
.SS "21 Releasing \s-1GDB\s0"
.IX Subsection "21 Releasing GDB"
21.1 Branch Commit Policy
=========================
.PP
The branch commit policy is pretty slack.  \s-1GDB\s0 releases 5.0, 5.1 and
5.2 all used the below:
.PP
* The `\fBgdb/MAINTAINERS\fR' file still holds.
.PP
* Don't fix something on the branch unless/until it is also fixed in
the trunk.  If this isn't possible, mentioning it in the
`\fBgdb/PROBLEMS\fR' file is better than committing a hack.
.PP
* When considering a patch for the branch, suggested criteria
include: Does it fix a build?  Does it fix the sequence `break
main; run' when debugging a static binary?
.PP
* The further a change is from the core of \s-1GDB,\s0 the less likely the
change will worry anyone (e.g., target specific code).
.PP
* Only post a proposal to change the core of \s-1GDB\s0 after you've sent
individual bribes to all the people listed in the `\fB\s-1MAINTAINERS\s0\fR'
file ;\-)
.PP
_Pragmatics: Provided updates are restricted to non-core
functionality there is little chance that a broken change will be fatal.
This means that changes such as adding a new architectures or (within
reason) support for a new host are considered acceptable._
.PP
21.2 Obsoleting code
====================
.PP
Before anything else, poke the other developers (and around the source
code) to see if there is anything that can be removed from \s-1GDB \s0(an old
target, an unused file).
.PP
Obsolete code is identified by adding an `\fB\s-1OBSOLETE\s0\fR' prefix to every
line.  Doing this means that it is easy to identify something that has
been obsoleted when greping through the sources.
.PP
The process is done in stages \*(-- this is mainly to ensure that the
wider \s-1GDB\s0 community has a reasonable opportunity to respond.  Remember,
everything on the Internet takes a week.
.PP
1. Post the proposal on the \s-1GDB\s0 mailing list <gdb@sourceware.org>
Creating a bug report to track the task's state, is also highly
recommended.
.PP
2. Wait a week or so.
.PP
3. Post the proposal on the \s-1GDB\s0 Announcement mailing list
<gdb\-announce@sourceware.org>.
.PP
4. Wait a week or so.
.PP
5. Go through and edit all relevant files and lines so that they are
prefixed with the word `\fB\s-1OBSOLETE\s0\fR'.
.PP
6. Wait until the next \s-1GDB\s0 version, containing this obsolete code,
has been released.
.PP
7. Remove the obsolete code.
.PP
_Maintainer note: While removing old code is regrettable it is
hopefully better for \s-1GDB\s0's long term development.  Firstly it helps the
developers by removing code that is either no longer relevant or simply
wrong.  Secondly since it removes any history associated with the file
(effectively clearing the slate) the developer has a much freer hand
when it comes to fixing broken files._
.PP
21.3 Before the Branch
======================
.PP
The most important objective at this stage is to find and fix simple
changes that become a pain to track once the branch is created.  For
instance, configuration problems that stop \s-1GDB\s0 from even building.  If
you can't get the problem fixed, document it in the `\fBgdb/PROBLEMS\fR' file.
.PP
Prompt for `\fBgdb/NEWS\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
People always forget.  Send a post reminding them but also if you know
something interesting happened add it yourself.  The `\fBschedule\fR' script
will mention this in its e\-mail.
.PP
Review `\fBgdb/README\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Grab one of the nightly snapshots and then walk through the
`\fBgdb/README\fR' looking for anything that can be improved.  The `\fBschedule\fR'
script will mention this in its e\-mail.
.PP
Refresh any imported files.
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
A number of files are taken from external repositories.  They include:
.PP
* `\fBtexinfo/texinfo.tex\fR'
.PP
* `\fBconfig.guess\fR' et. al. (see the top-level `\fB\s-1MAINTAINERS\s0\fR' file)
.PP
* `\fBetc/standards.texi\fR', `\fBetc/make\-stds.texi\fR'
.PP
Check the \s-1ARI
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\s0
.PP
A.R.I. is an `\fBawk\fR' script (Awk Regression Index ;\-) that checks for a
number of errors and coding conventions.  The checks include things
like using `\fBmalloc\fR' instead of `\fBxmalloc\fR' and file naming problems.
There shouldn't be any regressions.
.PP
21.3.1 Review the bug data base
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Close anything obviously fixed.
.PP
21.3.2 Check all cross targets build
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The targets are listed in `\fBgdb/MAINTAINERS\fR'.
.PP
21.4 Cut the Branch
===================
.PP
Create the branch
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
$  u=5.1
$  v=5.2
$  V=`\fBecho \f(CB$v\fB | sed \fR's/\e./_/g'`
$  D=`date \-u +%Y\-%m\-%d`
$  echo \f(CW$u\fR \f(CW$V\fR \f(CW$D\fR
5.1 5_2 2002\-03\-03
$  echo cvs \-f \-d :ext:sourceware.org:/cvs/src rtag \e
\&\-D \f(CW$D\fR\-gmt gdb_$V\-$D\-branchpoint insight
cvs \-f \-d :ext:sourceware.org:/cvs/src rtag
\&\-D 2002\-03\-03\-gmt gdb_5_2\-2002\-03\-03\-branchpoint insight
$  ^echo ^^
\&...
$  echo cvs \-f \-d :ext:sourceware.org:/cvs/src rtag \e
\&\-b \-r gdb_$V\-$D\-branchpoint gdb_$V\-branch insight
cvs \-f \-d :ext:sourceware.org:/cvs/src rtag \e
\&\-b \-r gdb_5_2\-2002\-03\-03\-branchpoint gdb_5_2\-branch insight
$  ^echo ^^
\&...
$
.PP
* By using `\fB\-D YYYY-MM-DD-gmt\fR', the branch is forced to an exact
date/time.
.PP
* The trunk is first tagged so that the branch point can easily be
found.
.PP
* Insight, which includes \s-1GDB,\s0 is tagged at the same time.
.PP
* `\fBversion.in\fR' gets bumped to avoid version number conflicts.
.PP
* The reading of `\fB.cvsrc\fR' is disabled using `\fB\-f\fR'.
.PP
Update `\fBversion.in\fR'
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
$  u=5.1
$  v=5.2
$  V=`\fBecho \f(CB$v\fB | sed \fR's/\e./_/g'`
$  echo \f(CW$u\fR \f(CW$v\fR$V
5.1 5_2
$  cd /tmp
$  echo cvs \-f \-d :ext:sourceware.org:/cvs/src co \e
\&\-r gdb_$V\-branch src/gdb/version.in
cvs \-f \-d :ext:sourceware.org:/cvs/src co
\&\-r gdb_5_2\-branch src/gdb/version.in
$  ^echo ^^
U src/gdb/version.in
$  cd src/gdb
$  echo \f(CW$u\fR.90\-0000\-00\-00\-cvs > version.in
$  cat version.in
5.1.90\-0000\-00\-00\-cvs
$  cvs \-f commit version.in
.PP
* `\fB0000\-00\-00\fR' is used as a date to pump prime the version.in update
mechanism.
.PP
* `\fB.90\fR' and the previous branch version are used as fairly arbitrary
initial branch version number.
.PP
Update the web and news pages
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Something?
.PP
Tweak cron to track the new branch
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The file `\fBgdbadmin/cron/crontab\fR' contains gdbadmin's cron table.  This
file needs to be updated so that:
.PP
* A daily timestamp is added to the file `\fBversion.in\fR'.
.PP
* The new branch is included in the snapshot process.
.PP
See the file `\fBgdbadmin/cron/README\fR' for how to install the updated cron
table.
.PP
The file `\fBgdbadmin/ss/README\fR' should also be reviewed to reflect any
changes.  That file is copied to both the branch/ and current/ snapshot
directories.
.PP
Update the \s-1NEWS\s0 and \s-1README\s0 files
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The `\fB\s-1NEWS\s0\fR' file needs to be updated so that on the branch it refers to
_changes in the current release_ while on the trunk it also refers to
_changes since the current release_.
.PP
The `\fB\s-1README\s0\fR' file needs to be updated so that it refers to the
current release.
.PP
Post the branch info
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Send an announcement to the mailing lists:
.PP
* \s-1GDB\s0 Announcement mailing list <gdb\-announce@sourceware.org>
.PP
* \s-1GDB\s0 Discussion mailing list <gdb@sourceware.org> and \s-1GDB\s0 Testers
mailing list <gdb\-testers@sourceware.org>
.PP
_Pragmatics: The branch creation is sent to the announce list to
ensure that people people not subscribed to the higher volume discussion
list are alerted._
.PP
The announcement should include:
.PP
* The branch tag.
.PP
* How to check out the branch using \s-1CVS.\s0
.PP
* The date/number of weeks until the release.
.PP
* The branch commit policy still holds.
.PP
21.5 Stabilize the branch
=========================
.PP
Something goes here.
.PP
21.6 Create a Release
=====================
.PP
The process of creating and then making available a release is broken
down into a number of stages.  The first part addresses the technical
process of creating a releasable tar ball.  The later stages address the
process of releasing that tar ball.
.PP
When making a release candidate just the first section is needed.
.PP
21.6.1 Create a release candidate
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The objective at this stage is to create a set of tar balls that can be
made available as a formal release (or as a less formal release
candidate).
.PP
Freeze the branch
\&.................
.PP
Send out an e\-mail notifying everyone that the branch is frozen to
<gdb\-patches@sourceware.org>.
.PP
Establish a few defaults.
\&.........................
.PP
$  b=gdb_5_2\-branch
$  v=5.2
$  t=/sourceware/snapshot\-tmp/gdbadmin\-tmp
$  echo \f(CW$t\fR/$b/$v
/sourceware/snapshot\-tmp/gdbadmin\-tmp/gdb_5_2\-branch/5.2
$  mkdir \-p \f(CW$t\fR/$b/$v
$  cd \f(CW$t\fR/$b/$v
$  pwd
/sourceware/snapshot\-tmp/gdbadmin\-tmp/gdb_5_2\-branch/5.2
$  which autoconf
/home/gdbadmin/bin/autoconf
$
.PP
Notes:
.PP
* Check the `\fBautoconf\fR' version carefully.  You want to be using the
version documented in the toplevel `\fBREADME-maintainer-mode\fR' file.
It is very unlikely that the version of `\fBautoconf\fR' installed in
system directories (e.g., `\fB/usr/bin/autoconf\fR') is correct.
.PP
Check out the relevant modules:
\&...............................
.PP
$  for m in gdb insight
do
( mkdir \-p \f(CW$m\fR && cd \f(CW$m\fR && cvs \-q \-f \-d /cvs/src co \-P \-r \f(CW$b\fR \f(CW$m\fR )
done
$
.PP
Note:
.PP
* The reading of `\fB.cvsrc\fR' is disabled (`\fB\-f\fR') so that there isn't any
confusion between what is written here and what your local `\fBcvs\fR'
really does.
.PP
Update relevant files.
\&......................
.PP
`\fBgdb/NEWS\fR'
Major releases get their comments added as part of the mainline.
Minor releases should probably mention any significant bugs that
were fixed.
.PP
Don't forget to include the `\fBChangeLog\fR' entry.
.PP
$  emacs gdb/src/gdb/NEWS
\&...
c\-x 4 a
\&...
c\-x c\-s c\-x c\-c
$  cp gdb/src/gdb/NEWS insight/src/gdb/NEWS
$  cp gdb/src/gdb/ChangeLog insight/src/gdb/ChangeLog
.PP
`\fBgdb/README\fR'
You'll need to update:
.PP
* The version.
.PP
* The update date.
.PP
* Who did it.
.PP
$  emacs gdb/src/gdb/README
\&...
c\-x 4 a
\&...
c\-x c\-s c\-x c\-c
$  cp gdb/src/gdb/README insight/src/gdb/README
$  cp gdb/src/gdb/ChangeLog insight/src/gdb/ChangeLog
.PP
_Maintainer note: Hopefully the `\fB\s-1README\s0\fR' file was reviewed before
the initial branch was cut so just a simple substitute is needed
to get it updated._
.PP
_Maintainer note: Other projects generate `\fB\s-1README\s0\fR' and `\fB\s-1INSTALL\s0\fR'
from the core documentation.  This might be worth pursuing._
.PP
`\fBgdb/version.in\fR'
$  echo \f(CW$v\fR > gdb/src/gdb/version.in
$  cat gdb/src/gdb/version.in
5.2
$  emacs gdb/src/gdb/version.in
\&...
c\-x 4 a
\&... Bump to version ...
c\-x c\-s c\-x c\-c
$  cp gdb/src/gdb/version.in insight/src/gdb/version.in
$  cp gdb/src/gdb/ChangeLog insight/src/gdb/ChangeLog
.PP
Do the dirty work
\&.................
.PP
This is identical to the process used to create the daily snapshot.
.PP
$  for m in gdb insight
do
( cd \f(CW$m\fR/src && gmake \-f src-release \f(CW$m\fR.tar )
done
.PP
If the top level source directory does not have `\fBsrc-release\fR' (\s-1GDB\s0
version 5.3.1 or earlier), try these commands instead:
.PP
$  for m in gdb insight
do
( cd \f(CW$m\fR/src && gmake \-f Makefile.in \f(CW$m\fR.tar )
done
.PP
Check the source files
\&......................
.PP
You're looking for files that have mysteriously disappeared.
`\fBdistclean\fR' has the habit of deleting files it shouldn't.  Watch out
for the `\fBversion.in\fR' update `\fBcronjob\fR'.
.PP
$  ( cd gdb/src && cvs \-f \-q \-n update )
M djunpack.bat
? gdb\-5.1.91.tar
? proto-toplev
\&... lots of generated files ...
M gdb/ChangeLog
M gdb/NEWS
M gdb/README
M gdb/version.in
\&... lots of generated files ...
$
.PP
_Don't worry about the `\fBgdb.info\-??\fR' or `\fBgdb/p\-exp.tab.c\fR'.  They were
generated (and yes `\fBgdb.info\-1\fR' was also generated only something
strange with \s-1CVS\s0 means that they didn't get suppressed).  Fixing it
would be nice though._
.PP
Create compressed versions of the release
\&.........................................
.PP
$  cp */src/*.tar .
$  cp */src/*.bz2 .
$  ls \-F
gdb/ gdb\-5.2.tar insight/ insight\-5.2.tar
$  for m in gdb insight
do
bzip2 \-v \-9 \-c \f(CW$m\fR\-$v.tar > \f(CW$m\fR\-$v.tar.bz2
gzip \-v \-9 \-c \f(CW$m\fR\-$v.tar > \f(CW$m\fR\-$v.tar.gz
done
$
.PP
Note:
.PP
* A pipe such as `\fBbunzip2 < xxx.bz2 | gzip \-9 > xxx.gz\fR' is not since,
in that mode, `\fBgzip\fR' does not know the name of the file and, hence,
can not include it in the compressed file.  This is also why the
release process runs `\fBtar\fR' and `\fBbzip2\fR' as separate passes.
.PP
21.6.2 Sanity check the tar ball
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
Pick a popular machine (Solaris/PPC?) and try the build on that.
.PP
$  bunzip2 < gdb\-5.2.tar.bz2 | tar xpf \-
$  cd gdb\-5.2
$  ./configure
$  make
\&...
$  ./gdb/gdb ./gdb/gdb
\&\s-1GNU\s0 gdb 5.2
\&...
(gdb)  b main
Breakpoint 1 at 0x80732bc: file main.c, line 734.
(gdb)  run
Starting program: /tmp/gdb\-5.2/gdb/gdb
.PP
Breakpoint 1, main (argc=1, argv=0xbffff8b4) at main.c:734
734       catch_errors (captured_main, &args, "", \s-1RETURN_MASK_ALL\s0);
(gdb)  print args
\&\f(CW$1\fR = {argc = 136426532, argv = 0x821b7f0}
(gdb)
.PP
21.6.3 Make a release candidate available
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
If this is a release candidate then the only remaining steps are:
.PP
1. Commit `\fBversion.in\fR' and `\fBChangeLog\fR'
.PP
2. Tweak `\fBversion.in\fR' (and `\fBChangeLog\fR' to read L.M.N\-0000\-00\-00\-cvs
so that the version update process can restart.
.PP
3. Make the release candidate available in
`\fBftp://sourceware.org/pub/gdb/snapshots/branch\fR'
.PP
4. Notify the relevant mailing lists ( <gdb@sourceware.org> and
<gdb\-testers@sourceware.org> that the candidate is available.
.PP
21.6.4 Make a formal release available
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
(And you thought all that was required was to post an e\-mail.)
.PP
Install on sware
\&................
.PP
Copy the new files to both the release and the old release directory:
.PP
$  cp *.bz2 *.gz ~ftp/pub/gdb/old\-releases/
$  cp *.bz2 *.gz ~ftp/pub/gdb/releases
.PP
Clean up the releases directory so that only the most recent releases
are available (e.g. keep 5.2 and 5.2.1 but remove 5.1):
.PP
$  cd ~ftp/pub/gdb/releases
$  rm ...
.PP
Update the file `\fB\s-1README\s0\fR' and `\fB.message\fR' in the releases directory:
.PP
$  vi \s-1README
\&...
$ \s0 rm \-f .message
$  ln \s-1README \s0.message
.PP
Update the web pages.
\&.....................
.PP
`\fBhtdocs/download/ANNOUNCEMENT\fR'
This file, which is posted as the official announcement, includes:
* General announcement.
.PP
* News.  If making an M.N.1 release, retain the news from
earlier M.N release.
.PP
* Errata.
.PP
`\fBhtdocs/index.html\fR'
`\fBhtdocs/news/index.html\fR'
`\fBhtdocs/download/index.html\fR'
These files include:
* Announcement of the most recent release.
.PP
* News entry (remember to update both the top level and the
news directory).
These pages also need to be regenerate using `\fBindex.sh\fR'.
.PP
`\fBdownload/onlinedocs/\fR'
You need to find the magic command that is used to generate the
online docs from the `\fB.tar.bz2\fR'.  The best way is to look in the
output from one of the nightly `\fBcron\fR' jobs and then just edit
accordingly.  Something like:
.PP
$  ~/ss/update\-web\-docs \e
~ftp/pub/gdb/releases/gdb\-5.2.tar.bz2 \e
\&\f(CW$PWD\fR/www \e
/www/sourceware/htdocs/gdb/download/onlinedocs \e
gdb
.PP
`\fBdownload/ari/\fR'
Just like the online documentation.  Something like:
.PP
$  /bin/sh ~/ss/update\-web\-ari \e
~ftp/pub/gdb/releases/gdb\-5.2.tar.bz2 \e
\&\f(CW$PWD\fR/www \e
/www/sourceware/htdocs/gdb/download/ari \e
gdb
.PP
Shadow the pages onto gnu
\&.........................
.PP
Something goes here.
.PP
Install the \s-1GDB\s0 tar ball on \s-1GNU
\&...............................\s0
.PP
At the time of writing, the \s-1GNU\s0 machine was `\fBgnudist.gnu.org\fR' in
`\fB~ftp/gnu/gdb\fR'.
.PP
Make the `\fB\s-1ANNOUNCEMENT\s0\fR'
\&.......................
.PP
Post the `\fB\s-1ANNOUNCEMENT\s0\fR' file you created above to:
.PP
* \s-1GDB\s0 Announcement mailing list <gdb\-announce@sourceware.org>
.PP
* General \s-1GNU\s0 Announcement list <info\-gnu@gnu.org> (but delay it a
day or so to let things get out)
.PP
* \s-1GDB\s0 Bug Report mailing list <bug\-gdb@gnu.org>
.PP
21.6.5 Cleanup
\&\-\-\-\-\-\-\-\-\-\-\-\-\-\-
.PP
The release is out but you're still not finished.
.PP
Commit outstanding changes
\&..........................
.PP
In particular you'll need to commit any changes to:
.PP
* `\fBgdb/ChangeLog\fR'
.PP
* `\fBgdb/version.in\fR'
.PP
* `\fBgdb/NEWS\fR'
.PP
* `\fBgdb/README\fR'
.PP
Tag the release
\&...............
.PP
Something like:
.PP
$  d=`date \-u +%Y\-%m\-%d`
$  echo \f(CW$d\fR
2002\-01\-24
$  ( cd insight/src/gdb && cvs \-f \-q update )
$  ( cd insight/src && cvs \-f \-q tag gdb_5_2\-$d\-release )
.PP
Insight is used since that contains more of the release than \s-1GDB.\s0
.PP
Mention the release on the trunk
\&................................
.PP
Just put something in the `\fBChangeLog\fR' so that the trunk also indicates
when the release was made.
.PP
Restart `\fBgdb/version.in\fR'
\&........................
.PP
If `\fBgdb/version.in\fR' does not contain an \s-1ISO\s0 date such as `\fB2002\-01\-24\fR'
then the daily `\fBcronjob\fR' won't update it.  Having committed all the
release changes it can be set to `\fB5.2.0_0000\-00\-00\-cvs\fR' which will
restart things (yes the `\fB_\fR' is important \- it affects the snapshot
process).
.PP
Don't forget the `\fBChangeLog\fR'.
.PP
Merge into trunk
\&................
.PP
The files committed to the branch may also need changes merged into the
trunk.
.PP
Revise the release schedule
\&...........................
.PP
Post a revised release schedule to \s-1GDB\s0 Discussion List
<gdb@sourceware.org> with an updated announcement.  The schedule can be
generated by running:
.PP
$  ~/ss/schedule `date +%s` schedule
.PP
The first parameter is approximate date/time in seconds (from the epoch)
of the most recent release.
.PP
Also update the schedule `\fBcronjob\fR'.
.PP
21.7 Post release
=================
.PP
Remove any `\fB\s-1OBSOLETE\s0\fR' code.
.SS "22 Testsuite"
.IX Subsection "22 Testsuite"
The testsuite is an important component of the \s-1GDB\s0 package.  While it
is always worthwhile to encourage user testing, in practice this is
rarely sufficient; users typically use only a small subset of the
available commands, and it has proven all too common for a change to
cause a significant regression that went unnoticed for some time.
.PP
The \s-1GDB\s0 testsuite uses the DejaGNU testing framework.  The tests
themselves are calls to various `\fBTcl\fR' procs; the framework runs all the
procs and summarizes the passes and fails.
.PP
22.1 Using the Testsuite
========================
.PP
To run the testsuite, simply go to the \s-1GDB\s0 object directory (or to the
testsuite's objdir) and type `\fBmake check\fR'.  This just sets up some
environment variables and invokes DejaGNU's `\fBruntest\fR' script.  While
the testsuite is running, you'll get mentions of which test file is in
use, and a mention of any unexpected passes or fails.  When the
testsuite is finished, you'll get a summary that looks like this:
.PP
=== gdb Summary ===
.PP
# of expected passes            6016
# of unexpected failures        58
# of unexpected successes       5
# of expected failures          183
# of unresolved testcases       3
# of untested testcases         5
.PP
To run a specific test script, type:
make check RUNTESTFLAGS='\s-1TESTS\s0'
where \s-1TESTS\s0 is a list of test script file names, separated by spaces.
.PP
If you use \s-1GNU\s0 make, you can use its `\fB\-j\fR' option to run the
testsuite in parallel.  This can greatly reduce the amount of time it
takes for the testsuite to run.  In this case, if you set
`\fB\s-1RUNTESTFLAGS\s0\fR' then, by default, the tests will be run serially even
under `\fB\-j\fR'.  You can override this and force a parallel run by setting
the `\fBmake\fR' variable `\fB\s-1FORCE_PARALLEL\s0\fR' to any non-empty value.  Note that
the parallel `\fBmake check\fR' assumes that you want to run the entire
testsuite, so it is not compatible with some dejagnu options, like
`\fB\-\-directory\fR'.
.PP
The ideal test run consists of expected passes only; however, reality
conspires to keep us from this ideal.  Unexpected failures indicate
real problems, whether in \s-1GDB\s0 or in the testsuite.  Expected failures
are still failures, but ones which have been decided are too hard to
deal with at the time; for instance, a test case might work everywhere
except on \s-1AIX,\s0 and there is no prospect of the \s-1AIX\s0 case being fixed in
the near future.  Expected failures should not be added lightly, since
you may be masking serious bugs in \s-1GDB. \s0 Unexpected successes are
expected fails that are passing for some reason, while unresolved and
untested cases often indicate some minor catastrophe, such as the
compiler being unable to deal with a test program.
.PP
When making any significant change to \s-1GDB,\s0 you should run the
testsuite before and after the change, to confirm that there are no
regressions.  Note that truly complete testing would require that you
run the testsuite with all supported configurations and a variety of
compilers; however this is more than really necessary.  In many cases
testing with a single configuration is sufficient.  Other useful
options are to test one big-endian (Sparc) and one little-endian (x86)
host, a cross config with a builtin simulator (powerpc-eabi, mips-elf),
or a 64\-bit host (Alpha).
.PP
If you add new functionality to \s-1GDB,\s0 please consider adding tests
for it as well; this way future \s-1GDB\s0 hackers can detect and fix their
changes that break the functionality you added.  Similarly, if you fix
a bug that was not previously reported as a test failure, please add a
test case for it.  Some cases are extremely difficult to test, such as
code that handles host \s-1OS\s0 failures or bugs in particular versions of
compilers, and it's \s-1OK\s0 not to try to write tests for all of those.
.PP
DejaGNU supports separate build, host, and target machines.  However,
some \s-1GDB\s0 test scripts do not work if the build machine and the host
machine are not the same.  In such an environment, these scripts will
give a result of \*(L"\s-1UNRESOLVED\*(R",\s0 like this:
.PP
\&\s-1UNRESOLVED:\s0 gdb.base/example.exp: This test script does not work on a remote host.
.PP
22.2 Testsuite Parameters
=========================
.PP
Several variables exist to modify the behavior of the testsuite.
.PP
* `\fB\s-1TRANSCRIPT\s0\fR'
.PP
Sometimes it is convenient to get a transcript of the commands
which the testsuite sends to \s-1GDB. \s0 For example, if \s-1GDB\s0 crashes
during testing, a transcript can be used to more easily
reconstruct the failure when running \s-1GDB\s0 under \s-1GDB.\s0
.PP
You can instruct the \s-1GDB\s0 testsuite to write transcripts by setting
the DejaGNU variable `\fB\s-1TRANSCRIPT\s0\fR' (to any value) before invoking
`\fBruntest\fR' or `\fBmake check\fR'.  The transcripts will be written into
DejaGNU's output directory.  One transcript will be made for each
invocation of \s-1GDB\s0; they will be named `\fBtranscript.N\fR', where N is
an integer.  The first line of the transcript file will show how
\&\s-1GDB\s0 was invoked; each subsequent line is a command sent as input
to \s-1GDB.\s0
.PP
make check RUNTESTFLAGS=TRANSCRIPT=y
.PP
Note that the transcript is not always complete.  In particular,
tests of completion can yield partial command lines.
.PP
* `\fB\s-1GDB\s0\fR'
.PP
Sometimes one wishes to test a different \s-1GDB\s0 than the one in the
build directory.  For example, one may wish to run the testsuite on
`\fB/usr/bin/gdb\fR'.
.PP
make check RUNTESTFLAGS=GDB=/usr/bin/gdb
.PP
* `\fB\s-1GDBSERVER\s0\fR'
.PP
When testing a different \s-1GDB,\s0 it is often useful to also test a
different gdbserver.
.PP
make check RUNTESTFLAGS=\*(L"GDB=/usr/bin/gdb GDBSERVER=/usr/bin/gdbserver\*(R"
.PP
* `\fB\s-1INTERNAL_GDBFLAGS\s0\fR'
.PP
When running the testsuite normally one doesn't want whatever is in
`\fB~/.gdbinit\fR' to interfere with the tests, therefore the test
harness passes `\fB\-nx\fR' to \s-1GDB. \s0 One also doesn't want any windowed
version of \s-1GDB,\s0 e.g., `\fBgdb \-tui\fR', to run.  This is achieved via
`\fB\s-1INTERNAL_GDBFLAGS\s0\fR'.
.PP
set \s-1INTERNAL_GDBFLAGS \s0\*(L"\-nw \-nx\*(R"
.PP
This is all well and good, except when testing an installed \s-1GDB\s0
that has been configured with `\fB\-\-with\-system\-gdbinit\fR'.  Here one
does not want `\fB~/.gdbinit\fR' loaded but one may want the system
`\fB.gdbinit\fR' file loaded.  This can be achieved by pointing `\fB\f(CB$HOME\fB\fR'
at a directory without a `\fB.gdbinit\fR' and by overriding
`\fB\s-1INTERNAL_GDBFLAGS\s0\fR' and removing `\fB\-nx\fR'.
.PP
cd testsuite
HOME=`pwd` runtest \e
GDB=/usr/bin/gdb \e
GDBSERVER=/usr/bin/gdbserver \e
INTERNAL_GDBFLAGS=\-nw
.PP
There are two ways to run the testsuite and pass additional
parameters to DejaGnu.  The first is with `\fBmake check\fR' and specifying
the makefile variable `\fB\s-1RUNTESTFLAGS\s0\fR'.
.PP
make check RUNTESTFLAGS=TRANSCRIPT=y
.PP
The second is to cd to the `\fBtestsuite\fR' directory and invoke the
DejaGnu `\fBruntest\fR' command directly.
.PP
cd testsuite
make site.exp
runtest TRANSCRIPT=y
.PP
22.3 Testsuite Configuration
============================
.PP
It is possible to adjust the behavior of the testsuite by defining the
global variables listed below, either in a `\fBsite.exp\fR' file, or in a
board file.
.PP
* `\fBgdb_test_timeout\fR'
.PP
Defining this variable changes the default timeout duration used
during communication with \s-1GDB. \s0 More specifically, the global
variable used during testing is `\fBtimeout\fR', but this variable gets
reset to `\fBgdb_test_timeout\fR' at the beginning of each testcase,
making sure that any local change to `\fBtimeout\fR' in a testcase does
not affect subsequent testcases.
.PP
This global variable comes in handy when the debugger is slower
than normal due to the testing environment, triggering unexpected
`\fB\s-1TIMEOUT\s0\fR' test failures.  Examples include when testing on a
remote machine, or against a system where communications are slow.
.PP
If not specifically defined, this variable gets automatically
defined to the same value as `\fBtimeout\fR' during the testsuite
initialization.  The default value of the timeout is defined in
the file `\fBgdb/testsuite/config/unix.exp\fR' that is part of the \s-1GDB\s0
test \fIsuite\fR\|(1).
.PP
22.4 Testsuite Organization
===========================
.PP
The testsuite is entirely contained in `\fBgdb/testsuite\fR'.  While the
testsuite includes some makefiles and configury, these are very minimal,
and used for little besides cleaning up, since the tests themselves
handle the compilation of the programs that \s-1GDB\s0 will run.  The file
`\fBtestsuite/lib/gdb.exp\fR' contains common utility procs useful for all
\&\s-1GDB\s0 tests, while the directory `\fBtestsuite/config\fR' contains
configuration-specific files, typically used for special-purpose
definitions of procs like `\fBgdb_load\fR' and `\fBgdb_start\fR'.
.PP
The tests themselves are to be found in `\fBtestsuite/gdb.*\fR' and
subdirectories of those.  The names of the test files must always end
with `\fB.exp\fR'.  DejaGNU collects the test files by wildcarding in the
test directories, so both subdirectories and individual files get
chosen and run in alphabetical order.
.PP
The following table lists the main types of subdirectories and what
they are for.  Since DejaGNU finds test files no matter where they are
located, and since each test file sets up its own compilation and
execution environment, this organization is simply for convenience and
intelligibility.
.PP
`\fBgdb.base\fR'
This is the base testsuite.  The tests in it should apply to all
configurations of \s-1GDB \s0(but generic native-only tests may live
here).  The test programs should be in the subset of C that is
valid K&R, \s-1ANSI/ISO,\s0 and \*(C+ (`\fB#ifdef\fR's are allowed if necessary,
for instance for prototypes).
.PP
`\fBgdb.LANG\fR'
Language-specific tests for any language \s-1LANG\s0 besides C.  Examples
are `\fBgdb.cp\fR' and `\fBgdb.java\fR'.
.PP
`\fBgdb.PLATFORM\fR'
Non-portable tests.  The tests are specific to a specific
configuration (host or target), such as HP-UX or eCos.  Example is
`\fBgdb.hp\fR', for HP-UX.
.PP
`\fBgdb.COMPILER\fR'
Tests specific to a particular compiler.  As of this writing (June
1999), there aren't currently any groups of tests in this category
that couldn't just as sensibly be made platform-specific, but one
could imagine a `\fBgdb.gcc\fR', for tests of \s-1GDB\s0's handling of \s-1GCC\s0
extensions.
.PP
`\fBgdb.SUBSYSTEM\fR'
Tests that exercise a specific \s-1GDB\s0 subsystem in more depth.  For
instance, `\fBgdb.disasm\fR' exercises various disassemblers, while
`\fBgdb.stabs\fR' tests pathways through the stabs symbol reader.
.PP
22.5 Writing Tests
==================
.PP
In many areas, the \s-1GDB\s0 tests are already quite comprehensive; you
should be able to copy existing tests to handle new cases.
.PP
You should try to use `\fBgdb_test\fR' whenever possible, since it
includes cases to handle all the unexpected errors that might happen.
However, it doesn't cost anything to add new test procedures; for
instance, `\fBgdb.base/exprs.exp\fR' defines a `\fBtest_expr\fR' that calls
`\fBgdb_test\fR' multiple times.
.PP
Only use `\fBsend_gdb\fR' and `\fBgdb_expect\fR' when absolutely necessary.
Even if \s-1GDB\s0 has several valid responses to a command, you can use
`\fBgdb_test_multiple\fR'.  Like `\fBgdb_test\fR', `\fBgdb_test_multiple\fR' recognizes
internal errors and unexpected prompts.
.PP
Do not write tests which expect a literal tab character from \s-1GDB.\s0
On some operating systems (e.g. OpenBSD) the \s-1TTY\s0 layer expands tabs to
spaces, so by the time \s-1GDB\s0's output reaches expect the tab is gone.
.PP
The source language programs do _not_ need to be in a consistent
style.  Since \s-1GDB\s0 is used to debug programs written in many different
styles, it's worth having a mix of styles in the testsuite; for
instance, some \s-1GDB\s0 bugs involving the display of source lines would
never manifest themselves if the programs used \s-1GNU\s0 coding style
uniformly.
.PP
Some testcase results need more detailed explanation:
.PP
`\fB\s-1KFAIL\s0\fR'
Known problem of \s-1GDB\s0 itself.  You must specify the \s-1GDB\s0 bug report
number like in these sample tests:
kfail \*(L"gdb/13392\*(R" \*(L"continue to marker 2\*(R"
or
setup_kfail gdb/13392 \*(L"*\-*\-*\*(R"
kfail \*(L"continue to marker 2\*(R"
.PP
`\fB\s-1XFAIL\s0\fR'
Known problem of environment.  This typically includes \s-1GCC\s0 but it
includes also many other system components which cannot be fixed
in the \s-1GDB\s0 project.  Sample test with sanity check not knowing the
specific cause of the problem:
# On x86_64 it is commonly about 4MB.
if {$stub_size > 25000000} {
xfail \*(L"stub size \f(CW$stub_size\fR is too large\*(R"
return
}
.PP
You should provide bug report number for the failing component of
the environment, if such bug report is available:
if {[test_compiler_info {gcc\-[0\-3]\-*}]
|| [test_compiler_info {gcc\-4\-[0\-5]\-*}]} {
setup_xfail \*(L"gcc/46955\*(R" *\-*\-*
}
gdb_test \*(L"python print \fIttype.template_argument\fR\|(2)\*(R" \*(L"&C::c\*(R"
.PP
22.6 Board settings
===================
.PP
In \s-1GDB\s0 testsuite, the tests can be configured or customized in the board
file by means of \*(L"Board Settings\*(R".  Each setting   should be consulted
by test cases that depend on the corresponding feature.
.PP
Here are the supported board settings:
.PP
`\fBgdb,cannot_call_functions\fR'
The board does not support inferior call, that is, invoking
inferior functions in \s-1GDB.\s0
.PP
`\fBgdb,can_reverse\fR'
The board supports reverse execution.
.PP
`\fBgdb,no_hardware_watchpoints\fR'
The board does not support hardware watchpoints.
.PP
`\fBgdb,nofileio\fR'
\&\s-1GDB\s0 is unable to intercept target file operations in remote and
perform them on the host.
.PP
`\fBgdb,noinferiorio\fR'
The board is unable to provide I/O capability to the inferior.
.PP
`\fBgdb,nosignals\fR'
The board does not support signals.
.PP
`\fBgdb,skip_huge_test\fR'
Skip time-consuming tests on the board with slow connection.
.PP
`\fBgdb,skip_float_tests\fR'
Skip tests related to float points on target board.
.PP
`\fBgdb,use_precord\fR'
The board supports process record.
.PP
`\fBgdb_server_prog\fR'
The location of GDBserver.  If GDBserver somewhere other than its
default location is used in test, specify the location of
GDBserver in this variable.  The location is a file name of
GDBserver that can be either absolute or relative to testsuite
subdirectory in build directory.
.PP
`\fBin_proc_agent\fR'
The location of in-process agent.  If in-process agent other than
its default location is used in test, specify the location of
in-process agent in this variable.  The location is a file name of
in-process agent that can be either  absolute or relative to
testsuite subdirectory in build directory.
.PP
`\fBnoargs\fR'
\&\s-1GDB\s0 does not support argument passing for inferior.
.PP
`\fBno_long_long\fR'
The board does not support type `\fBlong long\fR'.
.PP
`\fBuse_gdb_stub\fR'
The tests are running with gdb stub.
.PP
\&\-\-\-\-\-\-\-\-\-\- Footnotes \-\-\-\-\-\-\-\-\-\-
.PP
(1) If you are using a board file, it could override the test-suite
default; search the board file for \*(L"timeout\*(R".
.SS "23 Hints"
.IX Subsection "23 Hints"
Check the `\fB\s-1README\s0\fR' file, it often has useful information that does not
appear anywhere else in the directory.
.PP
* Menu:
.PP
Getting started working on \s-1GDB:\s0 see \*(L"Getting Started\*(R"
.PP
Debugging \s-1GDB\s0 with itself: see \*(L"Debugging \s-1GDB\*(R"\s0
.PP
\&\fB23.1 Getting Started\fR
.PP
\&\s-1GDB\s0 is a large and complicated program, and if you first starting to
work on it, it can be hard to know where to start.  Fortunately, if you
know how to go about it, there are ways to figure out what is going on.
.PP
This manual, the \s-1GDB\s0 Internals manual, has information which applies
generally to many parts of \s-1GDB.\s0
.PP
Information about particular functions or data structures are
located in comments with those functions or data structures.  If you
run across a function or a global variable which does not have a
comment correctly explaining what is does, this can be thought of as a
bug in \s-1GDB\s0; feel free to submit a bug report, with a suggested comment
if you can figure out what the comment should say.  If you find a
comment which is actually wrong, be especially sure to report that.
.PP
Comments explaining the function of macros defined in host, target,
or native dependent files can be in several places.  Sometimes they are
repeated every place the macro is defined.  Sometimes they are where the
macro is used.  Sometimes there is a header file which supplies a
default definition of the macro, and the comment is there.  This manual
also documents all the available macros.
.PP
Start with the header files.  Once you have some idea of how \s-1GDB\s0's
internal symbol tables are stored (see `\fBsymtab.h\fR', `\fBgdbtypes.h\fR'), you
will find it much easier to understand the code which uses and creates
those symbol tables.
.PP
You may wish to process the information you are getting somehow, to
enhance your understanding of it.  Summarize it, translate it to another
language, add some (perhaps trivial or non-useful) feature to \s-1GDB,\s0 use
the code to predict what a test case would do and write the test case
and verify your prediction, etc.  If you are reading code and your eyes
are starting to glaze over, this is a sign you need to use a more active
approach.
.PP
Once you have a part of \s-1GDB\s0 to start with, you can find more
specifically the part you are looking for by stepping through each
function with the `\fBnext\fR' command.  Do not use `\fBstep\fR' or you will
quickly get distracted; when the function you are stepping through
calls another function try only to get a big-picture understanding
(perhaps using the comment at the beginning of the function being
called) of what it does.  This way you can identify which of the
functions being called by the function you are stepping through is the
one which you are interested in.  You may need to examine the data
structures generated at each stage, with reference to the comments in
the header files explaining what the data structures are supposed to
look like.
.PP
Of course, this same technique can be used if you are just reading
the code, rather than actually stepping through it.  The same general
principle applies\*(--when the code you are looking at calls something
else, just try to understand generally what the code being called does,
rather than worrying about all its details.
.PP
A good place to start when tracking down some particular area is with
a command which invokes that feature.  Suppose you want to know how
single-stepping works.  As a \s-1GDB\s0 user, you know that the `\fBstep\fR' command
invokes single-stepping.  The command is invoked via command tables
(see `\fBcommand.h\fR'); by convention the function which actually performs
the command is formed by taking the name of the command and adding
`\fB_command\fR', or in the case of an `\fBinfo\fR' subcommand, `\fB_info\fR'.  For
example, the `\fBstep\fR' command invokes the `\fBstep_command\fR' function and the
`\fBinfo display\fR' command invokes `\fBdisplay_info\fR'.  When this convention is
not followed, you might have to use `\fBgrep\fR' or `\fBM\-x tags-search\fR' in
emacs, or run \s-1GDB\s0 on itself and set a breakpoint in `\fBexecute_command\fR'.
.PP
If all of the above fail, it may be appropriate to ask for
information on `\fBbug-gdb\fR'.  But _never_ post a generic question like \*(L"I
was wondering if anyone could give me some tips about understanding
\&\s-1GDB\s0\*(R"\-\-if we had some magic secret we would put it in this manual.
Suggestions for improving the manual are always welcome, of course.
.PP
\&\fB23.2 Debugging \s-1GDB\s0 with itself\fR
.PP
If \s-1GDB\s0 is limping on your machine, this is the preferred way to get it
fully functional.  Be warned that in some ancient Unix systems, like
Ultrix 4.2, a program can't be running in one process while it is being
debugged in another.  Rather than typing the command `\fB./gdb ./gdb\fR',
which works on Suns and such, you can copy `\fBgdb\fR' to `\fBgdb2\fR' and then
type `\fB./gdb ./gdb2\fR'.
.PP
When you run \s-1GDB\s0 in the \s-1GDB\s0 source directory, it will read
`\fBgdb\-gdb.gdb\fR' file (plus possibly `\fBgdb\-gdb.py\fR' file) that sets up some
simple things to make debugging gdb easier.  The `\fBinfo\fR' command, when
executed without a subcommand in a \s-1GDB\s0 being debugged by gdb, will pop
you back up to the top level gdb.  See `\fBgdb\-gdb.gdb\fR' for details.
.PP
If you use emacs, you will probably want to do a `\fBmake \s-1TAGS\s0\fR' after
you configure your distribution; this will put the machine dependent
routines for your local machine where they will be accessed first by
`\fBM\-.\fR'
.PP
Also, make sure that you've either compiled \s-1GDB\s0 with your local cc,
or have run `\fBfixincludes\fR' if you are compiling with gcc.
.PP
23.3 Submitting Patches
=======================
.PP
Thanks for thinking of offering your changes back to the community of
\&\s-1GDB\s0 users.  In general we like to get well designed enhancements.
Thanks also for checking in advance about the best way to transfer the
changes.
.PP
The \s-1GDB\s0 maintainers will only install \*(L"cleanly designed\*(R" patches.
This manual summarizes what we believe to be clean design for \s-1GDB.\s0
.PP
If the maintainers don't have time to put the patch in when it
arrives, or if there is any question about a patch, it goes into a
large queue with everyone else's patches and bug reports.
.PP
The legal issue is that to incorporate substantial changes requires a
copyright assignment from you and/or your employer, granting ownership
of the changes to the Free Software Foundation.  You can get the
standard documents for doing this by sending mail to `\fBgnu@gnu.org\fR' and
asking for it.  We recommend that people write in \*(L"All programs owned
by the Free Software Foundation\*(R" as \*(L"\s-1NAME OF PROGRAM\*(R",\s0 so that changes
in many programs (not just \s-1GDB,\s0 but \s-1GAS,\s0 Emacs, \s-1GCC,\s0 etc) can be
contributed with only one piece of legalese pushed through the
bureaucracy and filed with the \s-1FSF. \s0 We can't start merging changes
until this paperwork is received by the \s-1FSF \s0(their rules, which we
follow since we maintain it for them).
.PP
Technically, the easiest way to receive changes is to receive each
feature as a small context diff or unidiff, suitable for `\fBpatch\fR'.  Each
message sent to me should include the changes to C code and header
files for a single feature, plus `\fBChangeLog\fR' entries for each directory
where files were modified, and diffs for any changes needed to the
manuals (`\fBgdb/doc/gdb.texinfo\fR' or `\fBgdb/doc/gdbint.texinfo\fR').  If there
are a lot of changes for a single feature, they can be split down into
multiple messages.
.PP
In this way, if we read and like the feature, we can add it to the
sources with a single patch command, do some testing, and check it in.
If you leave out the `\fBChangeLog\fR', we have to write one.  If you leave
out the doc, we have to puzzle out what needs documenting.  Etc., etc.
.PP
The reason to send each change in a separate message is that we will
not install some of the changes.  They'll be returned to you with
questions or comments.  If we're doing our job correctly, the message
back to you will say what you have to fix in order to make the change
acceptable.  The reason to have separate messages for separate features
is so that the acceptable changes can be installed while one or more
changes are being reworked.  If multiple features are sent in a single
message, we tend to not put in the effort to sort out the acceptable
changes from the unacceptable, so none of the features get installed
until all are acceptable.
.PP
If this sounds painful or authoritarian, well, it is.  But we get a
lot of bug reports and a lot of patches, and many of them don't get
installed because we don't have the time to finish the job that the bug
reporter or the contributor could have done.  Patches that arrive
complete, working, and well designed, tend to get installed on the day
they arrive.  The others go into a queue and get installed as time
permits, which, since the maintainers have many demands to meet, may not
be for quite some time.
.PP
Please send patches directly to the \s-1GDB\s0 maintainers
<gdb\-patches@sourceware.org>.
.PP
23.4 Build Script
=================
.PP
The script `\fBgdb_buildall.sh\fR' builds \s-1GDB\s0 with flag
`\fB\-\-enable\-targets=all\fR' set.  This builds \s-1GDB\s0 with all supported targets
activated.  This helps testing \s-1GDB\s0 when doing changes that affect more
than one architecture and is much faster than using `\fBgdb_mbuild.sh\fR'.
.PP
After building \s-1GDB\s0 the script checks which architectures are
supported and then switches the current architecture to each of those
to get information about the architecture.  The test results are stored
in log files in the directory the script was called from.
.SS "Appendix A \s-1GDB\s0 Currently available observers"
.IX Subsection "Appendix A GDB Currently available observers"
A.1 Implementation rationale
============================
.PP
An \*(L"observer\*(R" is an entity which is interested in being notified when
\&\s-1GDB\s0 reaches certain states, or certain events occur in \s-1GDB. \s0 The entity
being observed is called the \*(L"subject\*(R".  To receive notifications, the
observer attaches a callback to the subject.  One subject can have
several observers.
.PP
`\fBobserver.c\fR' implements an internal generic low-level event
notification mechanism.  This generic event notification mechanism is
then re-used to implement the exported high-level notification
management routines for all possible notifications.
.PP
The current implementation of the generic observer provides support
for contextual data.  This contextual data is given to the subject when
attaching the callback.  In return, the subject will provide this
contextual data back to the observer as a parameter of the callback.
.PP
Note that the current support for the contextual data is only
partial, as it lacks a mechanism that would deallocate this data when
the callback is detached.  This is not a problem so far, as this
contextual data is only used internally to hold a function pointer.
Later on, if a certain observer needs to provide support for user-level
contextual data, then the generic notification mechanism will need to be
enhanced to allow the observer to provide a routine to deallocate the
data when attaching the callback.
.PP
The observer implementation is also currently not reentrant.  In
particular, it is therefore not possible to call the attach or detach
routines during a notification.
.PP
A.2 Debugging
=============
.PP
Observer notifications can be traced using the command `set debug
observer 1' (*note Optional messages about internal happenings:
(gdb)Debugging Output.).
.PP
A.3 `\fBnormal_stop\fR' Notifications
===============================
.PP
\&\s-1GDB\s0 notifies all `\fBnormal_stop\fR' observers when the inferior execution
has just stopped, the associated messages and annotations have been
printed, and the control is about to be returned to the user.
.PP
Note that the `\fBnormal_stop\fR' notification is not emitted when the
execution stops due to a breakpoint, and this breakpoint has a
condition that is not met.  If the breakpoint has any associated
commands list, the commands are executed after the notification is
emitted.
.PP
The following interfaces are available to manage observers:
.PP
\&\-\- Function: extern struct observer *observer_attach_EVENT
(observer_EVENT_ftype *F)
Using the function F, create an observer that is notified when
ever \s-1EVENT\s0 occurs, return the observer.
.PP
\&\-\- Function: extern void observer_detach_EVENT (struct observer
*OBSERVER);
Remove \s-1OBSERVER\s0 from the list of observers to be notified when
\&\s-1EVENT\s0 occurs.
.PP
\&\-\- Function: extern void observer_notify_EVENT (void);
Send a notification to all \s-1EVENT\s0 observers.
.PP
The following observable events are defined:
.PP
\&\-\- Function: void normal_stop (struct bpstats *BS, int \s-1PRINT_FRAME\s0)
The inferior has stopped for real.  The  \s-1BS\s0 argument describes the
breakpoints were are stopped at, if any.  Second argument
\&\s-1PRINT_FRAME\s0 non-zero means display the location where the inferior
has stopped.
.PP
\&\-\- Function: void target_changed (struct target_ops *TARGET)
The target's register contents have changed.
.PP
\&\-\- Function: void executable_changed (void)
The executable being debugged by \s-1GDB\s0 has changed: The user decided
to debug a different program, or the program he was debugging has
been modified since being loaded by the debugger (by being
recompiled, for instance).
.PP
\&\-\- Function: void inferior_created (struct target_ops *OBJFILE, int
\&\s-1FROM_TTY\s0)
\&\s-1GDB\s0 has just connected to an inferior.  For `\fBrun\fR', \s-1GDB\s0 calls this
observer while the inferior is still stopped at the entry-point
instruction.  For `\fBattach\fR' and `\fBcore\fR', \s-1GDB\s0 calls this observer
immediately after connecting to the inferior, and before any
information on the inferior has been printed.
.PP
\&\-\- Function: void record_changed (struct inferior *INFERIOR, int
\&\s-1STARTED\s0)
The status of process record for inferior \s-1INFERIOR\s0 in \s-1GDB\s0 has
changed.  The process record is started if \s-1STARTED\s0 is true, and
the process record is stopped if \s-1STARTED\s0 is false.
.PP
\&\-\- Function: void solib_loaded (struct so_list *SOLIB)
The shared library specified by \s-1SOLIB\s0 has been loaded.  Note that
when \s-1GDB\s0 calls this observer, the library's symbols probably
haven't been loaded yet.
.PP
\&\-\- Function: void solib_unloaded (struct so_list *SOLIB)
The shared library specified by \s-1SOLIB\s0 has been unloaded.  Note
that when \s-1GDB\s0 calls this observer, the library's symbols have not
been unloaded yet, and thus are still available.
.PP
\&\-\- Function: void new_objfile (struct objfile *OBJFILE)
The symbol file specified by \s-1OBJFILE\s0 has been loaded.  Called with
\&\s-1OBJFILE\s0 equal to `\fB\s-1NULL\s0\fR' to indicate previously loaded symbol table
data has now been invalidated.
.PP
\&\-\- Function: void new_thread (struct thread_info *T)
The thread specified by T has been created.
.PP
\&\-\- Function: void thread_exit (struct thread_info *T, int \s-1SILENT\s0)
The thread specified by T has exited.  The \s-1SILENT\s0 argument
indicates that \s-1GDB\s0 is removing the thread from its tables without
wanting to notify the user about it.
.PP
\&\-\- Function: void thread_stop_requested (ptid_t \s-1PTID\s0)
An explicit stop request was issued to \s-1PTID. \s0 If \s-1PTID\s0 equals
\&\s-1MINUS_ONE_PTID,\s0 the request applied to all threads.  If
`\fBptid_is_pid(ptid)\fR' returns true, the request applied to all
threads of the process pointed at by \s-1PTID. \s0 Otherwise, the request
applied to the single thread pointed at by \s-1PTID.\s0
.PP
\&\-\- Function: void target_resumed (ptid_t \s-1PTID\s0)
The target was resumed.  The \s-1PTID\s0 parameter specifies which thread
was resume, and may be \s-1RESUME_ALL\s0 if all threads are resumed.
.PP
\&\-\- Function: void about_to_proceed (void)
The target is about to be proceeded.
.PP
\&\-\- Function: void breakpoint_created (struct breakpoint *B)
A new breakpoint B has been created.
.PP
\&\-\- Function: void breakpoint_deleted (struct breakpoint *B)
A breakpoint has been destroyed.  The argument B is the pointer to
the destroyed breakpoint.
.PP
\&\-\- Function: void breakpoint_modified (struct breakpoint *B)
A breakpoint has been modified in some way.  The argument B is the
modified breakpoint.
.PP
\&\-\- Function: void traceframe_changed (int \s-1TFNUM,\s0 int \s-1TPNUM\s0)
The trace frame is changed to \s-1TFNUM \s0(e.g., by using the `\fBtfind\fR'
command).  If \s-1TFNUM\s0 is negative, it means \s-1GDB\s0 resumes live
debugging.  The number of the tracepoint associated with this
traceframe is \s-1TPNUM.\s0
.PP
\&\-\- Function: void architecture_changed (struct gdbarch *NEWARCH)
The current architecture has changed.  The argument \s-1NEWARCH\s0 is a
pointer to the new architecture.
.PP
\&\-\- Function: void thread_ptid_changed (ptid_t \s-1OLD_PTID,\s0 ptid_t
\&\s-1NEW_PTID\s0)
The thread's ptid has changed.  The \s-1OLD_PTID\s0 parameter specifies
the old value, and \s-1NEW_PTID\s0 specifies the new value.
.PP
\&\-\- Function: void inferior_added (struct inferior *INF)
The inferior \s-1INF\s0 has been added to the list of inferiors.  At this
point, it might not be associated with any process.
.PP
\&\-\- Function: void inferior_appeared (struct inferior *INF)
The inferior identified by \s-1INF\s0 has been attached to a process.
.PP
\&\-\- Function: void inferior_exit (struct inferior *INF)
Either the inferior associated with \s-1INF\s0 has been detached from the
process, or the process has exited.
.PP
\&\-\- Function: void inferior_removed (struct inferior *INF)
The inferior \s-1INF\s0 has been removed from the list of inferiors.
This method is called immediately before freeing \s-1INF.\s0
.PP
\&\-\- Function: void memory_changed (struct inferior *INFERIOR, \s-1CORE_ADDR
ADDR,\s0 ssize_t \s-1LEN,\s0 const bfd_byte *DATA)
Bytes from \s-1DATA\s0 to \s-1DATA + LEN\s0 have been written to the \s-1INFERIOR\s0 at
\&\s-1ADDR.\s0
.PP
\&\-\- Function: void before_prompt (const char *CURRENT_PROMPT)
Called before a top-level prompt is displayed.  \s-1CURRENT_PROMPT\s0 is
the current top-level prompt.
.PP
\&\-\- Function: void gdb_datadir_changed (void)
Variable gdb_datadir has been set.  The value may not necessarily
change.
.PP
\&\-\- Function: void command_param_changed (const char *PARAM, const char
*VALUE)
The parameter of some `\fBset\fR' commands in console are changed.  This
method is called after a command `\fBset \s-1PARAM VALUE\s0\fR'.  \s-1PARAM\s0 is the
parameter of `\fBset\fR' command, and \s-1VALUE\s0 is the value of changed
parameter.
.PP
\&\-\- Function: void tsv_created (const struct trace_state_variable *TSV)
The new trace state variable \s-1TSV\s0 is created.
.PP
\&\-\- Function: void tsv_deleted (const struct trace_state_variable *TSV)
The trace state variable \s-1TSV\s0 is deleted.  If \s-1TSV\s0 is `\fB\s-1NULL\s0\fR', all
trace state variables are deleted.
.PP
\&\-\- Function: void tsv_modified (const struct trace_state_variable *TSV)
The trace state value \s-1TSV\s0 is modified.
.PP
\&\-\- Function: void test_notification (int \s-1SOMEARG\s0)
This observer is used for internal testing.  Do not use.  See
testsuite/gdb.gdb/observer.exp.
.SS "Appendix B \s-1GNU\s0 Free Documentation License"
.IX Subsection "Appendix B GNU Free Documentation License"
Version 1.3, 3 November 2008
.PP
Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
`\fBhttp://fsf.org/\fR'
.PP
Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
.PP
0. \s-1PREAMBLE\s0
.PP
The purpose of this License is to make a manual, textbook, or other
functional and useful document \*(L"free\*(R" in the sense of freedom: to
assure everyone the effective freedom to copy and redistribute it,
with or without modifying it, either commercially or
noncommercially.  Secondarily, this License preserves for the
author and publisher a way to get credit for their work, while not
being considered responsible for modifications made by others.
.PP
This License is a kind of \*(L"copyleft\*(R", which means that derivative
works of the document must themselves be free in the same sense.
It complements the \s-1GNU\s0 General Public License, which is a copyleft
license designed for free software.
.PP
We have designed this License in order to use it for manuals for
free software, because free software needs free documentation: a
free program should come with manuals providing the same freedoms
that the software does.  But this License is not limited to
software manuals; it can be used for any textual work, regardless
of subject matter or whether it is published as a printed book.
We recommend this License principally for works whose purpose is
instruction or reference.
.PP
1. \s-1APPLICABILITY AND DEFINITIONS\s0
.PP
This License applies to any manual or other work, in any medium,
that contains a notice placed by the copyright holder saying it
can be distributed under the terms of this License.  Such a notice
grants a world-wide, royalty-free license, unlimited in duration,
to use that work under the conditions stated herein.  The
\&\*(L"Document\*(R", below, refers to any such manual or work.  Any member
of the public is a licensee, and is addressed as \*(L"you\*(R".  You
accept the license if you copy, modify or distribute the work in a
way requiring permission under copyright law.
.PP
A \*(L"Modified Version\*(R" of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
.PP
A \*(L"Secondary Section\*(R" is a named appendix or a front-matter section
of the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document's overall
subject (or to related matters) and contains nothing that could
fall directly within that overall subject.  (Thus, if the Document
is in part a textbook of mathematics, a Secondary Section may not
explain any mathematics.)  The relationship could be a matter of
historical connection with the subject or with related matters, or
of legal, commercial, philosophical, ethical or political position
regarding them.
.PP
The \*(L"Invariant Sections\*(R" are certain Secondary Sections whose
titles are designated, as being those of Invariant Sections, in
the notice that says that the Document is released under this
License.  If a section does not fit the above definition of
Secondary then it is not allowed to be designated as Invariant.
The Document may contain zero Invariant Sections.  If the Document
does not identify any Invariant Sections then there are none.
.PP
The \*(L"Cover Texts\*(R" are certain short passages of text that are
listed, as Front-Cover Texts or Back-Cover Texts, in the notice
that says that the Document is released under this License.  A
Front-Cover Text may be at most 5 words, and a Back-Cover Text may
be at most 25 words.
.PP
A \*(L"Transparent\*(R" copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, that is suitable for revising the document
straightforwardly with generic text editors or (for images
composed of pixels) generic paint programs or (for drawings) some
widely available drawing editor, and that is suitable for input to
text formatters or for automatic translation to a variety of
formats suitable for input to text formatters.  A copy made in an
otherwise Transparent file format whose markup, or absence of
markup, has been arranged to thwart or discourage subsequent
modification by readers is not Transparent.  An image format is
not Transparent if used for any substantial amount of text.  A
copy that is not \*(L"Transparent\*(R" is called \*(L"Opaque\*(R".
.PP
Examples of suitable formats for Transparent copies include plain
\&\s-1ASCII\s0 without markup, Texinfo input format, LaTeX input format,
\&\s-1SGML\s0 or \s-1XML\s0 using a publicly available \s-1DTD,\s0 and
standard-conforming simple \s-1HTML,\s0 PostScript or \s-1PDF\s0 designed for
human modification.  Examples of transparent image formats include
\&\s-1PNG, XCF\s0 and \s-1JPG. \s0 Opaque formats include proprietary formats that
can be read and edited only by proprietary word processors, \s-1SGML\s0 or
\&\s-1XML\s0 for which the \s-1DTD\s0 and/or processing tools are not generally
available, and the machine-generated \s-1HTML,\s0 PostScript or \s-1PDF\s0
produced by some word processors for output purposes only.
.PP
The \*(L"Title Page\*(R" means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the
material this License requires to appear in the title page.  For
works in formats which do not have any title page as such, \*(L"Title
Page\*(R" means the text near the most prominent appearance of the
work's title, preceding the beginning of the body of the text.
.PP
The \*(L"publisher\*(R" means any person or entity that distributes copies
of the Document to the public.
.PP
A section \*(L"Entitled \s-1XYZ\*(R"\s0 means a named subunit of the Document
whose title either is precisely \s-1XYZ\s0 or contains \s-1XYZ\s0 in parentheses
following text that translates \s-1XYZ\s0 in another language.  (Here \s-1XYZ\s0
stands for a specific section name mentioned below, such as
\&\*(L"Acknowledgements\*(R", \*(L"Dedications\*(R", \*(L"Endorsements\*(R", or \*(L"History\*(R".)
To \*(L"Preserve the Title\*(R" of such a section when you modify the
Document means that it remains a section \*(L"Entitled \s-1XYZ\*(R"\s0 according
to this definition.
.PP
The Document may include Warranty Disclaimers next to the notice
which states that this License applies to the Document.  These
Warranty Disclaimers are considered to be included by reference in
this License, but only as regards disclaiming warranties: any other
implication that these Warranty Disclaimers may have is void and
has no effect on the meaning of this License.
.PP
2. \s-1VERBATIM COPYING\s0
.PP
You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License
applies to the Document are reproduced in all copies, and that you
add no other conditions whatsoever to those of this License.  You
may not use technical measures to obstruct or control the reading
or further copying of the copies you make or distribute.  However,
you may accept compensation in exchange for copies.  If you
distribute a large enough number of copies you must also follow
the conditions in section 3.
.PP
You may also lend copies, under the same conditions stated above,
and you may publicly display copies.
.PP
3. \s-1COPYING IN QUANTITY\s0
.PP
If you publish printed copies (or copies in media that commonly
have printed covers) of the Document, numbering more than 100, and
the Document's license notice requires Cover Texts, you must
enclose the copies in covers that carry, clearly and legibly, all
these Cover Texts: Front-Cover Texts on the front cover, and
Back-Cover Texts on the back cover.  Both covers must also clearly
and legibly identify you as the publisher of these copies.  The
front cover must present the full title with all words of the
title equally prominent and visible.  You may add other material
on the covers in addition.  Copying with changes limited to the
covers, as long as they preserve the title of the Document and
satisfy these conditions, can be treated as verbatim copying in
other respects.
.PP
If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto
adjacent pages.
.PP
If you publish or distribute Opaque copies of the Document
numbering more than 100, you must either include a
machine-readable Transparent copy along with each Opaque copy, or
state in or with each Opaque copy a computer-network location from
which the general network-using public has access to download
using public-standard network protocols a complete Transparent
copy of the Document, free of added material.  If you use the
latter option, you must take reasonably prudent steps, when you
begin distribution of Opaque copies in quantity, to ensure that
this Transparent copy will remain thus accessible at the stated
location until at least one year after the last time you
distribute an Opaque copy (directly or through your agents or
retailers) of that edition to the public.
.PP
It is requested, but not required, that you contact the authors of
the Document well before redistributing any large number of
copies, to give them a chance to provide you with an updated
version of the Document.
.PP
4. \s-1MODIFICATIONS\s0
.PP
You may copy and distribute a Modified Version of the Document
under the conditions of sections 2 and 3 above, provided that you
release the Modified Version under precisely this License, with
the Modified Version filling the role of the Document, thus
licensing distribution and modification of the Modified Version to
whoever possesses a copy of it.  In addition, you must do these
things in the Modified Version:
.PP
A. Use in the Title Page (and on the covers, if any) a title
distinct from that of the Document, and from those of
previous versions (which should, if there were any, be listed
in the History section of the Document).  You may use the
same title as a previous version if the original publisher of
that version gives permission.
.PP
B. List on the Title Page, as authors, one or more persons or
entities responsible for authorship of the modifications in
the Modified Version, together with at least five of the
principal authors of the Document (all of its principal
authors, if it has fewer than five), unless they release you
from this requirement.
.PP
C. State on the Title page the name of the publisher of the
Modified Version, as the publisher.
.PP
D. Preserve all the copyright notices of the Document.
.PP
E. Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.
.PP
F. Include, immediately after the copyright notices, a license
notice giving the public permission to use the Modified
Version under the terms of this License, in the form shown in
the Addendum below.
.PP
G. Preserve in that license notice the full lists of Invariant
Sections and required Cover Texts given in the Document's
license notice.
.PP
H. Include an unaltered copy of this License.
.PP
I. Preserve the section Entitled \*(L"History\*(R", Preserve its Title,
and add to it an item stating at least the title, year, new
authors, and publisher of the Modified Version as given on
the Title Page.  If there is no section Entitled \*(L"History\*(R" in
the Document, create one stating the title, year, authors,
and publisher of the Document as given on its Title Page,
then add an item describing the Modified Version as stated in
the previous sentence.
.PP
J. Preserve the network location, if any, given in the Document
for public access to a Transparent copy of the Document, and
likewise the network locations given in the Document for
previous versions it was based on.  These may be placed in
the \*(L"History\*(R" section.  You may omit a network location for a
work that was published at least four years before the
Document itself, or if the original publisher of the version
it refers to gives permission.
.PP
K. For any section Entitled \*(L"Acknowledgements\*(R" or \*(L"Dedications\*(R",
Preserve the Title of the section, and preserve in the
section all the substance and tone of each of the contributor
acknowledgements and/or dedications given therein.
.PP
L. Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section
titles.
.PP
M. Delete any section Entitled \*(L"Endorsements\*(R".  Such a section
may not be included in the Modified Version.
.PP
N. Do not retitle any existing section to be Entitled
\&\*(L"Endorsements\*(R" or to conflict in title with any Invariant
Section.
.PP
O. Preserve any Warranty Disclaimers.
.PP
If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no
material copied from the Document, you may at your option
designate some or all of these sections as invariant.  To do this,
add their titles to the list of Invariant Sections in the Modified
Version's license notice.  These titles must be distinct from any
other section titles.
.PP
You may add a section Entitled \*(L"Endorsements\*(R", provided it contains
nothing but endorsements of your Modified Version by various
parties\*(--for example, statements of peer review or that the text
has been approved by an organization as the authoritative
definition of a standard.
.PP
You may add a passage of up to five words as a Front-Cover Text,
and a passage of up to 25 words as a Back-Cover Text, to the end
of the list of Cover Texts in the Modified Version.  Only one
passage of Front-Cover Text and one of Back-Cover Text may be
added by (or through arrangements made by) any one entity.  If the
Document already includes a cover text for the same cover,
previously added by you or by arrangement made by the same entity
you are acting on behalf of, you may not add another; but you may
replace the old one, on explicit permission from the previous
publisher that added the old one.
.PP
The author(s) and publisher(s) of the Document do not by this
License give permission to use their names for publicity for or to
assert or imply endorsement of any Modified Version.
.PP
5. \s-1COMBINING DOCUMENTS\s0
.PP
You may combine the Document with other documents released under
this License, under the terms defined in section 4 above for
modified versions, provided that you include in the combination
all of the Invariant Sections of all of the original documents,
unmodified, and list them all as Invariant Sections of your
combined work in its license notice, and that you preserve all
their Warranty Disclaimers.
.PP
The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name
but different contents, make the title of each such section unique
by adding at the end of it, in parentheses, the name of the
original author or publisher of that section if known, or else a
unique number.  Make the same adjustment to the section titles in
the list of Invariant Sections in the license notice of the
combined work.
.PP
In the combination, you must combine any sections Entitled
\&\*(L"History\*(R" in the various original documents, forming one section
Entitled \*(L"History\*(R"; likewise combine any sections Entitled
\&\*(L"Acknowledgements\*(R", and any sections Entitled \*(L"Dedications\*(R".  You
must delete all sections Entitled \*(L"Endorsements.\*(R"
.PP
6. \s-1COLLECTIONS OF DOCUMENTS\s0
.PP
You may make a collection consisting of the Document and other
documents released under this License, and replace the individual
copies of this License in the various documents with a single copy
that is included in the collection, provided that you follow the
rules of this License for verbatim copying of each of the
documents in all other respects.
.PP
You may extract a single document from such a collection, and
distribute it individually under this License, provided you insert
a copy of this License into the extracted document, and follow
this License in all other respects regarding verbatim copying of
that document.
.PP
7. \s-1AGGREGATION WITH INDEPENDENT WORKS\s0
.PP
A compilation of the Document or its derivatives with other
separate and independent documents or works, in or on a volume of
a storage or distribution medium, is called an \*(L"aggregate\*(R" if the
copyright resulting from the compilation is not used to limit the
legal rights of the compilation's users beyond what the individual
works permit.  When the Document is included in an aggregate, this
License does not apply to the other works in the aggregate which
are not themselves derivative works of the Document.
.PP
If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one half
of the entire aggregate, the Document's Cover Texts may be placed
on covers that bracket the Document within the aggregate, or the
electronic equivalent of covers if the Document is in electronic
form.  Otherwise they must appear on printed covers that bracket
the whole aggregate.
.PP
8. \s-1TRANSLATION\s0
.PP
Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section
4.  Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License, and all the license notices in the
Document, and any Warranty Disclaimers, provided that you also
include the original English version of this License and the
original versions of those notices and disclaimers.  In case of a
disagreement between the translation and the original version of
this License or a notice or disclaimer, the original version will
prevail.
.PP
If a section in the Document is Entitled \*(L"Acknowledgements\*(R",
\&\*(L"Dedications\*(R", or \*(L"History\*(R", the requirement (section 4) to
Preserve its Title (section 1) will typically require changing the
actual title.
.PP
9. \s-1TERMINATION\s0
.PP
You may not copy, modify, sublicense, or distribute the Document
except as expressly provided under this License.  Any attempt
otherwise to copy, modify, sublicense, or distribute it is void,
and will automatically terminate your rights under this License.
.PP
However, if you cease all violation of this License, then your
license from a particular copyright holder is reinstated (a)
provisionally, unless and until the copyright holder explicitly
and finally terminates your license, and (b) permanently, if the
copyright holder fails to notify you of the violation by some
reasonable means prior to 60 days after the cessation.
.PP
Moreover, your license from a particular copyright holder is
reinstated permanently if the copyright holder notifies you of the
violation by some reasonable means, this is the first time you have
received notice of violation of this License (for any work) from
that copyright holder, and you cure the violation prior to 30 days
after your receipt of the notice.
.PP
Termination of your rights under this section does not terminate
the licenses of parties who have received copies or rights from
you under this License.  If your rights have been terminated and
not permanently reinstated, receipt of a copy of some or all of
the same material does not give you any rights to use it.
.PP
10. \s-1FUTURE REVISIONS OF THIS LICENSE\s0
.PP
The Free Software Foundation may publish new, revised versions of
the \s-1GNU\s0 Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
`\fBhttp://www.gnu.org/copyleft/\fR'.
.PP
Each version of the License is given a distinguishing version
number.  If the Document specifies that a particular numbered
version of this License \*(L"or any later version\*(R" applies to it, you
have the option of following the terms and conditions either of
that specified version or of any later version that has been
published (not as a draft) by the Free Software Foundation.  If
the Document does not specify a version number of this License,
you may choose any version ever published (not as a draft) by the
Free Software Foundation.  If the Document specifies that a proxy
can decide which future versions of this License can be used, that
proxy's public statement of acceptance of a version permanently
authorizes you to choose that version for the Document.
.PP
11. \s-1RELICENSING\s0
.PP
\&\*(L"Massive Multiauthor Collaboration Site\*(R" (or \*(L"\s-1MMC\s0 Site\*(R") means any
World Wide Web server that publishes copyrightable works and also
provides prominent facilities for anybody to edit those works.  A
public wiki that anybody can edit is an example of such a server.
A \*(L"Massive Multiauthor Collaboration\*(R" (or \*(L"\s-1MMC\*(R"\s0) contained in the
site means any set of copyrightable works thus published on the \s-1MMC\s0
site.
.PP
\&\*(L"CC-BY-SA\*(R" means the Creative Commons Attribution-Share Alike 3.0
license published by Creative Commons Corporation, a not-for-profit
corporation with a principal place of business in San Francisco,
California, as well as future copyleft versions of that license
published by that same organization.
.PP
\&\*(L"Incorporate\*(R" means to publish or republish a Document, in whole or
in part, as part of another Document.
.PP
An \s-1MMC\s0 is \*(L"eligible for relicensing\*(R" if it is licensed under this
License, and if all works that were first published under this
License somewhere other than this \s-1MMC,\s0 and subsequently
incorporated in whole or in part into the \s-1MMC, \\fIs0\fR\|(1) had no cover
texts or invariant sections, and (2) were thus incorporated prior
to November 1, 2008.
.PP
The operator of an \s-1MMC\s0 Site may republish an \s-1MMC\s0 contained in the
site under CC-BY-SA on the same site at any time before August 1,
2009, provided the \s-1MMC\s0 is eligible for relicensing.
.PP
\&\s-1ADDENDUM:\s0 How to use this License for your documents
====================================================
.PP
To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and license
notices just after the title page:
.PP
Copyright (C)  \s-1YEAR  YOUR NAME.\s0
Permission is granted to copy, distribute and/or modify this document
under the terms of the \s-1GNU\s0 Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
Texts.  A copy of the license is included in the section entitled ``\s-1GNU\s0
Free Documentation License''.
.PP
If you have Invariant Sections, Front-Cover Texts and Back-Cover
Texts, replace the \*(L"with...Texts.\*(R" line with this:
.PP
with the Invariant Sections being \s-1LIST THEIR TITLES,\s0 with
the Front-Cover Texts being \s-1LIST,\s0 and with the Back-Cover Texts
being \s-1LIST.\s0
.PP
If you have Invariant Sections without Cover Texts, or some other
combination of the three, merge those two alternatives to suit the
situation.
.PP
If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the \s-1GNU\s0 General Public License, to
permit their use in free software.
.SS "Concept Index"
.IX Subsection "Concept Index"
 [index ]
* Menu:
.PP
\&\f(CW$fp:\fR see \*(L"Register Information Functions\*(R", .
.PP
(line 126)
\&\f(CW$pc:\fR see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  58)
\&\f(CW$ps:\fR see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  69)
\&\f(CW$sp:\fR see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  49)
a.out format: see \*(L"Symbol Handling\*(R", .     (line 218)
.PP
abstract interpretation of function prologues: see \*(L"Algorithms\*(R", .  (line  48)
.PP
adding a new host: see \*(L"Host Definition\*(R", .     (line  13)
.PP
adding a symbol-reading module: see \*(L"Symbol Handling\*(R", .     (line  37)
.PP
adding a target: see \*(L"Adding a New Target\*(R", . (line   6)
.PP
adding debugging info reader: see \*(L"Symbol Handling\*(R", .     (line 365)
.PP
adding source language: see \*(L"Language Support\*(R", .    (line  17)
.PP
address classes: see \*(L"Address Classes\*(R", .     (line   6)
.PP
address representation: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
address spaces, separate data and code: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
algorithms: see \*(L"Algorithms\*(R", .          (line   6)
.PP
ARCH\-tdep.c: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line  13)
architecture representation: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line   6)
Array Containers: see \*(L"Support Libraries\*(R", .   (line 131)
.PP
assumptions about targets: see \*(L"Misc Guidelines\*(R", .     (line 334)
.PP
base of a frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  28)
\&\s-1BFD\s0 library: see \*(L"Support Libraries\*(R", .   (line   9)
.PP
breakpoint address adjusted: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 149)
breakpoints: see \*(L"Algorithms\*(R", .          (line 151)
.PP
bug-gdb mailing list: see \*(L"Getting Started\*(R", .     (line  72)
.PP
build script: see \*(L"Debugging \s-1GDB\*(R"\s0, .       (line  94)
.PP
C data types: see \*(L"Coding Standards\*(R", .    (line 120)
.PP
call frame information: see \*(L"Algorithms\*(R", .          (line  14)
.PP
call stack frame: see \*(L"Stack Frames\*(R", .        (line   6)
.PP
calls to the inferior: see \*(L"Inferior Call Setup\*(R", . (line   6)
.PP
\&\s-1CFI \s0(call frame information): see \*(L"Algorithms\*(R", .          (line  14)
.PP
checkpoints: see \*(L"Algorithms\*(R", .          (line 600)
.PP
cleanups: see \*(L"Misc Guidelines\*(R", .     (line  12)
.PP
\&\s-1CLI:\s0 see \*(L"User Interface\*(R", .      (line  12)
.PP
code pointers, word-addressed: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
coding standards: see \*(L"Coding Standards\*(R", .    (line   6)
.PP
\&\s-1COFF\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 315)
.PP
\&\s-1COFF\s0 format: see \*(L"Symbol Handling\*(R", .     (line 233)
.PP
command implementation: see \*(L"Getting Started\*(R", .     (line  60)
.PP
command interpreter: see \*(L"User Interface\*(R", .      (line  12)
.PP
comment formatting: see \*(L"Coding Standards\*(R", .    (line  94)
.PP
compiler warnings: see \*(L"Misc Guidelines\*(R", .     (line 252)
.PP
Compressed \s-1DWARF 2\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 335)
.PP
computed values: see \*(L"Values\*(R", .              (line  35)
.PP
configure.tgt: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line  19)
converting between pointers and addresses: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
converting integers to addresses: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 278)
cooked register representation: see \*(L"Raw and Cooked Registers\*(R", .
.PP
(line   6)
core files: see \*(L"Adding support for debugging core files\*(R", .
.PP
(line   6)
D10V addresses: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
data output: see \*(L"User Interface\*(R", .      (line 254)
.PP
data-pointer, per\-architecture/per\-module: see \*(L"Misc Guidelines\*(R", . (line 100)
.PP
debugging \s-1GDB:\s0 see \*(L"Debugging \s-1GDB\*(R"\s0, .       (line   6)
.PP
deprecating commands: see \*(L"User Interface\*(R", .      (line  32)
.PP
design: see \*(L"Misc Guidelines\*(R", .     (line 329)
.PP
\&\s-1DOS\s0 text files: see \*(L"Host Definition\*(R", .     (line  79)
.PP
dummy frames: see \*(L"About Dummy Frames\*(R", .  (line   6)
.PP
DW_AT_address_class: see \*(L"Address Classes\*(R", .     (line   6)
.PP
DW_AT_byte_size: see \*(L"Address Classes\*(R", .     (line   6)
.PP
\&\s-1DWARF 2\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 328)
.PP
\&\s-1DWARF 3\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 355)
.PP
\&\s-1ECOFF\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 321)
.PP
\&\s-1ECOFF\s0 format: see \*(L"Symbol Handling\*(R", .     (line 248)
.PP
\&\s-1ELF\s0 format: see \*(L"Symbol Handling\*(R", .     (line 281)
.PP
execution state: see \*(L"Managing Execution State\*(R", .
.PP
(line   6)
experimental branches: see \*(L"Versions and Branches\*(R", .
.PP
(line 116)
expression evaluation routines: see \*(L"Language Support\*(R", .    (line  58)
.PP
expression parser: see \*(L"Language Support\*(R", .    (line  21)
.PP
field output functions: see \*(L"User Interface\*(R", .      (line 254)
.PP
file names, portability: see \*(L"Misc Guidelines\*(R", .     (line 367)
.PP
finding a symbol: see \*(L"Symbol Handling\*(R", .     (line 133)
.PP
fine-tuning gdbarch structure: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  23)
first floating point register: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  78)
frame: see \*(L"Stack Frames\*(R", .        (line   6)
.PP
frame \s-1ID:\s0 see \*(L"Stack Frames\*(R", .        (line  41)
.PP
frame pointer: see \*(L"Register Information Functions\*(R", .
.PP
(line 126)
frame, definition of base of a frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  28)
frame, definition of innermost frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  24)
frame, definition of \s-1NEXT\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  11)
frame, definition of \s-1PREVIOUS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  14)
frame, definition of sentinel frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  52)
frame, definition of sniffing: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  46)
frame, definition of \s-1THIS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line   9)
frame, definition of unwinding: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  41)
frame_base: see \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R", .
.PP
(line  89)
frame_unwind: see \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R", .
.PP
(line  36)
full symbol table: see \*(L"Symbol Handling\*(R", .     (line 104)
.PP
function prologue: see \*(L"Prologue Caches\*(R", .     (line   6)
.PP
function prototypes: see \*(L"Coding Standards\*(R", .    (line 153)
.PP
function usage: see \*(L"Coding Standards\*(R", .    (line 124)
.PP
fundamental types: see \*(L"Symbol Handling\*(R", .     (line 183)
.PP
\&\s-1GDB\s0 source tree structure: see \*(L"Overall Structure\*(R", .   (line  83)
.PP
gdb_byte: see \*(L"Register Caching\*(R", .    (line  23)
.PP
gdbarch: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line  19)
gdbarch accessor functions: see \*(L"Creating a New Architecture\*(R", .
.PP
(line  14)
gdbarch lookup: see \*(L"Looking Up an Existing Architecture\*(R", .
.PP
(line   6)
gdbarch register architecture functions: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line   6)
gdbarch register information functions: see \*(L"Register Information Functions\*(R", .
.PP
(line   6)
gdbarch_info: see \*(L"Looking Up an Existing Architecture\*(R", .
.PP
(line  22)
gdbarch_tdep definition: see \*(L"Creating a New Architecture\*(R", .
.PP
(line  34)
gdbarch_tdep when allocating new gdbarch: see \*(L"Creating a New Architecture\*(R", .
.PP
(line   6)
generic host support: see \*(L"Host Definition\*(R", .     (line  38)
.PP
hardware breakpoints: see \*(L"Algorithms\*(R", .          (line 158)
.PP
hardware watchpoints: see \*(L"Algorithms\*(R", .          (line 280)
.PP
host: see \*(L"Overall Structure\*(R", .   (line  50)
.PP
host, adding: see \*(L"Host Definition\*(R", .     (line  13)
.PP
innermost frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  24)
insert or remove hardware breakpoint: see \*(L"Algorithms\*(R", .          (line 234)
.PP
insert or remove hardware watchpoint: see \*(L"Algorithms\*(R", .          (line 347)
.PP
insert or remove software breakpoint: see \*(L"Algorithms\*(R", .          (line 211)
.PP
item output functions: see \*(L"User Interface\*(R", .      (line 254)
.PP
language parser: see \*(L"Language Support\*(R", .    (line  25)
.PP
language support: see \*(L"Language Support\*(R", .    (line   6)
.PP
legal papers for code contributions: see \*(L"Debugging \s-1GDB\*(R"\s0, .       (line  42)
.PP
libgdb: see \*(L"libgdb\*(R", .              (line  15)
.PP
libiberty library: see \*(L"Support Libraries\*(R", .   (line  52)
.PP
line wrap in output: see \*(L"Misc Guidelines\*(R", .     (line 191)
.PP
list output functions: see \*(L"User Interface\*(R", .      (line 131)
.PP
longjmp debugging: see \*(L"Algorithms\*(R", .          (line 258)
.PP
lookup_symbol: see \*(L"Symbol Handling\*(R", .     (line 142)
.PP
lval_type enumeration, for values.: see \*(L"Values\*(R", .              (line  19)
.PP
making a new release of gdb: see \*(L"Releasing \s-1GDB\*(R"\s0, .       (line   6)
.PP
memory representation: see \*(L"Register and Memory Data\*(R", .
.PP
(line   6)
minimal symbol table: see \*(L"Symbol Handling\*(R", .     (line 111)
.PP
minsymtabs: see \*(L"Symbol Handling\*(R", .     (line 111)
.PP
multi-arch data: see \*(L"Misc Guidelines\*(R", .     (line 100)
.PP
native conditionals: see \*(L"Native Debugging\*(R", .    (line  75)
.PP
native debugging: see \*(L"Native Debugging\*(R", .    (line   6)
.PP
nesting level in ui_out functions: see \*(L"User Interface\*(R", .      (line 143)
.PP
new year procedure: see \*(L"Start of New Year Procedure\*(R", .
.PP
(line   6)
\&\s-1NEXT\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  11)
normal_stop observer: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  48)
.PP
notification about inferior execution stop: see \*(L"\s-1GDB\s0 Observers\*(R", .  (line  48)
.PP
notifications about changes in internals: see \*(L"Algorithms\*(R", .       (line 630)
.PP
object file formats: see \*(L"Symbol Handling\*(R", .     (line 215)
.PP
observer pattern interface: see \*(L"Algorithms\*(R", .          (line 630)
.PP
observers implementation rationale: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line   9)
.PP
obstacks: see \*(L"Support Libraries\*(R", .   (line  69)
.PP
opcodes library: see \*(L"Support Libraries\*(R", .   (line  39)
.PP
\&\s-1OS ABI\s0 variants: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line   6)
partial symbol table: see \*(L"Symbol Handling\*(R", .     (line 114)
.PP
PE-COFF format: see \*(L"Symbol Handling\*(R", .     (line 272)
.PP
per-architecture module data: see \*(L"Misc Guidelines\*(R", .     (line 100)
.PP
pointer representation: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
portability: see \*(L"Misc Guidelines\*(R", .     (line 350)
.PP
portable file name handling: see \*(L"Misc Guidelines\*(R", .     (line 367)
.PP
porting to new machines: see \*(L"Porting \s-1GDB\*(R"\s0, .         (line   6)
.PP
\&\s-1PREVIOUS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  14)
processor status register: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  69)
program counter <1>: see \*(L"Algorithms\*(R", .          (line 158)
.PP
program counter: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  58)
prologue analysis: see \*(L"Algorithms\*(R", .          (line  14)
.PP
prologue cache: see \*(L"Prologue Caches\*(R", .     (line  12)
.PP
prologue of a function: see \*(L"Prologue Caches\*(R", .     (line   6)
.PP
prologue\-value.c: see \*(L"Algorithms\*(R", .          (line  48)
.PP
prompt: see \*(L"Host Definition\*(R", .     (line  86)
.PP
pseudo-evaluation of function prologues: see \*(L"Algorithms\*(R", .        (line  48)
.PP
psymtabs: see \*(L"Symbol Handling\*(R", .     (line 107)
.PP
raw register representation: see \*(L"Raw and Cooked Registers\*(R", .
.PP
(line   6)
reading of symbols: see \*(L"Symbol Handling\*(R", .     (line  25)
.PP
readline library: see \*(L"Support Libraries\*(R", .   (line  45)
.PP
register caching: see \*(L"Register Caching\*(R", .    (line   6)
.PP
register data formats, converting: see \*(L"Register and Memory Data\*(R", .
.PP
(line   6)
register representation: see \*(L"Register and Memory Data\*(R", .
.PP
(line   6)
regular expressions library: see \*(L"Support Libraries\*(R", .   (line 110)
.PP
Release Branches: see \*(L"Versions and Branches\*(R", .
.PP
(line  93)
remote debugging support: see \*(L"Host Definition\*(R", .     (line  41)
.PP
representation of architecture: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line   6)
representations, raw and cooked registers: see \*(L"Raw and Cooked Registers\*(R", .
.PP
(line   6)
representations, register and memory: see \*(L"Register and Memory Data\*(R", .
.PP
(line   6)
requirements for \s-1GDB:\s0 see \*(L"Requirements\*(R", .        (line   6)
.PP
restart: see \*(L"Algorithms\*(R", .          (line 600)
.PP
running the test suite: see \*(L"Testsuite\*(R", .           (line  19)
.PP
secondary symbol file: see \*(L"Symbol Handling\*(R", .     (line  47)
.PP
sentinel frame <1>: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  52)
sentinel frame: see \*(L"Stack Frames\*(R", .        (line  22)
.PP
separate data and code address spaces: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
serial line support: see \*(L"Host Definition\*(R", .     (line  41)
.PP
set_gdbarch functions: see \*(L"Creating a New Architecture\*(R", .
.PP
(line  14)
sniffing: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  46)
software breakpoints: see \*(L"Algorithms\*(R", .          (line 184)
.PP
software watchpoints: see \*(L"Algorithms\*(R", .          (line 280)
.PP
\&\s-1SOM\s0 debugging info: see \*(L"Symbol Handling\*(R", .     (line 360)
.PP
\&\s-1SOM\s0 format: see \*(L"Symbol Handling\*(R", .     (line 291)
.PP
source code formatting: see \*(L"Coding Standards\*(R", .    (line  28)
.PP
spaces, separate data and code address: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
stabs debugging info: see \*(L"Symbol Handling\*(R", .     (line 305)
.PP
stack frame, definition of base of a frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  28)
stack frame, definition of innermost frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  24)
stack frame, definition of \s-1NEXT\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  11)
stack frame, definition of \s-1PREVIOUS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  14)
stack frame, definition of sentinel frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  52)
stack frame, definition of sniffing: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  46)
stack frame, definition of \s-1THIS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line   9)
stack frame, definition of unwinding: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  41)
stack pointer: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  49)
status register: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  69)
struct gdbarch creation: see \*(L"Creating a New Architecture\*(R", .
.PP
(line   6)
struct regcache: see \*(L"Register Caching\*(R", .    (line  10)
.PP
struct value, converting register contents to: see \*(L"Register and Memory Data\*(R", .
.PP
(line   6)
submitting patches: see \*(L"Debugging \s-1GDB\*(R"\s0, .       (line  30)
.PP
sym_fns structure: see \*(L"Symbol Handling\*(R", .     (line  37)
.PP
symbol files: see \*(L"Symbol Handling\*(R", .     (line  25)
.PP
symbol lookup: see \*(L"Symbol Handling\*(R", .     (line 133)
.PP
symbol reading: see \*(L"Symbol Handling\*(R", .     (line  25)
.PP
symtabs: see \*(L"Symbol Handling\*(R", .     (line 104)
.PP
system dependencies: see \*(L"Misc Guidelines\*(R", .     (line 354)
.PP
table output functions: see \*(L"User Interface\*(R", .      (line 131)
.PP
target: see \*(L"Overall Structure\*(R", .   (line  50)
.PP
target architecture definition: see \*(L"Target Architecture Definition\*(R", .
.PP
(line   6)
target dependent files: see \*(L"Adding a New Target\*(R", . (line   8)
.PP
target descriptions: see \*(L"Target Descriptions\*(R", . (line   6)
.PP
target descriptions, adding register support: see \*(L"Adding Target Described Register Support\*(R", .
.PP
(line   6)
target descriptions, implementation: see \*(L"Target Descriptions Implementation\*(R", .
.PP
(line   6)
target vector: see \*(L"Target Vector Definition\*(R", .
.PP
(line   6)
targets: see \*(L"Existing Targets\*(R", .    (line   6)
.PP
\&\s-1TCP\s0 remote support: see \*(L"Host Definition\*(R", .     (line  57)
.PP
terminal device: see \*(L"Host Definition\*(R", .     (line  89)
.PP
test suite: see \*(L"Testsuite\*(R", .           (line   6)
.PP
test suite organization: see \*(L"Testsuite\*(R", .           (line 195)
.PP
Testsuite Configuration: see \*(L"Testsuite\*(R", .           (line 167)
.PP
\&\s-1THIS\s0 frame: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line   9)
tuple output functions: see \*(L"User Interface\*(R", .      (line 131)
.PP
type codes: see \*(L"Symbol Handling\*(R", .     (line 191)
.PP
types: see \*(L"Coding Standards\*(R", .    (line 136)
.PP
ui_out functions: see \*(L"User Interface\*(R", .      (line  47)
.PP
ui_out functions, usage examples: see \*(L"User Interface\*(R", .      (line 398)
.PP
unwind frame: see \*(L"Stack Frames\*(R", .        (line   9)
.PP
unwinding: see \*(L"Frame Handling Terminology\*(R", .
.PP
(line  41)
using ui_out functions: see \*(L"User Interface\*(R", .      (line 398)
.PP
value structure: see \*(L"Values\*(R", .              (line   9)
.PP
values: see \*(L"Values\*(R", .              (line   9)
.PP
\&\s-1VEC:\s0 see \*(L"Support Libraries\*(R", .   (line 131)
.PP
vendor branches: see \*(L"Versions and Branches\*(R", .
.PP
(line 108)
watchpoints: see \*(L"Algorithms\*(R", .          (line 274)
.PP
watchpoints, on x86: see \*(L"Algorithms\*(R", .          (line 449)
.PP
watchpoints, with threads: see \*(L"Algorithms\*(R", .          (line 425)
.PP
word-addressed machines: see \*(L"Pointers and Addresses\*(R", .
.PP
(line   6)
writing tests: see \*(L"Testsuite\*(R", .           (line 247)
.PP
x86 debug registers: see \*(L"Algorithms\*(R", .          (line 449)
.PP
\&\s-1XCOFF\s0 format: see \*(L"Symbol Handling\*(R", .     (line 256)
.SS "Function and Variable Index"
.IX Subsection "Function and Variable Index"
 [index ]
* Menu:
.PP
_initialize_ARCH_tdep <1>: see \*(L"Adding a New Target\*(R", . (line  22)
.PP
_initialize_ARCH_tdep: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line  13)
_initialize_language: see \*(L"Language Support\*(R", .    (line  79)
.PP
about_to_proceed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 139)
.PP
add_cmd: see \*(L"User Interface\*(R", .      (line  21)
.PP
add_com: see \*(L"User Interface\*(R", .      (line  21)
.PP
add_setshow_cmd: see \*(L"User Interface\*(R", .      (line  26)
.PP
add_setshow_cmd_full: see \*(L"User Interface\*(R", .      (line  26)
.PP
add_symtab_fns: see \*(L"Symbol Handling\*(R", .     (line  37)
.PP
address_class_name_to_type_flags: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  28)
address_class_name_to_type_flags_p: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  39)
align_down: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  46)
align_up: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  46)
allocate_symtab: see \*(L"Language Support\*(R", .    (line  83)
.PP
architecture_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 159)
.PP
before_prompt: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 188)
.PP
bfd_arch_info: see \*(L"Looking Up an Existing Architecture\*(R", .
.PP
(line  41)
\&\s-1BIG_BREAKPOINT:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 100)
\&\s-1BPT_VECTOR:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 538)
\&\s-1BREAKPOINT:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  88)
breakpoint_created: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 142)
.PP
breakpoint_deleted: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 145)
.PP
breakpoint_modified: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 149)
.PP
command_param_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 197)
.PP
core_addr_greaterthan: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  30)
core_addr_lessthan: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  30)
\&\s-1CRLF_SOURCE_FILES:\s0 see \*(L"Host Definition\*(R", .     (line  78)
.PP
current_language: see \*(L"Language Support\*(R", .    (line  75)
.PP
\&\s-1DEFAULT_PROMPT:\s0 see \*(L"Host Definition\*(R", .     (line  85)
.PP
deprecate_cmd: see \*(L"User Interface\*(R", .      (line  32)
.PP
\&\s-1DEPRECATED_IBM6000_TARGET:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 246)
\&\s-1DEV_TTY:\s0 see \*(L"Host Definition\*(R", .     (line  88)
.PP
\&\s-1DIRNAME_SEPARATOR:\s0 see \*(L"Misc Guidelines\*(R", .     (line 399)
.PP
\&\s-1DISABLE_UNSETTABLE_BREAK:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 215)
discard_cleanups: see \*(L"Misc Guidelines\*(R", .     (line  39)
.PP
do_cleanups: see \*(L"Misc Guidelines\*(R", .     (line  35)
.PP
evaluate_subexp: see \*(L"Language Support\*(R", .    (line  58)
.PP
executable_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  85)
.PP
extract_typed_address: see \*(L"Pointers and Addresses\*(R", .
.PP
(line  52)
\&\s-1FILENAME_CMP:\s0 see \*(L"Misc Guidelines\*(R", .     (line 393)
.PP
find_pc_function: see \*(L"Symbol Handling\*(R", .     (line 136)
.PP
find_pc_line: see \*(L"Symbol Handling\*(R", .     (line 136)
.PP
find_sym_fns: see \*(L"Symbol Handling\*(R", .     (line  32)
.PP
\&\s-1FOPEN_RB:\s0 see \*(L"Host Definition\*(R", .     (line  94)
.PP
fp0_regnum: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  78)
frame_align: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  46)
frame_base_append_sniffer: see \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R", .
.PP
(line  19)
frame_base_set_default: see \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R", .
.PP
(line  22)
frame_num_args: see \*(L"Functions to Access Frame Data\*(R", .
.PP
(line  43)
frame_red_zone_size: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  63)
frame_register_unwind: see \*(L"Stack Frames\*(R", .        (line  15)
.PP
frame_unwind_append_sniffer: see \*(L"Analyzing Stacks\-\-\-Frame Sniffers\*(R", .
.PP
(line  16)
frame_unwind_append_unwinder: see \*(L"Stack Frames\*(R", .        (line  30)
.PP
frame_unwind_got_address: see \*(L"Stack Frames\*(R", .        (line 105)
.PP
frame_unwind_got_constant: see \*(L"Stack Frames\*(R", .        (line 101)
.PP
frame_unwind_got_memory: see \*(L"Stack Frames\*(R", .        (line  98)
.PP
frame_unwind_got_optimized: see \*(L"Stack Frames\*(R", .        (line  90)
.PP
frame_unwind_got_register: see \*(L"Stack Frames\*(R", .        (line  93)
.PP
frame_unwind_prepend_unwinder: see \*(L"Stack Frames\*(R", .        (line  30)
.PP
\&\s-1GCC2_COMPILED_FLAG_SYMBOL:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 229)
\&\s-1GCC_COMPILED_FLAG_SYMBOL:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 229)
gdb_datadir_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 192)
.PP
\&\s-1GDB_OSABI_AIX:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  90)
\&\s-1GDB_OSABI_CYGWIN:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  87)
\&\s-1GDB_OSABI_FREEBSD_AOUT:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  51)
\&\s-1GDB_OSABI_FREEBSD_ELF:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  54)
\&\s-1GDB_OSABI_GO32:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  69)
\&\s-1GDB_OSABI_HPUX_ELF:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  78)
\&\s-1GDB_OSABI_HPUX_SOM:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  81)
\&\s-1GDB_OSABI_HURD:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  39)
\&\s-1GDB_OSABI_INTERIX:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  75)
\&\s-1GDB_OSABI_IRIX:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  72)
\&\s-1GDB_OSABI_LINUX:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  48)
\&\s-1GDB_OSABI_NETBSD_AOUT:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  57)
\&\s-1GDB_OSABI_NETBSD_ELF:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  60)
\&\s-1GDB_OSABI_OPENBSD_ELF:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  63)
\&\s-1GDB_OSABI_OSF1:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  45)
\&\s-1GDB_OSABI_QNXNTO:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  84)
\&\s-1GDB_OSABI_SOLARIS:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  42)
\&\s-1GDB_OSABI_SVR4:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  36)
\&\s-1GDB_OSABI_UNINITIALIZED:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  29)
\&\s-1GDB_OSABI_UNKNOWN:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  32)
\&\s-1GDB_OSABI_WINCE:\s0 see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  66)
gdbarch_addr_bits_remove: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  11)
gdbarch_address_class_name_to_type_flags: see \*(L"Address Classes\*(R", .  (line  30)
.PP
gdbarch_address_class_type_flags <1>: see \*(L"Address Classes\*(R", .     (line  18)
.PP
gdbarch_address_class_type_flags: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  43)
gdbarch_address_class_type_flags_p: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  52)
gdbarch_address_class_type_flags_to_name <1>: see \*(L"Address Classes\*(R", .
.PP
(line  25)
gdbarch_address_class_type_flags_to_name: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  56)
gdbarch_address_class_type_flags_to_name_p: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  60)
gdbarch_address_to_pointer <1>: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  65)
gdbarch_address_to_pointer: see \*(L"Pointers and Addresses\*(R", .
.PP
(line 114)
gdbarch_adjust_breakpoint_address: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 149)
gdbarch_alloc: see \*(L"Creating a New Architecture\*(R", .
.PP
(line   6)
gdbarch_believe_pcc_promotion: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  72)
gdbarch_bits_big_endian: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  77)
gdbarch_breakpoint_from_pc: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 106)
gdbarch_call_dummy_location: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 182)
gdbarch_cannot_fetch_register: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 188)
gdbarch_cannot_store_register: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 192)
gdbarch_char_signed: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 463)
gdbarch_convert_register_p <1>: see \*(L"Register and Memory Data\*(R", .
.PP
(line  30)
gdbarch_convert_register_p: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 199)
gdbarch_data: see \*(L"Misc Guidelines\*(R", .     (line 133)
.PP
gdbarch_data_register_post_init: see \*(L"Misc Guidelines\*(R", .     (line 118)
.PP
gdbarch_data_register_pre_init: see \*(L"Misc Guidelines\*(R", .     (line 108)
.PP
gdbarch_decr_pc_after_break: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 209)
gdbarch_deprecated_fp_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 452)
gdbarch_double_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 473)
gdbarch_dummy_id: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 525)
gdbarch_dwarf2_reg_to_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 220)
gdbarch_ecoff_reg_to_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 224)
gdbarch_float_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 477)
gdbarch_fp0_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 204)
gdbarch_get_longjmp_target <1>: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 235)
gdbarch_get_longjmp_target: see \*(L"Algorithms\*(R", .          (line 263)
.PP
gdbarch_have_nonsteppable_watchpoint: see \*(L"Algorithms\*(R", .          (line 396)
.PP
gdbarch_in_function_epilogue_p: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 257)
gdbarch_in_solib_return_trampoline: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 263)
gdbarch_init_osabi: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line 125)
gdbarch_int_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 480)
gdbarch_integer_to_address: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 278)
gdbarch_list_lookup_by_info: see \*(L"Looking Up an Existing Architecture\*(R", .
.PP
(line  22)
gdbarch_long_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 483)
gdbarch_long_double_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 487)
gdbarch_long_long_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 491)
gdbarch_lookup_osabi: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line 119)
gdbarch_memory_insert_breakpoint: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 134)
gdbarch_memory_remove_breakpoint: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 134)
gdbarch_osabi_name: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line  97)
gdbarch_pointer_to_address <1>: see \*(L"Pointers and Addresses\*(R", .
.PP
(line 105)
gdbarch_pointer_to_address: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 299)
gdbarch_print_insn: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 515)
gdbarch_ptr_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 495)
gdbarch_push_dummy_call: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 367)
gdbarch_push_dummy_code: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 379)
gdbarch_register <1>: see \*(L"How an Architecture is Represented\*(R", .
.PP
(line  19)
gdbarch_register: see \*(L"Adding a New Target\*(R", . (line  40)
.PP
gdbarch_register_osabi: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line 103)
gdbarch_register_osabi_sniffer: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line 112)
gdbarch_register_to_value <1>: see \*(L"Register and Memory Data\*(R", .
.PP
(line  46)
gdbarch_register_to_value: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 305)
gdbarch_return_value: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 400)
gdbarch_sdb_reg_to_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 396)
gdbarch_short_bit: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 499)
gdbarch_skip_permanent_breakpoint: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 436)
gdbarch_skip_trampoline_code: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 447)
gdbarch_stab_reg_to_regnum: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 456)
gdbarch_stabs_argument_has_addr: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 363)
gdbarch_value_to_register <1>: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 531)
gdbarch_value_to_register: see \*(L"Register and Memory Data\*(R", .
.PP
(line  62)
gdbarch_virtual_frame_pointer: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 503)
\&\s-1GDBINIT_FILENAME:\s0 see \*(L"Host Definition\*(R", .     (line  74)
.PP
generic_elf_osabi_sniff_abi_tag_sections: see \*(L"\s-1OS ABI\s0 Variant Handling\*(R", .
.PP
(line 133)
get_frame_register: see \*(L"Stack Frames\*(R", .        (line  15)
.PP
get_frame_type: see \*(L"Stack Frames\*(R", .        (line  22)
.PP
\&\s-1HAVE_CONTINUABLE_WATCHPOINT:\s0 see \*(L"Algorithms\*(R", .          (line 402)
.PP
\&\s-1HAVE_DOS_BASED_FILE_SYSTEM:\s0 see \*(L"Misc Guidelines\*(R", .     (line 376)
.PP
\&\s-1HAVE_STEPPABLE_WATCHPOINT:\s0 see \*(L"Algorithms\*(R", .          (line 386)
.PP
i386_cleanup_dregs: see \*(L"Algorithms\*(R", .          (line 576)
.PP
I386_DR_LOW_GET_STATUS: see \*(L"Algorithms\*(R", .          (line 489)
.PP
I386_DR_LOW_RESET_ADDR: see \*(L"Algorithms\*(R", .          (line 485)
.PP
I386_DR_LOW_SET_ADDR: see \*(L"Algorithms\*(R", .          (line 482)
.PP
I386_DR_LOW_SET_CONTROL: see \*(L"Algorithms\*(R", .          (line 479)
.PP
i386_insert_hw_breakpoint: see \*(L"Algorithms\*(R", .          (line 564)
.PP
i386_insert_watchpoint: see \*(L"Algorithms\*(R", .          (line 536)
.PP
i386_region_ok_for_watchpoint: see \*(L"Algorithms\*(R", .          (line 514)
.PP
i386_remove_hw_breakpoint: see \*(L"Algorithms\*(R", .          (line 564)
.PP
i386_remove_watchpoint: see \*(L"Algorithms\*(R", .          (line 536)
.PP
i386_stopped_by_watchpoint: see \*(L"Algorithms\*(R", .          (line 528)
.PP
i386_stopped_data_address: see \*(L"Algorithms\*(R", .          (line 521)
.PP
I386_USE_GENERIC_WATCHPOINTS: see \*(L"Algorithms\*(R", .          (line 461)
.PP
in_dynsym_resolve_code: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 267)
inferior_added: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 168)
.PP
inferior_appeared: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 172)
.PP
inferior_created: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  92)
.PP
inferior_exit: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 175)
.PP
inferior_removed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 179)
.PP
inner_than: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  30)
\&\s-1IS_ABSOLUTE_PATH:\s0 see \*(L"Misc Guidelines\*(R", .     (line 387)
.PP
\&\s-1IS_DIR_SEPARATOR:\s0 see \*(L"Misc Guidelines\*(R", .     (line 382)
.PP
\&\s-1ISATTY:\s0 see \*(L"Host Definition\*(R", .     (line  91)
.PP
length_of_subexp: see \*(L"Language Support\*(R", .    (line  58)
.PP
lint: see \*(L"Host Definition\*(R", .     (line 107)
.PP
\&\s-1LITTLE_BREAKPOINT:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 100)
\&\s-1LSEEK_NOT_LINEAR:\s0 see \*(L"Host Definition\*(R", .     (line 102)
.PP
make_cleanup: see \*(L"Misc Guidelines\*(R", .     (line  28)
.PP
make_cleanup_ui_out_list_begin_end: see \*(L"User Interface\*(R", .      (line 247)
.PP
make_cleanup_ui_out_tuple_begin_end: see \*(L"User Interface\*(R", .      (line 223)
.PP
memory_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 184)
.PP
\&\s-1NATDEPFILES:\s0 see \*(L"Native Debugging\*(R", .    (line   8)
.PP
new_objfile: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 115)
.PP
new_thread: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 120)
.PP
normal_stop: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  76)
.PP
op_print_tab: see \*(L"Language Support\*(R", .    (line  91)
.PP
parse_exp_1: see \*(L"Language Support\*(R", .    (line  97)
.PP
pc_regnum: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  58)
prefixify_subexp: see \*(L"Language Support\*(R", .    (line  58)
.PP
print_float_info: see \*(L"Register Information Functions\*(R", .
.PP
(line  80)
print_registers_info: see \*(L"Register Information Functions\*(R", .
.PP
(line  53)
print_subexp: see \*(L"Language Support\*(R", .    (line  91)
.PP
print_vector_info: see \*(L"Register Information Functions\*(R", .
.PP
(line  96)
\&\s-1PRINTF_HAS_LONG_LONG:\s0 see \*(L"Host Definition\*(R", .     (line  97)
.PP
ps_regnum: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  69)
pseudo_register_read: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  29)
pseudo_register_write: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  33)
push_dummy_call: see \*(L"Functions Creating Dummy Frames\*(R", .
.PP
(line  13)
push_dummy_code: see \*(L"Functions Creating Dummy Frames\*(R", .
.PP
(line  57)
read_pc: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  10)
record_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 100)
.PP
regcache_cooked_read: see \*(L"Register Caching\*(R", .    (line  23)
.PP
regcache_cooked_read_signed: see \*(L"Register Caching\*(R", .    (line  23)
.PP
regcache_cooked_read_unsigned: see \*(L"Register Caching\*(R", .    (line  23)
.PP
regcache_cooked_write: see \*(L"Register Caching\*(R", .    (line  23)
.PP
regcache_cooked_write_signed: see \*(L"Register Caching\*(R", .    (line  23)
.PP
regcache_cooked_write_unsigned: see \*(L"Register Caching\*(R", .    (line  23)
.PP
\&\s-1REGISTER_CONVERT_TO_RAW:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 315)
\&\s-1REGISTER_CONVERT_TO_VIRTUAL:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 310)
register_name: see \*(L"Register Information Functions\*(R", .
.PP
(line  10)
register_reggroup_p: see \*(L"Register Information Functions\*(R", .
.PP
(line 110)
register_type: see \*(L"Register Information Functions\*(R", .
.PP
(line  33)
regset_from_core_section: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 320)
\&\s-1REMOTE_BPT_VECTOR:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 542)
\&\s-1SENTINEL_FRAME:\s0 see \*(L"Stack Frames\*(R", .        (line  22)
.PP
set_gdbarch_bits_big_endian: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line  83)
set_gdbarch_sofun_address_maybe_missing: see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 334)
skip_prologue: see \*(L"Functions and Variable to Analyze Frames\*(R", .
.PP
(line  12)
\&\s-1SKIP_SOLIB_RESOLVER:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 271)
\&\s-1SLASH_STRING:\s0 see \*(L"Misc Guidelines\*(R", .     (line 404)
.PP
\&\s-1SOFTWARE_SINGLE_STEP:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 328)
\&\s-1SOFTWARE_SINGLE_STEP_P:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 324)
\&\s-1SOLIB_ADD:\s0 see \*(L"Native Debugging\*(R", .    (line  86)
.PP
\&\s-1SOLIB_CREATE_INFERIOR_HOOK:\s0 see \*(L"Native Debugging\*(R", .    (line  92)
.PP
solib_loaded: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 105)
.PP
solib_unloaded: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 110)
.PP
sp_regnum: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  49)
\&\s-1START_INFERIOR_TRAPS_EXPECTED:\s0 see \*(L"Native Debugging\*(R", .    (line  96)
.PP
\&\s-1STOPPED_BY_WATCHPOINT:\s0 see \*(L"Algorithms\*(R", .          (line 408)
.PP
store_typed_address: see \*(L"Pointers and Addresses\*(R", .
.PP
(line  70)
struct: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  62)
.PP
\&\s-1TARGET_CAN_USE_HARDWARE_WATCHPOINT:\s0 see \*(L"Algorithms\*(R", .          (line 333)
.PP
target_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  82)
.PP
\&\s-1TARGET_CHAR_BIT:\s0 see \*(L"Defining Other Architecture Features\*(R", .
.PP
(line 460)
target_insert_breakpoint: see \*(L"Algorithms\*(R", .          (line 211)
.PP
target_insert_hw_breakpoint: see \*(L"Algorithms\*(R", .          (line 234)
.PP
target_insert_watchpoint: see \*(L"Algorithms\*(R", .          (line 347)
.PP
\&\s-1TARGET_REGION_OK_FOR_HW_WATCHPOINT:\s0 see \*(L"Algorithms\*(R", .          (line 343)
.PP
target_remove_breakpoint: see \*(L"Algorithms\*(R", .          (line 211)
.PP
target_remove_hw_breakpoint: see \*(L"Algorithms\*(R", .          (line 234)
.PP
target_remove_watchpoint: see \*(L"Algorithms\*(R", .          (line 347)
.PP
target_resumed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 135)
.PP
target_stopped_data_address: see \*(L"Algorithms\*(R", .          (line 364)
.PP
target_watchpoint_addr_within_range: see \*(L"Algorithms\*(R", .          (line 378)
.PP
test_notification: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 213)
.PP
thread_exit: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 123)
.PP
thread_ptid_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 164)
.PP
thread_stop_requested: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 128)
.PP
traceframe_changed: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 153)
.PP
tsv_created: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 203)
.PP
tsv_deleted: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 206)
.PP
tsv_modified: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line 210)
.PP
ui_out_field_core_addr: see \*(L"User Interface\*(R", .      (line 287)
.PP
ui_out_field_fmt: see \*(L"User Interface\*(R", .      (line 261)
.PP
ui_out_field_fmt_int: see \*(L"User Interface\*(R", .      (line 280)
.PP
ui_out_field_int: see \*(L"User Interface\*(R", .      (line 273)
.PP
ui_out_field_skip: see \*(L"User Interface\*(R", .      (line 352)
.PP
ui_out_field_stream: see \*(L"User Interface\*(R", .      (line 320)
.PP
ui_out_field_string: see \*(L"User Interface\*(R", .      (line 291)
.PP
ui_out_flush: see \*(L"User Interface\*(R", .      (line 392)
.PP
ui_out_list_begin: see \*(L"User Interface\*(R", .      (line 234)
.PP
ui_out_list_end: see \*(L"User Interface\*(R", .      (line 240)
.PP
ui_out_message: see \*(L"User Interface\*(R", .      (line 376)
.PP
ui_out_spaces: see \*(L"User Interface\*(R", .      (line 371)
.PP
ui_out_stream_delete: see \*(L"User Interface\*(R", .      (line 315)
.PP
ui_out_stream_new: see \*(L"User Interface\*(R", .      (line 309)
.PP
ui_out_table_begin: see \*(L"User Interface\*(R", .      (line 165)
.PP
ui_out_table_body: see \*(L"User Interface\*(R", .      (line 191)
.PP
ui_out_table_end: see \*(L"User Interface\*(R", .      (line 194)
.PP
ui_out_table_header: see \*(L"User Interface\*(R", .      (line 178)
.PP
ui_out_text: see \*(L"User Interface\*(R", .      (line 358)
.PP
ui_out_tuple_begin: see \*(L"User Interface\*(R", .      (line 210)
.PP
ui_out_tuple_end: see \*(L"User Interface\*(R", .      (line 216)
.PP
ui_out_wrap_hint: see \*(L"User Interface\*(R", .      (line 382)
.PP
unwind_dummy_id: see \*(L"Functions Creating Dummy Frames\*(R", .
.PP
(line  38)
unwind_pc: see \*(L"Functions to Access Frame Data\*(R", .
.PP
(line  11)
unwind_sp: see \*(L"Functions to Access Frame Data\*(R", .
.PP
(line  27)
value_as_address: see \*(L"Pointers and Addresses\*(R", .
.PP
(line  84)
value_from_pointer: see \*(L"Pointers and Addresses\*(R", .
.PP
(line  93)
void: see \*(L"\s-1GDB\s0 Observers\*(R", .       (line  71)
.PP
volatile: see \*(L"Host Definition\*(R", .     (line 110)
.PP
wrap_here: see \*(L"Misc Guidelines\*(R", .     (line 191)
.PP
write_pc: see \*(L"Register Architecture Functions & Variables\*(R", .
.PP
(line  13)

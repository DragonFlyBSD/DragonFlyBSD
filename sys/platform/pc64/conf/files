# This file tells config what files go into building a kernel,
# files marked standard are always included.
#
font.h				optional	sc_dflt_font		\
	compile-with	"uudecode < /usr/share/syscons/fonts/${SC_DFLT_FONT}-8x16.fnt && file2c 'static u_char dflt_font_16[16*256] = {' '};' < ${SC_DFLT_FONT}-8x16 > font.h && uudecode < /usr/share/syscons/fonts/${SC_DFLT_FONT}-8x14.fnt && file2c 'static u_char dflt_font_14[14*256] = {' '};' < ${SC_DFLT_FONT}-8x14 >> font.h && uudecode < /usr/share/syscons/fonts/${SC_DFLT_FONT}-8x8.fnt && file2c 'static u_char dflt_font_8[8*256] = {' '};' < ${SC_DFLT_FONT}-8x8 >> font.h" \
	no-obj no-implicit-rule before-depend				\
	clean		"font.h"
#
atkbdmap.h			optional	atkbd_dflt_keymap	\
	compile-with	"/usr/sbin/kbdcontrol -L ${ATKBD_DFLT_KEYMAP} | sed -e 's/^static keymap_t.* = /static keymap_t key_map = /' -e 's/^static accentmap_t.* = /static accentmap_t accent_map = /' > atkbdmap.h"				\
	no-obj no-implicit-rule before-depend				\
	clean		"atkbdmap.h"
#
ukbdmap.h			optional	ukbd_dflt_keymap	\
	compile-with	"/usr/sbin/kbdcontrol -L ${UKBD_DFLT_KEYMAP} | sed -e 's/^static keymap_t.* = /static keymap_t key_map = /' -e 's/^static accentmap_t.* = /static accentmap_t accent_map = /' > ukbdmap.h"				\
	no-obj no-implicit-rule before-depend				\
	clean		"ukbdmap.h"
#
hpt27xx_lib.o			optional	hpt27xx			\
	dependency	"$S/dev/raid/hpt27xx/x86_64-elf.hpt27xx_lib.o.uu" \
	compile-with	"uudecode < $S/dev/raid/hpt27xx/x86_64-elf.hpt27xx_lib.o.uu" \
	no-implicit-rule
#
hptmvraid.o			optional	hptmv			\
	dependency	"$S/dev/raid/hptmv/x86_64-elf.raid.o.uu"	\
	compile-with	"uudecode < $S/dev/raid/hptmv/x86_64-elf.raid.o.uu" \
	no-implicit-rule
#
hptrr_lib.o			optional	hptrr			\
	dependency	"$S/dev/raid/hptrr/x86_64-elf.hptrr_lib.o.uu"	\
	compile-with	"uudecode < $S/dev/raid/hptrr/x86_64-elf.hptrr_lib.o.uu" \
	no-implicit-rule
#
emulation/ndis/kern_ndis.c	optional	ndisapi pci
emulation/ndis/kern_windrv.c	optional	ndisapi pci
emulation/ndis/subr_hal.c	optional	ndisapi pci
emulation/ndis/subr_ndis.c	optional	ndisapi pci
emulation/ndis/subr_ntoskrnl.c	optional	ndisapi pci
emulation/ndis/subr_pe.c	optional	ndisapi pci
emulation/ndis/subr_u4bd.c	optional	ndisapi pci
emulation/ndis/winx64_wrap.S	optional	ndisapi pci

# XXX use assembler versions of bf_enc and des_enc
crypto/blowfish/bf_enc.c		optional	ipsec ipsec_esp
crypto/des/des_enc.c			optional	ipsec ipsec_esp
crypto/des/des_ecb.c			optional	netsmbcrypto
crypto/des/des_enc.c			optional	netsmbcrypto
crypto/des/des_setkey.c			optional	netsmbcrypto
crypto/blowfish/bf_enc.c		optional	crypto
crypto/des/des_enc.c			optional	crypto
crypto/des/des_ecb.c			optional	crypto
crypto/des/des_setkey.c			optional	crypto

${OSACPI_MD_DIR}/OsdEnvironment.c	optional        acpi
${OSACPI_MD_DIR}/acpi_cpu_machdep.c	optional	acpi
${OSACPI_MD_DIR}/acpi_machdep.c		optional        acpi
${OSACPI_MD_DIR}/acpi_pstate_machdep.c	optional	acpi
${OSACPI_MD_DIR}/acpi_cstate_machdep.c	optional	acpi
${OSACPI_MD_DIR}/acpi_wakeup.c		optional        acpi
acpi_wakecode.h				optional        acpi		\
	dependency	"$S/${OSACPI_MD_DIR}/acpi_wakecode.S"		\
	compile-with	"${MAKE} -f $S/${OSACPI_MD_DIR}/Makefile MAKESRCPATH=$S/${OSACPI_MD_DIR}" \
	no-obj no-implicit-rule before-depend				\
	clean           "acpi_wakecode.h acpi_wakecode.o acpi_wakecode.bin"
#
dev/crypto/aesni/aesencdec_x86_64.S	optional	aesni
dev/crypto/aesni/aeskeys_x86_64.S	optional	aesni
dev/crypto/aesni/aesni.c		optional	aesni
dev/crypto/aesni/aesni_wrap.c		optional	aesni
dev/crypto/padlock/padlock.c		optional	padlock
dev/crypto/padlock/padlock_cipher.c	optional	padlock
dev/crypto/padlock/padlock_hash.c	optional	padlock
dev/crypto/padlock/padlock_rng.c	optional	padlock
dev/crypto/padlock/rng_harvest_x86_64.S	optional	padlock
dev/crypto/rdrand/rdrand.c		optional	rdrand
dev/crypto/rdrand/rdrand_harvest_x86_64.S	optional	rdrand
dev/video/fb/fb.c			optional	vga
dev/video/fb/splash.c			optional	splash
dev/video/fb/vga.c			optional	vga
dev/powermng/est/est.c			optional	cpu_enable_est
dev/netif/ndis/if_ndis.c		optional	ndis
dev/netif/ndis/if_ndis_pccard.c		optional	ndis pccard
dev/netif/ndis/if_ndis_pci.c		optional	ndis cardbus
dev/netif/ndis/if_ndis_pci.c		optional	ndis pci
dev/netif/ndis/if_ndis_u4b.c		optional	ndis usb
dev/misc/kbd/atkbd.c			optional	atkbd
dev/misc/kbd/atkbdc.c			optional	atkbdc
dev/misc/kbd/kbd.c			optional	atkbd
dev/misc/kbd/kbd.c			optional	sc
dev/misc/kbd/kbd.c			optional	ukbd
dev/misc/kbd/kbdsw.c			optional	atkbd
dev/misc/kbd/kbdsw.c			optional	sc
dev/misc/kbd/kbdsw.c			optional	ukbd
dev/misc/syscons/schistory.c		optional	sc
dev/misc/syscons/sckmsrndr.c		optional	sc
dev/misc/syscons/scmouse.c		optional	sc
dev/misc/syscons/scterm.c		optional	sc
dev/misc/syscons/scterm-dumb.c		optional	sc
dev/misc/syscons/scterm-sc.c		optional	sc
dev/misc/syscons/scvgarndr.c		optional	sc vga
dev/misc/syscons/scvidctl.c		optional	sc
dev/misc/syscons/scvtb.c		optional	sc
dev/misc/syscons/syscons.c		optional	sc
dev/misc/syscons/sysmouse.c		optional	sc
kern/link_elf_obj.c		standard
vfs/smbfs/smbfs_io.c		optional	smbfs
vfs/smbfs/smbfs_node.c		optional	smbfs
vfs/smbfs/smbfs_smb.c		optional	smbfs
vfs/smbfs/smbfs_subr.c		optional	smbfs
vfs/smbfs/smbfs_vfsops.c	optional	smbfs
vfs/smbfs/smbfs_vnops.c		optional	smbfs

cpu/x86_64/misc/atomic.c		standard			\
	compile-with    "${CC} -c ${CFLAGS} ${WERROR} ${DEFINED_PROF:S/^$/-fomit-frame-pointer/} ${.IMPSRC}"
platform/pc64/x86_64/autoconf.c	standard
platform/pc64/x86_64/mpboot.S	standard

# DDB XXX
cpu/x86_64/misc/x86_64-gdbstub.c	optional	ddb
cpu/x86_64/misc/lwbuf.c			standard
cpu/x86_64/misc/elf_machdep.c		standard
cpu/x86_64/misc/in_cksum2.s		optional	inet
cpu/x86_64/misc/in_cksum2.s		optional	inet6
cpu/x86_64/misc/ktr.c			optional	ktr
cpu/x86_64/misc/db_disasm.c		optional	ddb
cpu/x86_64/misc/bzeront.s		standard
cpu/x86_64/misc/monitor.s		standard
#
# DOS mbr and gpt
kern/subr_diskmbr.c			standard
kern/subr_diskgpt.c			standard

libkern/memset.c			standard
libkern/stack_protector.c		standard

# DEVICES
#

# PLATFORM FILES
#
platform/pc64/x86_64/exception.S		standard
platform/pc64/x86_64/msi_vector.s	standard
platform/pc64/x86_64/ipl.s		standard
platform/pc64/x86_64/global.s		standard
platform/pc64/x86_64/support.s		standard
platform/pc64/x86_64/sigtramp.s		standard
platform/pc64/x86_64/swtch.s		standard
platform/pc64/x86_64/npx.c		standard
platform/pc64/x86_64/db_interface.c	optional	ddb
platform/pc64/x86_64/db_trace.c		optional	ddb
platform/pc64/x86_64/dump_machdep.c	standard
platform/pc64/x86_64/minidump_machdep.c	standard
platform/pc64/x86_64/vm_machdep.c	standard
platform/pc64/x86_64/machdep.c		standard
platform/pc64/x86_64/userldt.c		standard
platform/pc64/x86_64/tls.c		standard
platform/pc64/x86_64/trap.c		standard
platform/pc64/x86_64/procfs_machdep.c	standard
platform/pc64/x86_64/initcpu.c		standard
platform/pc64/x86_64/identcpu.c		standard
platform/pc64/x86_64/amd64_mem.c	standard
platform/pc64/x86_64/cpufreq_machdep.c    standard
platform/pc64/x86_64/msi.c		standard
platform/pc64/x86_64/uwrapper.c		standard

platform/pc64/apic/lapic.c		standard
platform/pc64/apic/ioapic.c		standard
platform/pc64/apic/ioapic_abi.c		standard
platform/pc64/apic/ioapic_ipl.s		standard
platform/pc64/apic/apic_vector.s	standard

bus/isa/x86_64/isa.c			optional	isa
bus/isa/x86_64/isa_dma.c			optional	isa

platform/pc64/x86_64/nexus.c		standard

platform/pc64/icu/icu.c                 standard
platform/pc64/icu/icu_abi.c             standard
platform/pc64/icu/icu_ipl.s             standard
platform/pc64/icu/icu_vector.s          standard
platform/pc64/icu/elcr.c		standard

bus/pci/x86_64/legacy.c			optional	pci
bus/pci/x86_64/pci_bus.c			optional	pci
bus/pci/x86_64/pci_cfgreg.c		optional	pci
bus/pci/x86_64/mptable_pci.c		optional	pci
# notyet (BIOS struct and functions)
#bus/pci/x86_64/pci_pir.c			optional	pci

platform/pc64/x86_64/pmap.c		standard
platform/pc64/x86_64/pmap_inval.c		standard
platform/pc64/x86_64/bios.c		standard
platform/pc64/x86_64/busdma_machdep.c standard
platform/pc64/x86_64/sysarch.c	standard
platform/pc64/x86_64/ipl_funcs.c	standard
kern/syscalls.c			standard
platform/pc64/x86_64/mp_machdep.c	standard
platform/pc64/x86_64/mptable.c		standard
platform/pc64/acpica/acpi_sdt.c	standard
platform/pc64/acpica/acpi_fadt.c	standard
platform/pc64/acpica/acpi_madt.c	standard
dev/misc/atkbd/atkbd_isa.c		optional	atkbd
dev/misc/atkbdc_layer/atkbdc_isa.c	optional	atkbdc
dev/misc/ppc/ppc.c			optional	ppc
dev/misc/psm/psm.c			optional	psm
dev/serial/sio/sio.c			optional	sio
bus/isa/syscons_isa.c			optional	sc
bus/isa/vga_isa.c			optional	vga
platform/pc64/isa/clock.c		standard
platform/pc64/isa/isa_intr.c		optional	isa
platform/pc64/x86_64/spinlock.s		standard
dev/netif/elink_layer/elink.c		optional	ep

vmx_genassym.o				standard					\
	dependency 	" $S/platform/$P/vmm/vmx_genassym.c ${FORWARD_HEADERS_COOKIE}"	\
	compile-with	"${CC} ${CFLAGS:N-fno-common} ${WERROR} -c ${.IMPSRC}"		\
	no-obj no-implicit-rule								\
	clean		"vmx_genassym.o"
vmx_assym.h				standard					\
	dependency 	"$S/kern/genassym.sh vmx_genassym.o"				\
	compile-with	"sh $S/kern/genassym.sh vmx_genassym.o > ${.TARGET}"		\
	no-obj no-implicit-rule before-depend						\
	clean		"vmx_assym.h"
platform/pc64/vmm/vmm.c			standard
platform/pc64/vmm/vmm_utils.c		standard
platform/pc64/vmm/vmx.c			standard
platform/pc64/vmm/ept.c			standard
platform/pc64/vmm/vmx_trap.s		standard
platform/pc64/vmm/svm.c			standard
